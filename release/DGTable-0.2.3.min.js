'use strict';(function(g,c){var f=navigator.userAgent,m=-1!=f.indexOf("MSIE ")?parseFloat(f.substr(f.indexOf("MSIE ")+5)):null,p=m&&10>m,r=m&&10>m,s=_.bind(document.createElement,document),t=Backbone.View.extend({className:"dgtable-wrapper",tagName:"div",VERSION:"0.2.3",initialize:function(a){a=a||{};a.columns=a.columns||[];this.ma=_.bind(this.Ma,this);this.aa=_.bind(this.Ja,this);this.na=_.bind(this.Oa,this);this.$el.on("dragend",this.aa);this.n=!0;this.N=!1;this.j=void 0===a.virtualTable?!0:!!a.virtualTable;
this.q=a.rowsBufferSize||10;this.m=Math.max(a.minColumnWidth||35,0);this.Q=a.resizeAreaWidth||8;this.J=void 0===a.resizableColumns?!0:!!a.resizableColumns;this.B=void 0===a.movableColumns?!0:!!a.movableColumns;this.r=void 0===a.sortableColumns?1:parseInt(a.sortableColumns,10)||1;this.X=void 0===a.adjustColumnWidthForSortArrow?!0:!!a.adjustColumnWidthForSortArrow;this.Ca=void 0===a.cellClasses?"":a.cellClasses;this.Ua=void 0===a.resizerClassName?"dgtable-resize":a.resizerClassName;this.ba=void 0===
a.tableClassName?"dgtable":a.tableClassName;this.H=void 0===a.comparatorCallback?null:a.comparatorCallback;this.T=void 0===a.width?t.Width.NONE:a.width;this.Qa=void 0===a.relativeWidthGrowsToFillWidth?!0:!!a.relativeWidthGrowsToFillWidth;this.Ra=void 0===a.relativeWidthShrinksToFillWidth?!1:!!a.relativeWidthShrinksToFillWidth;this.O=a.formatter||function(a){return a};var b,d,h,e,c=new t.za;for(e=b=0;b<a.columns.length;b++)d=a.columns[b],h=this.la(d),void 0!==d.e?(d.e>e&&(e=d.e+1),h.e=d.e):h.e=e++,
c.push(h);c.ha();this.b=c;this.c=c.D();if(void 0===a.sortColumn)a.sortColumn=null;else if("string"==typeof a.sortColumn)this.b.get(a.sortColumn)?a.sortColumn=[{column:a.sortColumn,descending:!1}]:a.sortColumn=null;else if(a.sortColumn instanceof Array){e=[];b=0;d=a.sortColumn.length;for(h;b<d&&(h=a.sortColumn[b],h=void 0!==h.column?h:{column:h,descending:!1},(h=this.b.get(h.column))&&!_.contains(e,h.name)&&e.push(h.name),e.length!=this.r&&e.length!=this.c.length);b++);a.sortColumn=e}else"object"==
typeof a.sortColumn?this.b.get(a.sortColumn.column)||(a.sortColumn=null):a.sortColumn=null;this.f=new t.Aa({sortColumn:a.sortColumn,columns:this.columns});this.listenTo(this.f,"sort",this.render).listenTo(this.f,"requiresComparatorForColumn",_.bind(function(a,b,d){this.H&&(a.Va=this.H(b,d))},this));this.h=null;this.ka=a.height;this.w=0},pa:function(a){var b=parseFloat(a),d=n.AUTO;0<b&&(a==b+"%"?(d=n.RELATIVE,b/=100):0<b&&1>b?d=n.RELATIVE:(b<this.m&&(b=this.m),d=n.ABSOLUTE));return{width:b,mode:d}},
la:function(a){var b=this.pa(a.width);return{name:a.name,label:void 0===a.label?a.name:a.label,width:b.width,o:b.mode,resizable:void 0===a.resizable?!0:a.resizable,sortable:void 0===a.sortable?!0:a.sortable,F:void 0===a.F?!0:a.F,visible:void 0===a.visible?!0:a.visible,cellClasses:void 0===a.cellClasses?this.Ca:a.cellClasses}},close:function(){this.i&&(this.i.remove(),this.i=null);this.remove();this.ta();this.g.unbind();this.d.unbind();this.$el.unbind();this.unbind();if(this.p){for(var a=0,b;a<this.p.length;a++)b=
this.p[a],b.ya.removeEventListener("message",b.xa,!1);this.p.length=0}this.f.length=this.b.length=0;for(var d in this)this.hasOwnProperty(d)&&(this[d]=null)},render:function(){if(!0===this.n){this.n=!1;this.d&&(this.w=this.d[0].scrollTop);this.T==t.Width.AUTO&&this.ja();this.M(!0,!1).Sa();var a=this.d[0].scrollHeight-this.d.height();this.w>a&&(this.w=a);this.d[0].scrollTop=this.w;this.j&&(this.d.on("scroll",_.bind(this.oa,this)),this.oa(null,!0));this.da();for(a=0;a<this.f.sortColumn.length;a++)this.sa(this.f.sortColumn[a].column,
this.f.sortColumn[a].descending);this.X&&this.M(!0);this.N=!1;this.trigger("renderSkeleton")}else this.j&&this.ra(this.w,this.d[0].scrollTop);this.trigger("render");return this},addColumn:function(a,b){if(a&&!this.b.get(a.name)){var d=null;void 0!==b&&(d=this.b.get(b)||this.b.V(b));var h=this.la(a);h.e=d?d.e:this.b.wa()+1;for(var d=this.b.wa(),e=h.e,c;d>=e;d--)(c=this.b.V(d))&&c.e++;this.b.push(h);this.b.ha();this.n=!0;this.c=this.b.D();this.render();this.trigger("addColumn",h.name)}return this},
removeColumn:function(a){var b=this.b.indexOf(a);-1<b&&(this.b.splice(b,1),this.b.ha(),this.n=!0,this.c=this.b.D(),this.render(),this.trigger("removeColumn",a));return this},filter:function(a,b,d){if(this.b.get(a)){var h=!!this.h;this.h&&(this.h=null);this.h=this.f.va(a,b,d);if(h||this.h)this.n=!0,this.render(),this.trigger("filter",a,b,d)}return this},P:function(){this.h&&(this.h=null,this.h=this.f.va(this.f.L,this.f.U,this.f.ga));return this},setColumnLabel:function(a,b){var d=this.b.get(a);if(d&&
(d.label=void 0===b?d.name:b,d.element))for(var h=0;h<d.element[0].firstChild.childNodes.length;h++){var e=d.element[0].firstChild.childNodes[h];if(3===e.nodeType){e.textContent=d.label;break}}return this},moveColumn:function(a,b){var d,h;"string"===typeof a?d=this.b.get(a):"number"===typeof a&&(d=this.c[a]);"string"===typeof b?h=this.b.get(b):"number"===typeof b&&(h=this.c[b]);if(d&&h&&a!==b){var e=d.e,c=h.e;this.c=this.b.moveColumn(d,h).D();if(this.j)this.n=!0,this.render();else{var f=this.A.find(">tr>th");
h=e<c?c+1:c;f[0].parentNode.insertBefore(f[e],f[h]);for(var f=this.c[e],f=(f.t||f.k)+"px",k=this.c[c],k=(k.t||k.k)+"px",m=this.d[0].childNodes,l=0,z=m.length,g;l<z;l++)g=m[l],1===g.nodeType&&(g.insertBefore(g.childNodes[e],g.childNodes[h]),g.childNodes[c].firstChild.style.width=k,g.childNodes[e].firstChild.style.width=f)}this.trigger("moveColumn",d.name,e,c)}return this},sort:function(a,b,d){var h=this.b.get(a);if(h){var e=this.f.sortColumn;e.length&&e[e.length-1].column==a&&(b=void 0===b?!e[e.length-
1].descending:b);if(d){for(a=0;a<e.length;a++)if(e[a].column==h.name){a<e.length-1?e.length=0:e.splice(e.length-1,1);break}if(0<this.r&&e.length>=this.r||e.length>=this.c.length)e.length=0}else e.length=0;e.push({column:h.name,descending:!(void 0===b||!b)});this.f.sortColumn=e;this.ja();for(a=0;a<e.length;a++)this.sa(e[a].column,e[a].descending);this.X&&this.M(!0);this.j||(this.n=!0);this.f.sort(!!this.h);this.P();this.h&&this.render();b=[];for(a=0;a<e.length;a++)b.push({column:e[a].column,descending:e[a].descending});
this.trigger("sort",b)}return this},showColumn:function(a){var b=this.b.get(a);b&&!b.visible&&(this.n=b.visible=!0,this.c=this.b.D(),this.render(),this.trigger("showColumn",a));return this},hideColumn:function(a){var b=this.b.get(a);b&&b.visible&&(b.visible=!1,this.n=!0,this.c=this.b.D(),this.render(),this.trigger("hideColumn",a));return this},setMinColumnWidth:function(a){a=Math.max(a,0);this.m!=a&&(this.m=a,this.M(!0));return this},getMinColumnWidth:function(){return this.m},setSortableColumns:function(a){if(this.r!=
a&&(this.r=a,this.g)){a=this.g.find("thead>tr>th");for(var b=0;b<a.length;b++)c(a[0])[0<this.r&&this.c[b].sortable?"addClass":"removeClass"]("sortable")}return this},getSortableColumns:function(){return this.r},setMovableColumns:function(a){a=!!a;this.B!=a&&(this.B=a);return this},getMovableColumns:function(){return this.B},setResizableColumns:function(a){a=!!a;this.J!=a&&(this.J=a);return this},getResizableColumns:function(){return this.J},setComparatorCallback:function(a){this.H!=a&&(this.H=a);
return this},setColumnWidth:function(a,b){var d=this.pa(b),h=this.b.get(a);if(h){var e=this.S(h);h.width=d.width;h.o=d.mode;d=this.S(h);e!=d&&this.M(!0);this.trigger("setColumnWidth",h.name,e,d)}return this},getColumnWidth:function(a){return(a=this.b.get(a))?this.S(a):null},getColumnWidths:function(){for(var a={},b=0;b<this.b.length;b++)a[this.b[b].name]=this.S(this.b[b]);return JSON.stringify(a)},getComparatorCallback:function(){return this.H},I:function(a){return(parseFloat(c.css(a,"padding-left"))||
0)+(parseFloat(c.css(a,"padding-right"))||0)},Da:function(a){return(parseFloat(c.css(a,"border-left"))||0)+(parseFloat(c.css(a,"border-right"))||0)},ia:function(){function a(a){var b=m(a,"width");return"auto"===b?(parseFloat(c(a).css("width"))||0)+1:parseFloat(b)||0}var b=this.$el.width(),d,h,e,v;if(this.g)d=this.g,h=this.A;else{d=e=c("<table></table>").css({position:"absolute",top:"-9999px",visibility:"hidden"}).addClass(this.ba);h=v=c("<thead></thead>");for(var f=c("<tr></tr>"),k=0;k<this.c.length;k++)f.append(c("<th><div></div></th>"));
e.append(v.append(f))}var m=window.getComputedStyle?function(a,b){var d=window.getComputedStyle(a,null);return d?d.getPropertyValue(b):null}:function(a,b){var d=a.currentStyle;return d?d[b]:null},b=b-this.Da(d[0]);d=h.find(">tr>th");for(var k=0,l;k<d.length;k++)f=c(d[k].firstChild),v=c(d[k]),h=Math.max(parseFloat(v.css("border-left-width"))||0,0<k?parseFloat(c(d[k-1]).css("border-right-width"))||0:0),l="border-box"===v.css("boxSizing"),b-=h+(f.outerWidth()-f.width())+(a(v[0])+(l?0:this.I(v[0]))-f.outerWidth());
b-=parseFloat(c(d[d.length-1]).css("border-right-width"))||0;e&&e.remove();return b},M:function(){function a(a){a=c("<table><thead><tr><th>"+a+"</th></tr></thead></table>").css({position:"absolute",top:"-9999px",visibility:"hidden"}).addClass(this.ba);var b=a.find(">thead>tr>th");b.css({position:"absolute","float":"left","white-space":"nowrap",visibility:"hidden"});a.appendTo(document.body);b=b.width();a.remove();return b}var b=null;return function(d,h){var e=this.ia(),c=e,f=0;if(c!=b||d){b=e;var k,
m=[],l,g;for(l=e=0;l<this.b.length;l++)this.b[l].t=null;for(l=0;l<this.c.length;l++)g=this.c[l],g.o==n.ABSOLUTE?(k=g.width,k+=g.fa||0,k<this.m&&(k=this.m),c-=k,k!==g.k&&(g.k=k,m.push(l))):g.o==n.AUTO?(k=_.bind(a,this)(g.label)+20,k+=g.fa||0,k<this.m&&(k=this.m),c-=k,k!==g.k&&(g.k=k,m.push(l))):g.o==n.RELATIVE&&(e+=g.width,f++);if(f&&(1>e&&this.Qa||1<e&&this.Ra))for(l=0;l<this.c.length;l++)g=this.c[l],g.o==n.RELATIVE&&(g.width/=e);e=c;for(l=0;l<this.c.length;l++)g=this.c[l],g.o==n.RELATIVE&&(k=Math.round(e*
g.width),k<this.m&&(k=this.m),c-=k,f--,0===f&&1===c&&(k++,c--),-1===c&&(k--,c++),k!==g.k&&(g.k=k,m.push(l)));this.c[this.c.length-1].t=this.c[this.c.length-1].k-(this.R||0);if(h||void 0===h)for(l=0;l<m.length;l++)this.Ta(m[l])}return this}}(),addRows:function(a){if(a){this.scrollTop=this.$el.find(".table").scrollTop();var b=this.f.length;this.N=!0;this.f.add(a);if(this.j)this.P(),0===b&&(this.h||this.f).length&&(this.n=!0),this.render();else if(this.h)b=this.h.length,this.P(),this.h&&this.h.length==
b||(this.n=!0,this.render());else{var d,h,e;e=document.createDocumentFragment();for(var c=0,f,k,g,m=this.c.length,p=a.length;c<p;c++){f=a[c];b=s("tr");for(k=0;k<m;k++)g=this.c[k],d=s("div"),d.style.width=(g.t||g.k)+"px",d.innerHTML=this.O(f[g.name],g.name),h=s("td"),g.cellClasses&&(h.className=g.cellClasses),h.appendChild(d),b.appendChild(h);e.appendChild(b)}this.d[0].appendChild(e);this.ca()}this.trigger("addRows",a.length,!1)}return this},setRows:function(a){this.scrollTop=this.$el.find(".table").scrollTop();
this.f.reset(a);this.P();this.n=!0;this.render().trigger("addRows",a.length,!0);return this},getUrlForElementContent:function(a){if(a=document.getElementById(a)){a=a.textContent;if("function"===typeof Blob)a=new Blob([a]);else{var b=g.BlobBuilder||g.WebKitBlobBuilder||g.Ya||g.Xa;if(!b)return null;b=new b;b.append(a);a=b.getBlob()}return(g.URL||g.webkitURL).createObjectURL(a)}return null},isWorkerSupported:function(){return g.Worker instanceof Function},createWebWorker:function(a,b){if(this.isWorkerSupported()){var d=
this,h=new Worker(a),e=function(a){a.data.append?d.addRows(a.data.rows):d.setRows(a.data.rows)};h.addEventListener("message",e,!1);this.p||(this.p=[]);this.p.push({ya:h,xa:e});(b||void 0===b)&&h.postMessage(null);return h}return null},unbindWebWorker:function(a){if(this.p)for(var b=0;b<this.p.length;b++)this.p[b].ya==a&&(a.removeEventListener("message",this.p[b].xa,!1),this.p.splice(b,1),b--);return this},oa:function(a,b){if(!0===b||this.w!==this.d[0].scrollTop){var d=parseInt(this.d[0].scrollTop/
this.C,10),h=d-this.q;0>h&&(h=0);this.a.u=this.a.first;this.a.v=this.a.last;this.a.first=h;this.a.last=d+this.s+this.q;d=this.h||this.f;this.a.last>d.length&&(this.a.last=d.length,this.a.first=Math.max(0,this.a.last-this.s-2*this.q));this.ra(this.w,this.d[0].scrollTop)}},Oa:function(){this.A[0].scrollLeft=this.d[0].scrollLeft},Z:function(a){for(var b="rtl"==this.g.css("direction"),d=c(a.target).closest("th"),h=d[0],e=d[0].previousSibling;e&&1!=e.nodeType;)e=e.previousSibling;var f=!e;a=(a.originalEvent.pageX||
a.originalEvent.clientX)-d.offset().left;if(b){if(!f&&d.outerWidth()-a<=this.Q/2)return e.l;if(a<=this.Q/2)return h.l}else{if(!f&&a<=this.Q/2)return e.l;if(d.outerWidth()-a<=this.Q/2)return h.l}return null},La:function(a){if(this.J){var b=this.Z(a);a=c(a.target).closest("th")[0];b&&this.b.get(b).resizable?a.style.cursor="e-resize":a.style.cursor=""}},Ka:function(a){c(a.target).closest("th")[0].style.cursor=""},Ea:function(a){if(!this.Z(a)&&(a=c(a.target).closest("th")[0],this.r)){var b=this.b.get(a.l);
b&&b.sortable&&this.sort(a.l,void 0,!0)}},Na:function(a){var b=this.Z(a),d;if(b){d=this.b.get(b);if(!this.J||!d||!d.resizable)return!1;b="rtl"==this.g.css("direction");this.i&&c(this.i).remove();this.i=c("<div></div>").addClass(this.Ua).css({position:"absolute",display:"block","z-index":-1,visibility:"hidden",width:"2px",background:"#000",opacity:0.7}).appendTo(this.$el);d=d.element;var h=this.i.parent(),e=d.offset(),f=h.offset();8==m&&(e=d.offset());f.left+=parseFloat(h.css("border-left-width"))||
0;f.top+=parseFloat(h.css("border-top-width"))||0;e.left-=f.left;e.top-=f.top;e.top-=parseFloat(d.css("border-top-width"))||0;h=this.i.outerWidth();b?e.left-=Math.ceil((parseFloat(d.css("border-left-width"))||0)/2):(e.left+=d.outerWidth(),e.left+=Math.ceil((parseFloat(d.css("border-right-width"))||0)/2));e.left-=Math.ceil(h/2);b=this.g.height()-(this.g.offset().top-d.offset().top);this.i.css({"z-index":"10",visibility:"visible",left:e.left,top:e.top,height:b})[0].l=d[0].l;try{this.i[0].style.zIndex=
""}catch(g){}c(document).on("mousemove",this.ma);c(document).on("mouseup",this.aa);a.preventDefault()}else this.B?(b=c(a.target).closest("th"),(d=this.b.get(b[0].l))&&d.F?(b[0].style.opacity=0.35,this.Y=161061273*Math.random(),a.originalEvent.dataTransfer.setData("text",JSON.stringify({ua:this.Y,column:d.name}))):a.preventDefault()):a.preventDefault()},Ma:function(a){var b=this.b.get(this.i[0].l),d="rtl"==this.g.css("direction"),b=b.element,h=this.i.parent(),e=b.offset(),c=h.offset();c.left+=parseFloat(h.css("border-left-width"))||
0;e.left-=c.left;h=this.i.outerWidth();a=a.pageX-c.left;e=e.left;d?(e+=b.outerWidth(),e-=Math.ceil((parseFloat(b.css("border-right-width"))||0)/2),e-=Math.ceil(h/2),e-=this.m,e-=this.I(b[0]),a>e&&(a=e)):(e+=Math.ceil((parseFloat(b.css("border-right-width"))||0)/2),e-=Math.ceil(h/2),e+=this.m,e+=this.I(b[0]),a<e&&(a=e));this.i.css("left",a+"px")},Ja:function(a){if(this.i){c(document).off("mousemove",this.ma);c(document).off("mouseup",this.aa);var b=this.b.get(this.i[0].l),d="rtl"==this.g.css("direction"),
h=b.element,e=this.i.parent(),f=h.offset(),g=e.offset();g.left+=parseFloat(e.css("border-left-width"))||0;f.left-=g.left;e=this.i.outerWidth();a=a.pageX-g.left;f=g=f.left;f=0;d?(a+=this.I(h[0]),g+=h.outerWidth(),g-=Math.ceil((parseFloat(h.css("border-right-width"))||0)/2),g-=Math.ceil(e/2),f=g-this.m,a>f&&(a=f),f=g-a):(a-=this.I(h[0]),g+=Math.ceil((parseFloat(h.css("border-right-width"))||0)/2),g-=Math.ceil(e/2),f=g+this.m,a<f&&(a=f),f=a-g);this.i.remove();this.i=null;d=f;if(b.o==n.RELATIVE){d=this.ia();
for(h=0;h<this.c.length;h++)e=this.c[h],e.o!=n.RELATIVE&&(d-=e.k);d=f/d*100;d+="%"}this.setColumnWidth(b.name,d)}else a.target.style.opacity=null},Fa:function(a){if(this.B){var b=a.originalEvent.dataTransfer.getData("text"),b=b?JSON.parse(b):null;a=c(a.target).closest("th");(!b||this.Y==b.ua&&a.l!==b.column)&&(b=this.b.get(a[0].l))&&(b.F||b!=this.c[0])&&c(a).addClass("drag-over")}},Ha:function(a){a.preventDefault()},Ga:function(a){var b=c(a.target).closest("th");c(b[0].firstChild).has(a.originalEvent.relatedTarget).length||
b.removeClass("drag-over")},Ia:function(a){a.preventDefault();var b=JSON.parse(a.originalEvent.dataTransfer.getData("text"));a=c(a.target).closest("th");if(this.B&&b.ua==this.Y){var b=b.column,d=a[0].l,h=this.b.get(b),e=this.b.get(d);h&&e&&h.F&&(e.F||e!=this.c[0])&&this.moveColumn(b,d)}c(a).removeClass("drag-over")},ja:function(){if(this.g){var a=this.g.find(">thead>tr>th.sorted"),b=a.find(">div>.sort-arrow");_.forEach(b,_.bind(function(a){if(a=this.b.get(a.parentNode.parentNode.l))a.fa=0},this));
b.remove();a.removeClass("sorted").removeClass("desc")}return this},sa:function(a,b){var d=this.b.get(a),h=s("span");h.className="sort-arrow";d.element.addClass(b?"sorted desc":"sorted");d.element[0].firstChild.insertBefore(h,d.element[0].firstChild.firstChild);d.o!=n.RELATIVE&&this.X&&(d.fa=h.scrollWidth+(parseFloat(c(h).css("margin-right"))||0)+(parseFloat(c(h).css("margin-left"))||0));return this},Ta:function(a){var b=this.g.find(">thead>tr>th"),d=this.b.get(b[a].l);if(d){b[a].firstChild.style.width=
d.k+"px";for(var b=(d.t||d.k)+"px",d=this.d[0].childNodes,c=this.j?1:0,e=d.length-(this.j?1:0),f;c<e;c++)f=d[c],1===f.nodeType&&(f.childNodes[a].firstChild.style.width=b);this.da()}return this},ta:function(){this.g&&this.g.find(">thead>tr>th").off("mousemove").off("mouseleave").off("dragstart").off("selectstart").off("click").find(">div").off("dragenter").off("dragover").off("dragleave").off("drop");return this},Sa:function(){var a=0;this.K&&(a=parseFloat(this.K.style.height));this.ta();var b,d,h,
e,f,g,k,m,l,n,y=s("tr"),q;r&&(q=function(a){a.preventDefault();this.Za();return!1});for(b=0;b<this.c.length;b++)if(e=this.c[b],e.visible&&(k=s("div"),k.style.width=e.k+"px",k.innerHTML=e.label,l=s("th"),l.draggable=!0,this.r&&e.sortable&&(l.className="sortable"),l.l=e.name,l.appendChild(k),y.appendChild(l),this.c[b].element=c(l),c(l).on("mousemove",_.bind(this.La,this)).on("mouseleave",_.bind(this.Ka,this)).on("dragstart",_.bind(this.Na,this)).on("click",_.bind(this.Ea,this)),c(k).on("dragenter",
_.bind(this.Fa,this)).on("dragover",_.bind(this.Ha,this)).on("dragleave",_.bind(this.Ga,this)).on("drop",_.bind(this.Ia,this)),r))c(l).on("selectstart",_.bind(q,l));this.g&&this.j&&(this.d.off("scroll"),this.g.remove());"static"==this.$el.css("position")&&this.$el.css("position","relative");this.j||!this.g?(e=document.createDocumentFragment(),b=s("table"),b.className=this.ba,e.appendChild(b),l=s("thead"),l.style.display="block",p&&c(l).css({"float":"rtl"==this.$el.css("direction")?"right":"left",
clear:"both"}),b.appendChild(l),q=s("tbody"),q.style.maxHeight=this.ka+"px",q.style.display="block",q.style.overflowY="auto",q.style.overflowX="hidden",p&&c(q).css({"float":"rtl"==this.$el.css("direction")?"right":"left",clear:"both"}),this.T==t.Width.SCROLL&&(l.style.overflowX="hidden",q.style.overflowX="auto"),b.appendChild(q),this.el.appendChild(e),this.g=c(b),this.d=c(q),this.A=c(l)):(b=this.g[0],q=this.d[0],l=this.A[0]);this.j&&!this.C&&(k=function(){var a=s("tr");a.appendChild(s("td")).appendChild(s("div")).innerHTML=
"0";a.style.visibility="hidden";a.style.position="absolute";return a},b=q.appendChild(k()),e=q.appendChild(k()),k=q.appendChild(k()),this.C=c(e).outerHeight(),q.removeChild(b),q.removeChild(e),q.removeChild(k),this.s=parseInt(this.ka/this.C,10));var u=this.h||this.f;this.j&&(this.a&&this.a.last-this.a.first>=this.s?(this.a.u=this.a.u!=this.a.first?this.a.u:this.a.first,this.a.v=this.a.v!=this.a.last?this.a.v:this.a.last,this.a.last>u.length&&(this.a.last=u.length,this.a.first=Math.max(0,this.a.last-
this.s-2*this.q))):(b=this.s+this.q,b>u.length&&(b=u.length),this.a={first:0,last:b,u:0,v:b}));var w=document.createDocumentFragment();this.j&&(m=this.K=document.createElement("tr"),m.style.height=a+"px",w.appendChild(m));var x;this.j?(b=this.a.first,x=this.a.last):(b=0,x=u.length);f=this.c.length;for(g=u.length;b<g&&b<x;b++){d=u[b];m=document.createElement("tr");this.j&&m.setAttribute("data-row",b);for(h=0;h<f;h++)e=this.c[h],k=document.createElement("div"),k.style.width=e.k+"px",k.innerHTML=this.O(d[e.name],
e.name),n=document.createElement("td"),e.cellClasses&&(n.className=e.cellClasses),n.appendChild(k),m.appendChild(n);w.appendChild(m)}this.j&&(m=this.ea=document.createElement("tr"),m.style.height=this.C*Math.max(0,u.length-this.s-this.q)-a+"px",w.appendChild(m));try{l.innerHTML=""}catch(A){l.textContent=""}l.appendChild(y);try{q.innerHTML=""}catch(B){q.textContent=""}q.appendChild(w);this.ca(!0);this.j&&this.G();return this},ca:function(a){var b=this.d[0].offsetWidth-this.d[0].clientWidth;if(b!=this.R||
a){this.R=b;for(a=0;a<this.b.length;a++)this.b[a].t=null;if(0<this.R){b=this.c.length-1;this.c[b].t=this.c[b].k-this.R;var d=this.c[b].t+"px",c=this.d[0].childNodes;a=this.j?1:0;for(var e=c.length-(this.j?1:0),f;a<e;a++)f=c[a],1===f.nodeType&&(f.childNodes[b].firstChild.style.width=d)}}return this},ra:function(a,b){var d,c,e=this.a.last-this.a.first-(this.a.v-this.a.u),f=this.s+this.q;if(b<a)d=this.a.first,c=this.a.u,this.a.last<=this.a.u&&(d=this.a.first,c=this.a.last),this.a.u=this.a.first,this.a.v=
this.a.last,this.qa(c-d-e,!1),this.W(d,c,!0),this.G();else if(b>a)d=this.a.v,c=this.a.last,this.a.first>=this.a.v&&(d=this.a.first,c=this.a.last),this.a.u=this.a.first,this.a.v=this.a.last,this.qa(c-d-e,!0),this.W(d,c,!1),this.G();else if(this.N)this.N=!1,c=this.h||this.f,this.a.last<c.length&&this.a.last<f&&(d=this.a.last,c=c.length,c>f&&(c=f),this.W(d,c,!1),this.a.last=c),this.G();else{this.G();this.Pa(this.a.first);return}this.ca();this.da();this.w=this.d[0].scrollTop},G:function(){var a=((this.h||
this.f).length-(this.d[0].childNodes.length-2))*this.C;if(0>a)this.K.style.height=0,this.ea.style.height=0;else{var b=this.a.first*this.C;this.K.style.height=b+"px";this.ea.style.height=a-b+"px"}},W:function(a,b,d){if(d)for(d=this.K.nextSibling;d&&1!=d.nodeType;)d=d.nextSibling;else d=this.ea;for(;a<b;a++)this.Ba(a,d)},Ba:function(a,b){var d=document.createElement("tr");d.setAttribute("data-row",a);for(var c=this.h||this.f,e=0,f,g,m;e<this.c.length;e++)f=this.c[e],g=document.createElement("div"),
g.style.width=(f.t||f.k)+"px",g.innerHTML=this.O(c[a][f.name],f.name),m=document.createElement("td"),f.cellClasses&&(m.className=f.cellClasses),m.appendChild(g),d.appendChild(m);this.d[0].insertBefore(d,b)},qa:function(a,b){var d,c;a>this.s+2*this.q&&(a=this.s+2*this.q);var e=this.d[0],f=e.childNodes;c=this.d[0].childNodes.length-2;b?(d=1,c=Math.min(a+1,c+1)):(d=c+1-a,c+=1);for(var g=d;g<c;c--)e.removeChild(f[d])},Pa:function(a){for(var b=this.d[0].getElementsByTagName("tr"),d=this.h||this.f,f=1,
e,g,m,k;f<b.length-1;f++)for(e=b[f],e.setAttribute("data-row",a+f-1),e=c("td>div",e),g=0;g<e.length;g++)m=e[g],k=this.c[g],k=k.name,m.innerHTML=this.O(d[a+f-1][k],k)},da:function(){if(this.T==t.Width.AUTO){for(var a=this.g.find(">thead>tr>th"),b=0,d=0;d<a.length;d++)b+=c(a[d])[0].offsetWidth;this.g.width(b);this.$el.width(b)}else if(this.T==t.Width.SCROLL)if(a=this.$el.innerWidth(),b=this.g.width(),d=this.A[0].scrollWidth,this.d.off("scroll",this.na),d>b||d>a)this.A.width(a),this.d.width(a),this.d.on("scroll",
this.na);else{try{this.A[0].style.width=""}catch(f){}try{this.d[0].style.width=""}catch(e){}}return this},S:function(a){return a.o==n.AUTO?"auto":a.o==n.RELATIVE?100*a.width+"%":a.width}}),n={AUTO:0,ABSOLUTE:1,RELATIVE:2};t.Width={NONE:"none",AUTO:"auto",SCROLL:"SCROLL"};g.DGTable=t})(this,jQuery);
DGTable.za=function(){function g(){var c=[];_.extend(c,g.prototype);c.initialize.apply(c,arguments);return c}g.prototype=[];g.prototype.initialize=function(){};g.prototype.get=function(c){for(var f=0,g=this.length;f<g;f++)if(this[f].name==c)return this[f];return null};g.prototype.indexOf=function(c){for(var f=0,g=this.length;f<g;f++)if(this[f].name==c)return f;return-1};g.prototype.V=function(c){for(var f=0,g=this.length;f<g;f++)if(this[f].e==c)return this[f];return null};g.prototype.ha=function(){var c=
[],f;for(f=0;f<this.length;f++)c.push(this[f]);c.sort(function(c,f){return c.e<f.e?-1:c.e>f.e?1:0});for(f=0;f<c.length;f++)c[f].e=f};g.prototype.D=function(){for(var c=[],f=0,g;f<this.length;f++)g=this[f],g.visible&&c.push(g);c.sort(function(c,f){return c.e<f.e?-1:c.e>f.e?1:0});return c};g.prototype.wa=function(){for(var c=0,f=0,g;f<this.length;f++)g=this[f],g.e>c&&(c=g.e);return c};g.prototype.moveColumn=function(c,f){if(c&&f){var g=c.e,p=f.e,r;if(g<p)for(g+=1;g<=p;g++)r=this.V(g),r.e--;else for(g-=
1;g>=p;g--)r=this.V(g),r.e++;c.e=p}return this};return g}();
DGTable.Aa=function(){function g(){var c=[];_.extend(c,g.prototype);c.initialize.apply(c,arguments);return c}g.prototype=[];_.extend(g.prototype,Backbone.Events);g.prototype.initialize=function(c){c=c||{};this.U=this.L=null;this.ga=!1;this.sortColumn=null==c.sortColumn?[]:c.sortColumn};g.prototype.add=function(c,f){var g,p;if("splice"in c&&"length"in c)if(f)for(g=0,p=c.length;g<p;g++)this.splice(f++,0,c[g]);else for(g=0,p=c.length;g<p;g++)this.push(c[g]);else f?this.splice(f,0,c):this.push(c)};g.prototype.reset=
function(c){this.length=0;c&&this.add(c)};g.prototype.va=function(c,f,m){if((f=f.toString())&&null!=c){var p=new g({sortColumn:this.sortColumn});this.L=c;this.U=f;this.ga=m;c=0;for(f=this.length;c<f;c++)m=this[c],this.Wa(m)&&p.push(m);return p}return this.U=this.L=null};g.prototype.Wa=function(c){if(c&&this.L){c=c[this.L];if(null==c)return!1;c=c.toString();var f=this.U;this.ga||(c=c.toUpperCase(),f=f.toUpperCase());return-1!==c.indexOf(f)}return!0};(function(){function c(c,f){var g=f?1:-1,s=f?-1:
1;return function(f,n){var a=f[c],b=n[c];return a<b?g:a>b?s:0}}var f=g.prototype.sort;g.prototype.sort=function(g){if(this.sortColumn.length){var p=[],r,s;for(r=0;r<this.sortColumn.length;r++)s={},this.trigger("requiresComparatorForColumn",s,this.sortColumn[r].column,this.sortColumn[r].descending),p.push(_.bind(s.Va||c(this.sortColumn[r].column,this.sortColumn[r].descending),this));if(1===p.length)f.call(this,p[0]);else{var t=p.length,n;f.call(this,function(a,b){for(r=0;r<t&&(n=p[r](a,b),0===n);r++);
return n})}g||this.trigger("sort")}return this}})();return g}();
//# sourceMappingURL=DGTable.min.js.map