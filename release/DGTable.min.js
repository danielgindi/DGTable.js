'use strict';(function(l){var e=navigator.userAgent,g=-1!=e.indexOf("MSIE ")?parseFloat(e.substr(e.indexOf("MSIE ")+5)):null,k=g&&10>g,n=g&&10>g,m=Backbone.View.extend({className:"dgtable-wrapper",tagName:"div",VERSION:"0.2.0",initialize:function(a){a=a||{};a.columns=a.columns||[];this.T=_.bind(this.Aa,this);this.I=_.bind(this.xa,this);this.$el.on("dragend",this.I);this.l=!0;this.G=!1;this.j=void 0===a.virtualTable?!0:!!a.virtualTable;this.q=a.rowsBufferSize||10;this.o=a.minColumnWidth||35;this.K=
a.resizeAreaWidth||8;this.D=void 0===a.resizableColumns?!0:!!a.resizableColumns;this.s=void 0===a.movableColumns?!0:!!a.movableColumns;this.n=void 0===a.sortableColumns?1:parseInt(a.sortableColumns,10)||1;this.ra=void 0===a.cellClasses?"":a.cellClasses;this.Ea=void 0===a.resizerClassName?"dgtable-resize":a.resizerClassName;this.ha=void 0===a.tableClassName?"dgtable":a.tableClassName;this.C=void 0===a.comparatorCallback?null:a.comparatorCallback;this.H=a.formatter||function(a){return a};var b,d,f,
c,h,e=new m.oa;b=0;c;d;for(h=0;b<a.columns.length;b++)d=a.columns[b],c=this.ca(d),void 0!==d.c?(d.c>h&&(h=d.c+1),c.c=d.c):c.c=h++,e.push(c);e.Y();this.a=e;this.d=e.w();if(void 0===a.sortColumn)a.sortColumn=null;else if("string"==typeof a.sortColumn)this.a.get(a.sortColumn)?a.sortColumn=[{column:a.sortColumn,descending:!1}]:a.sortColumn=null;else if(a.sortColumn instanceof Array){h=[];b=0;d=a.sortColumn.length;f;for(c;b<d&&(f=a.sortColumn[b],f=void 0!==f.column?f:{column:f,descending:!1},(c=this.a.get(f.column))&&
!_.contains(h,c.name)&&h.push(c.name),h.length!=this.n&&h.length!=this.d.length);b++);a.sortColumn=h}else"object"==typeof a.sortColumn?this.a.get(a.sortColumn.column)||(a.sortColumn=null):a.sortColumn=null;this.f=new m.pa({sortColumn:a.sortColumn,columns:this.columns});this.listenTo(this.f,"sort",this.render).listenTo(this.f,"requiresComparatorForColumn",_.bind(function(a,b,c){this.C&&(a.Fa=this.C(b,c))},this));this.g=null;this.ba=a.height;this.p=0},ca:function(){function a(a){a=$("<table><thead><tr><th>"+
a+"</th></tr></thead></table>").css({position:"absolute",top:"-9999px",visibility:"hidden"}).addClass(this.ha);var d=a.find(">thead>tr>th");d.css({position:"absolute","float":"left","white-space":"nowrap",visibility:"hidden"});a.appendTo(document.body);d=d.width();a.remove();return d}return function(b){return{name:b.name,label:void 0===b.label?b.name:b.label,width:void 0===b.width?_.bind(a,this)(b.label)+20:b.width,resizable:void 0===b.resizable?!0:b.resizable,sortable:void 0===b.sortable?!0:b.sortable,
A:void 0===b.A?!0:b.A,visible:void 0===b.visible?!0:b.visible,cellClasses:void 0===b.cellClasses?this.ra:b.cellClasses}}}(),close:function(){this.h&&(this.h.remove(),this.h=null);this.L=this.v=null;this.ia();this.T=this.I=null;this.e.off("scroll");this.$el.off("dragend");this.remove();this.unbind();if(this.m){for(var a=0,b;a<this.m.length;a++)b=this.m[a],b.na.removeEventListener("message",b.ma,!1);this.m.length=0}},render:function(){if(!0===this.l){this.l=!1;this.e&&(this.p=this.e[0].scrollTop);this.aa().Da();
var a=this.e[0].scrollHeight-this.e.height();this.p>a&&(this.p=a);this.e[0].scrollTop=this.p;this.j&&(this.e.on("scroll",_.bind(this.da,this)),this.da(!0));this.W();for(a=0;a<this.f.sortColumn.length;a++)this.ga(this.f.sortColumn[a].column,this.f.sortColumn[a].descending);this.G=!1;this.trigger("renderSkeleton")}else this.j&&this.fa(this.p,this.e[0].scrollTop);this.trigger("render");return this},addColumn:function(a,b){if(a&&!this.a.get(a.name)){var d=null;void 0!==b&&(d=this.a.get(b)||this.a.N(b));
var f=this.ca(a);f.c=d?d.c:this.a.la()+1;for(var d=this.a.la(),c=f.c,h;d>=c;d--)(h=this.a.N(d))&&h.c++;this.a.push(f);this.a.Y();this.l=!0;this.d=this.a.w();this.render();this.trigger("addColumn",f.name)}return this},removeColumn:function(a){var b=this.a.indexOf(a);-1<b&&(this.a.splice(b,1),this.a.Y(),this.l=!0,this.d=this.a.w(),this.render(),this.trigger("removeColumn",a));return this},filter:function(a,b,d){if(this.a.get(a)){var f=!!this.g;this.g&&(this.g=null);this.g=this.f.ka(a,b,d);if(f||this.g)this.l=
!0,this.render(),this.trigger("filter",a,b,d)}return this},J:function(){this.g&&(this.g=null,this.g=this.f.ka(this.f.F,this.f.M,this.f.X));return this},setColumnLabel:function(a,b){var d=this.a.get(a);if(d&&(d.label=void 0===b?d.name:b,d.element))for(var f=0;f<d.element[0].firstChild.childNodes.length;f++){var c=d.element[0].firstChild.childNodes[f];if(3===c.nodeType){c.textContent=d.label;break}}return this},moveColumn:function(a,b){var d,f;"string"===typeof a?d=this.a.get(a):"number"===typeof a&&
(d=this.d[a]);"string"===typeof b?f=this.a.get(b):"number"===typeof b&&(f=this.d[b]);if(d&&f&&a!==b){var c=d.c,h=f.c;this.d=this.a.moveColumn(d,f).w();if(this.j)this.l=!0,this.render();else{var e=this.Z.find(">tr>th");f=c<h?h+1:h;e[0].parentNode.insertBefore(e[c],e[f]);for(var g=this.d[c].width-(c==e.length-1?this.t:0)+"px",e=this.d[h].width-(h==e.length-1?this.t:0)+"px",k=this.e[0].childNodes,l=0,n=k.length,m;l<n;l++)m=k[l],1===m.nodeType&&(m.insertBefore(m.childNodes[c],m.childNodes[f]),m.childNodes[h].firstChild.style.width=
e,m.childNodes[c].firstChild.style.width=g)}this.trigger("moveColumn",d.name,c,h)}return this},setColumnWidth:function(a,b){var d=this.a.get(a);if(d){b<this.o&&(b=this.o);var f=d.width;d.width=b;this.U(d.element[0].cellIndex,b);this.trigger("setColumnWidth",d.name,f,b)}return this},sort:function(a,b,d){var f=this.a.get(a);if(f){var c=this.f.sortColumn;c.length&&c[c.length-1].column==a&&(b=void 0===b?!c[c.length-1].descending:b);if(d){for(a=0;a<c.length;a++)if(c[a].column==f.name){a<c.length-1?c.length=
0:c.splice(c.length-1,1);break}if(0<this.n&&c.length>=this.n||c.length>=this.d.length)c.length=0}else c.length=0;c.push({column:f.name,descending:!(void 0===b||!b)});this.f.sortColumn=c;this.aa();for(a=0;a<c.length;a++)this.ga(c[a].column,c[a].descending);this.j||(this.l=!0);this.f.sort(!!this.g);this.J();this.g&&this.render();b=[];for(a=0;a<c.length;a++)b.push({column:c[a].column,descending:c[a].descending});this.trigger("sort",b)}return this},showColumn:function(a){var b=this.a.get(a);b&&!b.visible&&
(this.l=b.visible=!0,this.d=this.a.w(),this.render(),this.trigger("showColumn",a));return this},hideColumn:function(a){var b=this.a.get(a);b&&b.visible&&(b.visible=!1,this.l=!0,this.d=this.a.w(),this.render(),this.trigger("hideColumn",a));return this},setMinColumnWidth:function(a){this.o=a;return this},getMinColumnWidth:function(){return this.o},setSortableColumns:function(a){if(this.n!=a&&(this.n=a,this.i)){a=this.i.find("thead>tr>th");for(var b=0;b<a.length;b++)$(a[0])[0<this.n&&this.d[b].sortable?
"addClass":"removeClass"]("sortable")}return this},getSortableColumns:function(){return this.n},setMovableColumns:function(a){a=!!a;this.s!=a&&(this.s=a);return this},getMovableColumns:function(){return this.s},setResizableColumns:function(a){a=!!a;this.D!=a&&(this.D=a);return this},getResizableColumns:function(){return this.D},setComparatorCallback:function(a){this.C!=a&&(this.C=a);return this},getComparatorCallback:function(){return this.C},addRows:function(a){if(a){this.scrollTop=this.$el.find(".table").scrollTop();
var b=this.f.length;this.G=!0;this.f.add(a);if(this.j)this.J(),0===b&&(this.g||this.f).length&&(this.l=!0),this.render();else if(this.g)b=this.g.length,this.J(),this.g&&this.g.length==b||(this.l=!0,this.render());else{var d,f,c;c=document.createDocumentFragment();for(var h=0,e,g,k,l=this.d.length,m=a.length;h<m;h++){e=a[h];b=document.createElement("tr");for(g=0;g<l;g++)k=this.d[g],d=document.createElement("div"),d.style.width=k.width+"px",d.innerHTML=this.H(e[k.name],k.name),f=document.createElement("td"),
k.cellClasses&&(f.className=k.cellClasses),f.appendChild(d),b.appendChild(f);c.appendChild(b)}this.e[0].appendChild(c);this.V()}this.trigger("addRows",a.length,!1)}return this},setRows:function(a){this.scrollTop=this.$el.find(".table").scrollTop();this.f.reset(a);this.J();this.l=!0;this.render().trigger("addRows",a.length,!0);return this},getUrlForElementContent:function(a){if(a=document.getElementById(a)){a=a.textContent;if("function"===typeof Blob)a=new Blob([a]);else{var b=l.BlobBuilder||l.WebKitBlobBuilder||
l.Ia||l.Ha;if(!b)return null;b=new b;b.append(a);a=b.getBlob()}return(l.URL||l.webkitURL).createObjectURL(a)}return null},isWorkerSupported:function(){return l.Worker instanceof Function},createWebWorker:function(a,b){if(this.isWorkerSupported()){var d=this,f=new Worker(a),c=function(a){d.addRows(a.data.rows,a.data.append)};f.addEventListener("message",c,!1);this.m||(this.m=[]);this.m.push({na:f,ma:c});(b||void 0===b)&&f.postMessage(null);return f}return null},unbindWebWorker:function(a){if(this.m)for(var b=
0;b<this.m.length;b++)this.m[b].na==a&&(a.removeEventListener("message",this.m[b].ma,!1),this.m.splice(b,1),b--);return this},da:function(a){if(a||this.p!==this.e[0].scrollTop){a=parseInt(this.e[0].scrollTop/this.u,10);var b=a-this.q;0>b&&(b=0);this.b.O=this.b.first;this.b.P=this.b.last;this.b.first=b;this.b.last=a+this.r+this.q;a=this.g||this.f;this.b.last>a.length&&(this.b.last=a.length,this.b.first=Math.max(0,this.b.last-this.r-this.q));this.fa(this.p,this.e[0].scrollTop)}},S:function(a){for(var b=
"rtl"==this.i.css("direction"),d=$(this.Ja||a.target).closest("th"),f=d[0],c=d[0].previousSibling;c&&1!=c.nodeType;)c=c.previousSibling;var h=!c;a=(a.originalEvent.pageX||a.originalEvent.clientX)-d.offset().left;if(b){if(!h&&d.outerWidth()-a<=this.K/2)return c.k;if(a<=this.K/2)return f.k}else{if(!h&&a<=this.K/2)return c.k;if(d.outerWidth()-a<=this.K/2)return f.k}return null},za:function(a){if(this.D){var b=this.S(a);a=$(a.target).closest("th")[0];b&&this.a.get(b).resizable?a.style.cursor="e-resize":
a.style.cursor=""}},ya:function(a){$(a.target).closest("th")[0].style.cursor=""},sa:function(a){if(!this.S(a)&&(a=$(a.target).closest("th")[0],this.n)){var b=this.a.get(a.k);b&&b.sortable&&this.sort(a.k,void 0,!0)}},Ba:function(a){var b=this.S(a),d;if(b){d=this.a.get(b);if(!this.D||!d||!d.resizable)return a.preventDefault(),!1;b="rtl"==this.i.css("direction");this.h&&$(this.h).remove();this.h=$("<div></div>").addClass(this.Ea).css({position:"absolute",display:"block","z-index":-1,visibility:"hidden",
width:"2px",background:"#000",opacity:0.7}).appendTo(this.$el);d=d.element;var f=this.h.parent(),c=d.offset(),h=f.offset();8==g&&(c=d.offset());h.left+=parseFloat(f.css("border-left-width"))||0;h.top+=parseFloat(f.css("border-top-width"))||0;c.left-=h.left;c.top-=h.top;c.top-=parseFloat(d.css("border-top-width"))||0;f=this.h.outerWidth();b?c.left-=Math.ceil((parseFloat(d.css("border-left-width"))||0)/2):(c.left+=d.outerWidth(),c.left+=Math.ceil((parseFloat(d.css("border-right-width"))||0)/2));c.left-=
Math.ceil(f/2);b=this.i.height()-(this.i.offset().top-d.offset().top);this.h.css({"z-index":"10",visibility:"visible",left:c.left,top:c.top,height:b})[0].k=d[0].k;try{this.h[0].style.zIndex=""}catch(e){}$(document).on("mousemove",this.T);$(document).on("mouseup",this.I);a.preventDefault()}else this.s?(b=$(a.target).closest("th"),(d=this.a.get(b[0].k))&&d.A?(b[0].style.opacity=0.35,this.R=161061273*Math.random(),a.originalEvent.dataTransfer.setData("text",JSON.stringify({ja:this.R,column:d.name}))):
a.preventDefault()):a.preventDefault()},Aa:function(a){var b=this.a.get(this.h[0].k),d="rtl"==this.i.css("direction"),b=b.element,f=this.h.parent(),c=b.offset(),h=f.offset();h.left+=parseFloat(f.css("border-left-width"))||0;c.left-=h.left;f=this.h.outerWidth();a=a.pageX-h.left;c=c.left;d?(c+=b.outerWidth(),c-=Math.ceil((parseFloat(b.css("border-right-width"))||0)/2),c-=Math.ceil(f/2),c-=this.o,c-=(parseFloat(b.css("padding-left"))||0)+(parseFloat(b.css("padding-right"))||0),a>c&&(a=c)):(c+=Math.ceil((parseFloat(b.css("border-right-width"))||
0)/2),c-=Math.ceil(f/2),c+=this.o,c+=(parseFloat(b.css("padding-left"))||0)+(parseFloat(b.css("padding-right"))||0),a<c&&(a=c));this.h.css("left",a+"px")},xa:function(a){if(this.h){$(document).off("mousemove",this.T);$(document).off("mouseup",this.I);var b=this.a.get(this.h[0].k),d="rtl"==this.i.css("direction"),f=b.element,c=this.h.parent(),h=f.offset(),e=c.offset();e.left+=parseFloat(c.css("border-left-width"))||0;h.left-=e.left;c=this.h.outerWidth();a=a.pageX-e.left;h=e=h.left;h=0;d?(a+=(parseFloat(f.css("padding-left"))||
0)+(parseFloat(f.css("padding-right"))||0),e+=f.outerWidth(),e-=Math.ceil((parseFloat(f.css("border-right-width"))||0)/2),e-=Math.ceil(c/2),h=e-this.o,a>h&&(a=h),h=e-a):(a-=(parseFloat(f.css("padding-left"))||0)+(parseFloat(f.css("padding-right"))||0),e+=Math.ceil((parseFloat(f.css("border-right-width"))||0)/2),e-=Math.ceil(c/2),h=e+this.o,a<h&&(a=h),h=a-e);this.h.remove();this.h=null;this.setColumnWidth(b.name,h)}else a.target.style.opacity=null},ta:function(a){if(this.s){var b=a.originalEvent.dataTransfer.getData("text"),
b=b?JSON.parse(b):null;a=$(a.target).closest("th");(!b||this.R==b.ja&&a.k!==b.column)&&(b=this.a.get(a[0].k))&&(b.A||b!=this.d[0])&&$(a).addClass("drag-over")}},va:function(a){a.preventDefault()},ua:function(a){var b=$(a.target).closest("th");$(b[0].firstChild).has(a.originalEvent.relatedTarget).length||b.removeClass("drag-over")},wa:function(a){a.preventDefault();var b=JSON.parse(a.originalEvent.dataTransfer.getData("text"));a=$(a.target).closest("th");if(this.s&&b.ja==this.R){var b=b.column,d=a[0].k,
f=this.a.get(b),c=this.a.get(d);f&&c&&f.A&&(c.A||c!=this.d[0])&&this.moveColumn(b,d)}$(a).removeClass("drag-over")},aa:function(){if(this.i){var a=this.i.find(">thead>tr>th.sorted"),b=a.find(">div>.sort-arrow");_.forEach(b,_.bind(function(a){var b=a.parentNode.scrollWidth,c=a.scrollWidth+(parseFloat($(a).css("margin-right"))||0)+(parseFloat($(a).css("margin-left"))||0);this.U(a.parentNode.parentNode.cellIndex,b-c);a.parentNode.removeChild(a)},this));a.removeClass("sorted").removeClass("desc")}return this},
ga:function(a,b){var d=document.createElement("span");d.className="sort-arrow";var f=this.a.get(a).element;f.addClass("sorted");b&&f.addClass("desc");f[0].firstChild.insertBefore(d,f[0].firstChild.firstChild);d=d.scrollWidth+(parseFloat($(d).css("margin-right"))||0)+(parseFloat($(d).css("margin-left"))||0);this.U(f[0].cellIndex,f[0].firstChild.scrollWidth+d);return this},U:function(a,b){var d=this.i.find(">thead>tr>th");d[a].firstChild.style.width=b+"px";this.a.get(d[a].k).width=b;a===d.length-1&&
(b-=this.t);b+="px";for(var d=this.e[0].childNodes,f=this.j?1:0,c=d.length-(this.j?1:0),h;f<c;f++)h=d[f],1!=h.nodeType&&(h.childNodes[a].firstChild.style.width=b);this.W();return this},ia:function(){this.i&&this.i.find(">thead>tr>th").off("mousemove").off("mouseleave").off("dragstart").off("selectstart").off("click").find(">div").off("dragenter").off("dragover").off("dragleave").off("drop");return this},Da:function(){var a=0;this.v&&(a=parseFloat(this.v.style.height));this.ia();var b=document.createElement("tr"),
d;n&&(d=function(a){a.preventDefault();this.Ka();return!1});for(var f=0,c,h,e;f<this.d.length;f++)if(c=this.d[f],c.visible&&(e=document.createElement("div"),e.style.width=c.width+"px",e.innerHTML=c.label,h=document.createElement("th"),h.draggable=!0,this.n&&c.sortable&&(h.className="sortable"),h.k=c.name,h.appendChild(e),b.appendChild(h),this.d[f].element=$(h),$(h).on("mousemove",_.bind(this.za,this)).on("mouseleave",_.bind(this.ya,this)).on("dragstart",_.bind(this.Ba,this)).on("click",_.bind(this.sa,
this)),$(e).on("dragenter",_.bind(this.ta,this)).on("dragover",_.bind(this.va,this)).on("dragleave",_.bind(this.ua,this)).on("drop",_.bind(this.wa,this)),n))$(h).on("selectstart",_.bind(d,h));this.i&&this.j&&(this.e.off("scroll"),this.i.remove());"static"==this.$el.css("position")&&this.$el.css("position","relative");this.j||!this.i?(e=document.createDocumentFragment(),c=document.createElement("table"),c.className=this.ha,e.appendChild(c),d=document.createElement("thead"),d.style.display="block",
k&&$(d).css({"float":"rtl"==this.$el.css("direction")?"right":"left",clear:"both"}),c.appendChild(d),f=document.createElement("tbody"),f.style.maxHeight=this.ba+"px",f.style.display="block",f.style.overflowY="auto",f.style.overflowX="hidden",k&&$(f).css({"float":"rtl"==this.$el.css("direction")?"right":"left",clear:"both"}),c.appendChild(f),this.el.appendChild(e),this.i=$(c),this.e=$(f),this.Z=$(d)):(c=this.i[0],f=this.e[0],d=this.Z[0]);if(this.j&&!this.u){var g=document.createElement("tr"),l=document.createElement("td");
l.innerHTML="0";g.appendChild(l);g.style.visibility="hidden";g.style.position="absolute";f.appendChild(g);this.u=$(g).outerHeight();f.removeChild(g);this.r=parseInt(this.ba/this.u,10)}h=this.g||this.f;this.j&&(c=this.r+this.q,c>h.length&&(c=h.length),this.b={first:0,last:c,O:0,P:c});var m=document.createDocumentFragment();this.j&&(g=this.v=document.createElement("tr"),g.style.height=a+"px",m.appendChild(g));var s=0,r;this.j?(c=this.b.first,r=this.b.last):(c=0,r=h.length);for(var p=c,t,q,u=this.d.length,
v=h.length;p<v&&s<r;p++){t=h[p];g=document.createElement("tr");this.j&&g.setAttribute("data-row",p);for(q=0;q<u;q++)c=this.d[q],e=document.createElement("div"),e.style.width=c.width+"px",e.innerHTML=this.H(t[c.name],c.name),l=document.createElement("td"),c.cellClasses&&(l.className=c.cellClasses),l.appendChild(e),g.appendChild(l);m.appendChild(g);s++}this.j&&(g=this.L=document.createElement("tr"),g.style.height=this.u*Math.max(0,h.length-this.r-this.q)-a+"px",m.appendChild(g));try{d.innerHTML=""}catch(w){d.textContent=
""}d.appendChild(b);try{f.innerHTML=""}catch(x){f.textContent=""}f.appendChild(m);this.V(!0);this.j&&this.B();return this},V:function(a){var b=this.e[0].offsetWidth-this.e[0].clientWidth;if(b!=this.t||a)if(this.t=b,0<this.t){a=this.d.length-1;for(var b=this.d[a].width-this.t+"px",d=this.e[0].childNodes,f=this.j?1:0,c=d.length-(this.j?1:0),e;f<c;f++)e=d[f],1==e.nodeType&&(e.childNodes[a].firstChild.style.width=b)}return this},fa:function(a,b){var d,f,c=this.b.last-this.b.first-(this.b.P-this.b.O),
e=this.r+this.q;if(b<a)d=this.b.first,f=this.b.O,this.b.last<=this.b.O&&(d=this.b.first,f=this.b.last),this.ea(f-d-c,!1),this.Q(d,f,!0),this.B();else if(b>a)d=this.b.P,f=this.b.last,this.b.first>=this.b.P&&(d=this.b.first,f=this.b.last),this.ea(f-d-c,!0),this.Q(d,f,!1),this.B();else if(this.G)this.G=!1,f=this.g||this.f,this.b.last<f.length&&this.b.last<e&&(d=this.b.last,f=f.length,f>e&&(f=e),this.Q(d,f,!1),this.b.last=f),this.B();else{this.B();this.Ca(this.b.first);return}this.V();this.W();this.p=
this.e[0].scrollTop},B:function(){var a=((this.g||this.f).length-(this.e[0].childNodes.length-2))*this.u;if(0>a)this.v.style.height=0,this.L.style.height=0;else{var b=this.b.first*this.u;this.v.style.height=b+"px";this.L.style.height=a-b+"px"}},Q:function(a,b,d){if(d)for(d=this.v.nextSibling;d&&1!=d.nodeType;)d=d.nextSibling;else d=this.L;for(;a<b;a++)this.qa(a,d)},qa:function(a,b){var d=document.createElement("tr");d.setAttribute("data-row",a);for(var f=this.g||this.f,c=0,e,g,k;c<this.d.length;c++)e=
this.d[c],g=document.createElement("div"),g.style.width=e.width+"px",g.innerHTML=this.H(f[a][e.name],e.name),k=document.createElement("td"),e.cellClasses&&(k.className=e.cellClasses),k.appendChild(g),d.appendChild(k);this.e[0].insertBefore(d,b)},ea:function(a,b){var d,f;a>this.r+2*this.q&&(a=this.r+2*this.q);var c=this.e[0],e=c.childNodes;f=this.e[0].childNodes.length-2;b?(d=1,f=Math.min(a+1,f+1)):(d=f+1-a,f+=1);for(var g=d;g<f;f--)c.removeChild(e[d])},Ca:function(a){for(var b=this.e[0].getElementsByTagName("tr"),
d=this.g||this.f,f=1,c,e,g,k;f<b.length-1;f++)for(c=b[f],c.setAttribute("data-row",a+f-1),c=$("td>div",c),e=0;e<c.length;e++)g=c[e],k=this.d[e],k=k.name,g.innerHTML=this.H(d[a+f-1][k],k)},W:function(){for(var a=this.i.find(">thead>tr>th"),b=0,d=0;d<a.length;d++)b+=$(a[d])[0].offsetWidth;this.i.width(b);this.$el.width(b)}});l.DGTable=m})(this);
DGTable.oa=function(){function l(){this.initialize.apply(this,arguments)}l.prototype=[];l.prototype.initialize=function(){};l.prototype.get=function(e){for(var g=0,k=this.length;g<k;g++)if(this[g].name==e)return this[g];return null};l.prototype.indexOf=function(e){for(var g=0,k=this.length;g<k;g++)if(this[g].name==e)return g;return-1};l.prototype.N=function(e){for(var g=0,k=this.length;g<k;g++)if(this[g].c==e)return this[g];return null};l.prototype.Y=function(){var e=[],g;for(g=0;g<this.length;g++)e.push(this[g]);
e.sort(function(e,g){return e.c<g.c?-1:e.c>g.c?1:0});for(g=0;g<e.length;g++)e[g].c=g};l.prototype.w=function(){for(var e=[],g=0,k;g<this.length;g++)k=this[g],k.visible&&e.push(k);e.sort(function(e,g){return e.c<g.c?-1:e.c>g.c?1:0});return e};l.prototype.la=function(){for(var e=0,g=0,k;g<this.length;g++)k=this[g],k.c>e&&(e=k.c);return e};l.prototype.moveColumn=function(e,g){if(e&&g){var k=e.c,l=g.c,m;if(k<l)for(k+=1;k<=l;k++)m=this.N(k),m.c--;else for(k-=1;k>=l;k--)m=this.N(k),m.c++;e.c=l}return this};
return l}();
DGTable.pa=function(){function l(){this.initialize.apply(this,arguments)}l.prototype=[];_.extend(l.prototype,Backbone.Events);l.prototype.initialize=function(e){e=e||{};this.M=this.F=null;this.X=!1;this.sortColumn=null==e.sortColumn?[]:e.sortColumn};l.prototype.add=function(e,g){var k,l;if("splice"in e&&"length"in e)if(g)for(k=0,l=e.length;k<l;k++)this.splice(g++,0,e[k]);else for(k=0,l=e.length;k<l;k++)this.push(e[k]);else g?this.splice(g,0,e):this.push(e)};l.prototype.reset=function(e){this.length=0;
e&&this.add(e)};l.prototype.ka=function(e,g,k){if((g=g.toString())&&null!=e){var n=new l({sortColumn:this.sortColumn});this.F=e;this.M=g;this.X=k;e=0;for(g=this.length;e<g;e++)k=this[e],this.Ga(k)&&n.push(k);return n}return this.M=this.F=null};l.prototype.Ga=function(e){if(e&&this.F){e=e[this.F];if(null==e)return!1;e=e.toString();var g=this.M;this.X||(e=e.toUpperCase(),g=g.toUpperCase());return-1!==e.indexOf(g)}return!0};(function(){function e(e,g){var l=g?1:-1,a=g?-1:1;return function(b,d){var f=
b[e],c=d[e];return f<c?l:f>c?a:0}}var g=l.prototype.sort;l.prototype.sort=function(k){if(this.sortColumn.length){var l=[],m,a;for(m=0;m<this.sortColumn.length;m++)a={},this.trigger("requiresComparatorForColumn",a,this.sortColumn[m].column,this.sortColumn[m].descending),l.push(_.bind(a.Fa||e(this.sortColumn[m].column,this.sortColumn[m].descending),this));if(1===l.length)g.call(this,l[0]);else{var b=l.length,d;g.call(this,function(a,c){for(m=0;m<b&&(d=l[m](a,c),0===d);m++);return d})}k||this.trigger("sort")}return this}})();
return l}();
