'use strict';(function(h,e){var g=navigator.userAgent,k=-1!=g.indexOf("MSIE ")?parseFloat(g.substr(g.indexOf("MSIE ")+5)):null,m=k&&10>k,p=k&&10>k,q=Backbone.View.extend({className:"dgtable-wrapper",tagName:"div",VERSION:"0.2.2",initialize:function(a){a=a||{};a.columns=a.columns||[];this.Y=_.bind(this.Ja,this);this.L=_.bind(this.Ga,this);this.$el.on("dragend",this.L);this.n=!0;this.J=!1;this.j=void 0===a.virtualTable?!0:!!a.virtualTable;this.s=a.rowsBufferSize||10;this.l=Math.max(a.minColumnWidth||
35,0);this.N=a.resizeAreaWidth||8;this.H=void 0===a.resizableColumns?!0:!!a.resizableColumns;this.u=void 0===a.movableColumns?!0:!!a.movableColumns;this.q=void 0===a.sortableColumns?1:parseInt(a.sortableColumns,10)||1;this.za=void 0===a.cellClasses?"":a.cellClasses;this.Pa=void 0===a.resizerClassName?"dgtable-resize":a.resizerClassName;this.aa=void 0===a.tableClassName?"dgtable":a.tableClassName;this.F=void 0===a.comparatorCallback?null:a.comparatorCallback;this.ga=void 0===a.autoWidth?!1:!!a.autoWidth;
this.Ma=void 0===a.relativeWidthGrowsToFillWidth?!0:!!a.relativeWidthGrowsToFillWidth;this.Na=void 0===a.relativeWidthShrinksToFillWidth?!1:!!a.relativeWidthShrinksToFillWidth;this.K=a.formatter||function(a){return a};var b,d,f,c,l,e=new q.wa;b=0;c;d;for(l=0;b<a.columns.length;b++)d=a.columns[b],c=this.ka(d),void 0!==d.d?(d.d>l&&(l=d.d+1),c.d=d.d):c.d=l++,e.push(c);e.ea();this.a=e;this.b=e.B();if(void 0===a.sortColumn)a.sortColumn=null;else if("string"==typeof a.sortColumn)this.a.get(a.sortColumn)?
a.sortColumn=[{column:a.sortColumn,descending:!1}]:a.sortColumn=null;else if(a.sortColumn instanceof Array){l=[];b=0;d=a.sortColumn.length;f;for(c;b<d&&(f=a.sortColumn[b],f=void 0!==f.column?f:{column:f,descending:!1},(c=this.a.get(f.column))&&!_.contains(l,c.name)&&l.push(c.name),l.length!=this.q&&l.length!=this.b.length);b++);a.sortColumn=l}else"object"==typeof a.sortColumn?this.a.get(a.sortColumn.column)||(a.sortColumn=null):a.sortColumn=null;this.f=new q.xa({sortColumn:a.sortColumn,columns:this.columns});
this.listenTo(this.f,"sort",this.render).listenTo(this.f,"requiresComparatorForColumn",_.bind(function(a,b,d){this.F&&(a.Qa=this.F(b,d))},this));this.h=null;this.ja=a.height;this.r=0},ma:function(a){var b=parseFloat(a),d=n.AUTO;0<b&&(a==b+"%"?(d=n.RELATIVE,b/=100):0<b&&1>b?d=n.RELATIVE:(b<this.l&&(b=this.l),d=n.ABSOLUTE));return{width:b,mode:d}},ka:function(a){var b=this.ma(a.width);return{name:a.name,label:void 0===a.label?a.name:a.label,width:b.width,o:b.mode,resizable:void 0===a.resizable?!0:a.resizable,
sortable:void 0===a.sortable?!0:a.sortable,C:void 0===a.C?!0:a.C,visible:void 0===a.visible?!0:a.visible,cellClasses:void 0===a.cellClasses?this.za:a.cellClasses}},close:function(){this.i&&(this.i.remove(),this.i=null);this.P=this.A=null;this.qa();this.Y=this.L=null;this.e.off("scroll");this.$el.off("dragend");this.remove();this.unbind();if(this.p){for(var a=0,b;a<this.p.length;a++)b=this.p[a],b.va.removeEventListener("message",b.ua,!1);this.p.length=0}},render:function(){if(!0===this.n){this.n=!1;
this.e&&(this.r=this.e[0].scrollTop);this.ga&&this.ia();this.fa(!0,!1).Oa();var a=this.e[0].scrollHeight-this.e.height();this.r>a&&(this.r=a);this.e[0].scrollTop=this.r;this.j&&(this.e.on("scroll",_.bind(this.la,this)),this.la(!0));this.ca();for(a=0;a<this.f.sortColumn.length;a++)this.pa(this.f.sortColumn[a].column,this.f.sortColumn[a].descending);this.J=!1;this.trigger("renderSkeleton")}else this.j&&this.oa(this.r,this.e[0].scrollTop);this.trigger("render");return this},addColumn:function(a,b){if(a&&
!this.a.get(a.name)){var d=null;void 0!==b&&(d=this.a.get(b)||this.a.R(b));var f=this.ka(a);f.d=d?d.d:this.a.ta()+1;for(var d=this.a.ta(),c=f.d,l;d>=c;d--)(l=this.a.R(d))&&l.d++;this.a.push(f);this.a.ea();this.n=!0;this.b=this.a.B();this.render();this.trigger("addColumn",f.name)}return this},removeColumn:function(a){var b=this.a.indexOf(a);-1<b&&(this.a.splice(b,1),this.a.ea(),this.n=!0,this.b=this.a.B(),this.render(),this.trigger("removeColumn",a));return this},filter:function(a,b,d){if(this.a.get(a)){var f=
!!this.h;this.h&&(this.h=null);this.h=this.f.sa(a,b,d);if(f||this.h)this.n=!0,this.render(),this.trigger("filter",a,b,d)}return this},M:function(){this.h&&(this.h=null,this.h=this.f.sa(this.f.I,this.f.Q,this.f.da));return this},setColumnLabel:function(a,b){var d=this.a.get(a);if(d&&(d.label=void 0===b?d.name:b,d.element))for(var f=0;f<d.element[0].firstChild.childNodes.length;f++){var c=d.element[0].firstChild.childNodes[f];if(3===c.nodeType){c.textContent=d.label;break}}return this},moveColumn:function(a,
b){var d,f;"string"===typeof a?d=this.a.get(a):"number"===typeof a&&(d=this.b[a]);"string"===typeof b?f=this.a.get(b):"number"===typeof b&&(f=this.b[b]);if(d&&f&&a!==b){var c=d.d,l=f.d;this.b=this.a.moveColumn(d,f).B();if(this.j)this.n=!0,this.render();else{var e=this.U.find(">tr>th");f=c<l?l+1:l;e[0].parentNode.insertBefore(e[c],e[f]);for(var x=this.b[c].k-(c==e.length-1?this.v:0)+"px",e=this.b[l].k-(l==e.length-1?this.v:0)+"px",g=this.e[0].childNodes,k=0,h=g.length,m;k<h;k++)m=g[k],1===m.nodeType&&
(m.insertBefore(m.childNodes[c],m.childNodes[f]),m.childNodes[l].firstChild.style.width=e,m.childNodes[c].firstChild.style.width=x)}this.trigger("moveColumn",d.name,c,l)}return this},sort:function(a,b,d){var f=this.a.get(a);if(f){var c=this.f.sortColumn;c.length&&c[c.length-1].column==a&&(b=void 0===b?!c[c.length-1].descending:b);if(d){for(a=0;a<c.length;a++)if(c[a].column==f.name){a<c.length-1?c.length=0:c.splice(c.length-1,1);break}if(0<this.q&&c.length>=this.q||c.length>=this.b.length)c.length=
0}else c.length=0;c.push({column:f.name,descending:!(void 0===b||!b)});this.f.sortColumn=c;this.ia();for(a=0;a<c.length;a++)this.pa(c[a].column,c[a].descending);this.j||(this.n=!0);this.f.sort(!!this.h);this.M();this.h&&this.render();b=[];for(a=0;a<c.length;a++)b.push({column:c[a].column,descending:c[a].descending});this.trigger("sort",b)}return this},showColumn:function(a){var b=this.a.get(a);b&&!b.visible&&(this.n=b.visible=!0,this.b=this.a.B(),this.render(),this.trigger("showColumn",a));return this},
hideColumn:function(a){var b=this.a.get(a);b&&b.visible&&(b.visible=!1,this.n=!0,this.b=this.a.B(),this.render(),this.trigger("hideColumn",a));return this},setMinColumnWidth:function(a){a=Math.max(a,0);this.l!=a&&(this.l=a,this.fa(!0));return this},getMinColumnWidth:function(){return this.l},setSortableColumns:function(a){if(this.q!=a&&(this.q=a,this.g)){a=this.g.find("thead>tr>th");for(var b=0;b<a.length;b++)e(a[0])[0<this.q&&this.b[b].sortable?"addClass":"removeClass"]("sortable")}return this},
getSortableColumns:function(){return this.q},setMovableColumns:function(a){a=!!a;this.u!=a&&(this.u=a);return this},getMovableColumns:function(){return this.u},setResizableColumns:function(a){a=!!a;this.H!=a&&(this.H=a);return this},getResizableColumns:function(){return this.H},setComparatorCallback:function(a){this.F!=a&&(this.F=a);return this},setColumnWidth:function(a,b){var d=this.ma(b),f=this.a.get(a);if(f){var c=this.O(f);f.width=d.width;f.o=d.mode;d=this.O(f);c!=d&&this.fa(!0);this.trigger("setColumnWidth",
f.name,c,d)}return this},getColumnWidth:function(a){return(a=this.a.get(a))?this.O(a):null},getColumnWidths:function(){for(var a={},b=0;b<this.a;b++)a[this.a[b].name]=this.O(this.a[b]);return a},getComparatorCallback:function(){return this.F},G:function(a){return(parseFloat(e.css(a,"padding-left"))||0)+(parseFloat(e.css(a,"padding-right"))||0)},Aa:function(a){return(parseFloat(e.css(a,"border-left"))||0)+(parseFloat(e.css(a,"border-right"))||0)},ha:function(){var a=this.$el.width(),b,d,f,c;if(this.g)b=
this.g,d=this.U;else{b=f=e("<table></table>").css({position:"absolute",top:"-9999px",visibility:"hidden"}).addClass(this.aa);d=c=e("<thead></thead>");for(var l=e("<tr></tr>"),r=0;r<this.b.length;r++)l.append(e("<th><div></div></th>"));f.append(c.append(l))}c=window.getComputedStyle?function(a,b){var d=window.getComputedStyle(a,null);return d?d.getPropertyValue(b):null}:function(a,b){var d=a.currentStyle;return d?d[b]:null};a-=this.Aa(b[0]);b=d.find(">tr>th");for(var r=0,g,k;r<b.length;r++)g=e(b[r].firstChild),
l=e(b[r]),d=Math.max(parseFloat(l.css("border-left-width"))||0,0<r?parseFloat(e(b[r-1]).css("border-right-width"))||0:0),k="border-box"===l.css("boxSizing"),a-=d+(g.outerWidth()-g.width())+((parseFloat(c(l[0],"width"))||0)+(k?0:this.G(l[0]))-g.outerWidth());a-=parseFloat(e(b[b.length-1]).css("border-right-width"))||0;f&&f.remove();return a},fa:function(){function a(a){a=e("<table><thead><tr><th>"+a+"</th></tr></thead></table>").css({position:"absolute",top:"-9999px",visibility:"hidden"}).addClass(this.aa);
var b=a.find(">thead>tr>th");b.css({position:"absolute","float":"left","white-space":"nowrap",visibility:"hidden"});a.appendTo(document.body);b=b.width();a.remove();return b}var b=null;return function(d,f){var c=this.ha(),l=c,e=0;if(l!=b||d){b=c;var g,k=[],m,h;for(m=c=0;m<this.b.length;m++)h=this.b[m],h.o==n.ABSOLUTE?(g=h.width,g<this.l&&(g=this.l),l-=g,g!==h.k&&(h.k=g,k.push(m))):h.o==n.AUTO?(g=_.bind(a,this)(h.label)+20,g<this.l&&(g=this.l),l-=g,g!==h.k&&(h.k=g,k.push(m))):h.o==n.RELATIVE&&(c+=
h.width,e++);if(e&&(1>c&&this.Ma||1<c&&this.Na))for(m=0;m<this.b.length;m++)h=this.b[m],h.o==n.RELATIVE&&(h.width/=c);c=l;for(m=0;m<this.b.length;m++)h=this.b[m],h.o==n.RELATIVE&&(g=Math.floor(c*h.width),g<this.l&&(g=this.l),l-=g,e--,0===e&&1===l&&g++,g!==h.k&&(h.k=g,k.push(m)));if(f||void 0===f)for(m=0;m<k.length;m++)this.Z(k[m])}return this}}(),addRows:function(a){if(a){this.scrollTop=this.$el.find(".table").scrollTop();var b=this.f.length;this.J=!0;this.f.add(a);if(this.j)this.M(),0===b&&(this.h||
this.f).length&&(this.n=!0),this.render();else if(this.h)b=this.h.length,this.M(),this.h&&this.h.length==b||(this.n=!0,this.render());else{var d,f,c;c=document.createDocumentFragment();for(var e=0,g,k,m,h=this.b.length,p=a.length;e<p;e++){g=a[e];b=document.createElement("tr");for(k=0;k<h;k++)m=this.b[k],d=document.createElement("div"),d.style.width=m.k+"px",d.innerHTML=this.K(g[m.name],m.name),f=document.createElement("td"),m.cellClasses&&(f.className=m.cellClasses),f.appendChild(d),b.appendChild(f);
c.appendChild(b)}this.e[0].appendChild(c);this.ba()}this.trigger("addRows",a.length,!1)}return this},setRows:function(a){this.scrollTop=this.$el.find(".table").scrollTop();this.f.reset(a);this.M();this.n=!0;this.render().trigger("addRows",a.length,!0);return this},getUrlForElementContent:function(a){if(a=document.getElementById(a)){a=a.textContent;if("function"===typeof Blob)a=new Blob([a]);else{var b=h.BlobBuilder||h.WebKitBlobBuilder||h.Ta||h.Sa;if(!b)return null;b=new b;b.append(a);a=b.getBlob()}return(h.URL||
h.webkitURL).createObjectURL(a)}return null},isWorkerSupported:function(){return h.Worker instanceof Function},createWebWorker:function(a,b){if(this.isWorkerSupported()){var d=this,f=new Worker(a),c=function(a){d.addRows(a.data.rows,a.data.append)};f.addEventListener("message",c,!1);this.p||(this.p=[]);this.p.push({va:f,ua:c});(b||void 0===b)&&f.postMessage(null);return f}return null},unbindWebWorker:function(a){if(this.p)for(var b=0;b<this.p.length;b++)this.p[b].va==a&&(a.removeEventListener("message",
this.p[b].ua,!1),this.p.splice(b,1),b--);return this},la:function(a){if(!0===a||this.r!==this.e[0].scrollTop){a=parseInt(this.e[0].scrollTop/this.w,10);var b=a-this.s;0>b&&(b=0);this.c.S=this.c.first;this.c.T=this.c.last;this.c.first=b;this.c.last=a+this.t+this.s;a=this.h||this.f;this.c.last>a.length&&(this.c.last=a.length,this.c.first=Math.max(0,this.c.last-this.t-this.s));this.oa(this.r,this.e[0].scrollTop)}},X:function(a){for(var b="rtl"==this.g.css("direction"),d=e(this.Ua||a.target).closest("th"),
f=d[0],c=d[0].previousSibling;c&&1!=c.nodeType;)c=c.previousSibling;var l=!c;a=(a.originalEvent.pageX||a.originalEvent.clientX)-d.offset().left;if(b){if(!l&&d.outerWidth()-a<=this.N/2)return c.m;if(a<=this.N/2)return f.m}else{if(!l&&a<=this.N/2)return c.m;if(d.outerWidth()-a<=this.N/2)return f.m}return null},Ia:function(a){if(this.H){var b=this.X(a);a=e(a.target).closest("th")[0];b&&this.a.get(b).resizable?a.style.cursor="e-resize":a.style.cursor=""}},Ha:function(a){e(a.target).closest("th")[0].style.cursor=
""},Ba:function(a){if(!this.X(a)&&(a=e(a.target).closest("th")[0],this.q)){var b=this.a.get(a.m);b&&b.sortable&&this.sort(a.m,void 0,!0)}},Ka:function(a){var b=this.X(a),d;if(b){d=this.a.get(b);if(!this.H||!d||!d.resizable)return a.preventDefault(),!1;b="rtl"==this.g.css("direction");this.i&&e(this.i).remove();this.i=e("<div></div>").addClass(this.Pa).css({position:"absolute",display:"block","z-index":-1,visibility:"hidden",width:"2px",background:"#000",opacity:0.7}).appendTo(this.$el);d=d.element;
var f=this.i.parent(),c=d.offset(),l=f.offset();8==k&&(c=d.offset());l.left+=parseFloat(f.css("border-left-width"))||0;l.top+=parseFloat(f.css("border-top-width"))||0;c.left-=l.left;c.top-=l.top;c.top-=parseFloat(d.css("border-top-width"))||0;f=this.i.outerWidth();b?c.left-=Math.ceil((parseFloat(d.css("border-left-width"))||0)/2):(c.left+=d.outerWidth(),c.left+=Math.ceil((parseFloat(d.css("border-right-width"))||0)/2));c.left-=Math.ceil(f/2);b=this.g.height()-(this.g.offset().top-d.offset().top);
this.i.css({"z-index":"10",visibility:"visible",left:c.left,top:c.top,height:b})[0].m=d[0].m;try{this.i[0].style.zIndex=""}catch(g){}e(document).on("mousemove",this.Y);e(document).on("mouseup",this.L);a.preventDefault()}else this.u?(b=e(a.target).closest("th"),(d=this.a.get(b[0].m))&&d.C?(b[0].style.opacity=0.35,this.W=161061273*Math.random(),a.originalEvent.dataTransfer.setData("text",JSON.stringify({ra:this.W,column:d.name}))):a.preventDefault()):a.preventDefault()},Ja:function(a){var b=this.a.get(this.i[0].m),
d="rtl"==this.g.css("direction"),b=b.element,f=this.i.parent(),c=b.offset(),e=f.offset();e.left+=parseFloat(f.css("border-left-width"))||0;c.left-=e.left;f=this.i.outerWidth();a=a.pageX-e.left;c=c.left;d?(c+=b.outerWidth(),c-=Math.ceil((parseFloat(b.css("border-right-width"))||0)/2),c-=Math.ceil(f/2),c-=this.l,c-=this.G(b[0]),a>c&&(a=c)):(c+=Math.ceil((parseFloat(b.css("border-right-width"))||0)/2),c-=Math.ceil(f/2),c+=this.l,c+=this.G(b[0]),a<c&&(a=c));this.i.css("left",a+"px")},Ga:function(a){if(this.i){e(document).off("mousemove",
this.Y);e(document).off("mouseup",this.L);var b=this.a.get(this.i[0].m),d="rtl"==this.g.css("direction"),f=b.element,c=this.i.parent(),l=f.offset(),g=c.offset();g.left+=parseFloat(c.css("border-left-width"))||0;l.left-=g.left;c=this.i.outerWidth();a=a.pageX-g.left;l=g=l.left;l=0;d?(a+=this.G(f[0]),g+=f.outerWidth(),g-=Math.ceil((parseFloat(f.css("border-right-width"))||0)/2),g-=Math.ceil(c/2),l=g-this.l,a>l&&(a=l),l=g-a):(a-=this.G(f[0]),g+=Math.ceil((parseFloat(f.css("border-right-width"))||0)/2),
g-=Math.ceil(c/2),l=g+this.l,a<l&&(a=l),l=a-g);this.i.remove();this.i=null;d=l;if(b.o==n.RELATIVE){d=this.ha();for(f=0;f<this.b.length;f++)c=this.b[f],c.o!=n.RELATIVE&&(d-=c.k);d=l/d*100;d+="%"}this.setColumnWidth(b.name,d)}else a.target.style.opacity=null},Ca:function(a){if(this.u){var b=a.originalEvent.dataTransfer.getData("text"),b=b?JSON.parse(b):null;a=e(a.target).closest("th");(!b||this.W==b.ra&&a.m!==b.column)&&(b=this.a.get(a[0].m))&&(b.C||b!=this.b[0])&&e(a).addClass("drag-over")}},Ea:function(a){a.preventDefault()},
Da:function(a){var b=e(a.target).closest("th");e(b[0].firstChild).has(a.originalEvent.relatedTarget).length||b.removeClass("drag-over")},Fa:function(a){a.preventDefault();var b=JSON.parse(a.originalEvent.dataTransfer.getData("text"));a=e(a.target).closest("th");if(this.u&&b.ra==this.W){var b=b.column,d=a[0].m,f=this.a.get(b),c=this.a.get(d);f&&c&&f.C&&(c.C||c!=this.b[0])&&this.moveColumn(b,d)}e(a).removeClass("drag-over")},ia:function(){if(this.g){var a=this.g.find(">thead>tr>th.sorted"),b=a.find(">div>.sort-arrow");
_.forEach(b,_.bind(function(a){var b=this.a.get(a.parentNode.parentNode.m);if(b){if(b.o!=n.RELATIVE){var c=a.scrollWidth+(parseFloat(e(a).css("margin-right"))||0)+(parseFloat(e(a).css("margin-left"))||0);b.k=Math.max(b.k-c,this.l);this.Z(a.parentNode.parentNode.cellIndex)}a.parentNode.removeChild(a)}},this));a.removeClass("sorted").removeClass("desc")}return this},pa:function(a,b){var d=this.a.get(a),f=document.createElement("span");f.className="sort-arrow";d.element.addClass(b?"sorted desc":"sorted");
d.element[0].firstChild.insertBefore(f,d.element[0].firstChild.firstChild);d.o!=n.RELATIVE&&(f=f.scrollWidth+(parseFloat(e(f).css("margin-right"))||0)+(parseFloat(e(f).css("margin-left"))||0),d.k=Math.max(d.k+f,this.l),this.Z(d.element[0].cellIndex));return this},Z:function(a){var b=this.g.find(">thead>tr>th"),d=this.a.get(b[a].m);if(d){d=d.k;b[a].firstChild.style.width=d+"px";a===b.length-1&&(d-=this.v);for(var d=d+"px",b=this.e[0].childNodes,f=this.j?1:0,c=b.length-(this.j?1:0),e;f<c;f++)e=b[f],
1===e.nodeType&&(e.childNodes[a].firstChild.style.width=d);this.ca()}return this},qa:function(){this.g&&this.g.find(">thead>tr>th").off("mousemove").off("mouseleave").off("dragstart").off("selectstart").off("click").find(">div").off("dragenter").off("dragover").off("dragleave").off("drop");return this},Oa:function(){var a=0;this.A&&(a=parseFloat(this.A.style.height));this.qa();var b=document.createElement("tr"),d;p&&(d=function(a){a.preventDefault();this.Va();return!1});for(var f=0,c,g,k;f<this.b.length;f++)if(c=
this.b[f],c.visible&&(k=document.createElement("div"),k.style.width=c.k+"px",k.innerHTML=c.label,g=document.createElement("th"),g.draggable=!0,this.q&&c.sortable&&(g.className="sortable"),g.m=c.name,g.appendChild(k),b.appendChild(g),this.b[f].element=e(g),e(g).on("mousemove",_.bind(this.Ia,this)).on("mouseleave",_.bind(this.Ha,this)).on("dragstart",_.bind(this.Ka,this)).on("click",_.bind(this.Ba,this)),e(k).on("dragenter",_.bind(this.Ca,this)).on("dragover",_.bind(this.Ea,this)).on("dragleave",_.bind(this.Da,
this)).on("drop",_.bind(this.Fa,this)),p))e(g).on("selectstart",_.bind(d,g));this.g&&this.j&&(this.e.off("scroll"),this.g.remove());"static"==this.$el.css("position")&&this.$el.css("position","relative");this.j||!this.g?(k=document.createDocumentFragment(),c=document.createElement("table"),c.className=this.aa,k.appendChild(c),d=document.createElement("thead"),d.style.display="block",m&&e(d).css({"float":"rtl"==this.$el.css("direction")?"right":"left",clear:"both"}),c.appendChild(d),f=document.createElement("tbody"),
f.style.maxHeight=this.ja+"px",f.style.display="block",f.style.overflowY="auto",f.style.overflowX="hidden",m&&e(f).css({"float":"rtl"==this.$el.css("direction")?"right":"left",clear:"both"}),c.appendChild(f),this.el.appendChild(k),this.g=e(c),this.e=e(f),this.U=e(d)):(c=this.g[0],f=this.e[0],d=this.U[0]);if(this.j&&!this.w){var h=document.createElement("tr"),n=document.createElement("td");n.innerHTML="0";h.appendChild(n);h.style.visibility="hidden";h.style.position="absolute";f.appendChild(h);this.w=
e(h).outerHeight();f.removeChild(h);this.t=parseInt(this.ja/this.w,10)}g=this.h||this.f;this.j&&(c=this.t+this.s,c>g.length&&(c=g.length),this.c={first:0,last:c,S:0,T:c});var q=document.createDocumentFragment();this.j&&(h=this.A=document.createElement("tr"),h.style.height=a+"px",q.appendChild(h));var v=0,u;this.j?(c=this.c.first,u=this.c.last):(c=0,u=g.length);for(var s=c,w,t,y=this.b.length,z=g.length;s<z&&v<u;s++){w=g[s];h=document.createElement("tr");this.j&&h.setAttribute("data-row",s);for(t=
0;t<y;t++)c=this.b[t],k=document.createElement("div"),k.style.width=c.k+"px",k.innerHTML=this.K(w[c.name],c.name),n=document.createElement("td"),c.cellClasses&&(n.className=c.cellClasses),n.appendChild(k),h.appendChild(n);q.appendChild(h);v++}this.j&&(h=this.P=document.createElement("tr"),h.style.height=this.w*Math.max(0,g.length-this.t-this.s)-a+"px",q.appendChild(h));try{d.innerHTML=""}catch(A){d.textContent=""}d.appendChild(b);try{f.innerHTML=""}catch(B){f.textContent=""}f.appendChild(q);this.ba(!0);
this.j&&this.D();return this},ba:function(a){var b=this.e[0].offsetWidth-this.e[0].clientWidth;if(b!=this.v||a)if(this.v=b,0<this.v){a=this.b.length-1;for(var b=this.b[a].k-this.v+"px",d=this.e[0].childNodes,f=this.j?1:0,c=d.length-(this.j?1:0),e;f<c;f++)e=d[f],1===e.nodeType&&(e.childNodes[a].firstChild.style.width=b)}return this},oa:function(a,b){var d,f,c=this.c.last-this.c.first-(this.c.T-this.c.S),e=this.t+this.s;if(b<a)d=this.c.first,f=this.c.S,this.c.last<=this.c.S&&(d=this.c.first,f=this.c.last),
this.na(f-d-c,!1),this.V(d,f,!0),this.D();else if(b>a)d=this.c.T,f=this.c.last,this.c.first>=this.c.T&&(d=this.c.first,f=this.c.last),this.na(f-d-c,!0),this.V(d,f,!1),this.D();else if(this.J)this.J=!1,f=this.h||this.f,this.c.last<f.length&&this.c.last<e&&(d=this.c.last,f=f.length,f>e&&(f=e),this.V(d,f,!1),this.c.last=f),this.D();else{this.D();this.La(this.c.first);return}this.ba();this.ca();this.r=this.e[0].scrollTop},D:function(){var a=((this.h||this.f).length-(this.e[0].childNodes.length-2))*this.w;
if(0>a)this.A.style.height=0,this.P.style.height=0;else{var b=this.c.first*this.w;this.A.style.height=b+"px";this.P.style.height=a-b+"px"}},V:function(a,b,d){if(d)for(d=this.A.nextSibling;d&&1!=d.nodeType;)d=d.nextSibling;else d=this.P;for(;a<b;a++)this.ya(a,d)},ya:function(a,b){var d=document.createElement("tr");d.setAttribute("data-row",a);for(var f=this.h||this.f,c=0,e,g,k;c<this.b.length;c++)e=this.b[c],g=document.createElement("div"),g.style.width=e.k+"px",g.innerHTML=this.K(f[a][e.name],e.name),
k=document.createElement("td"),e.cellClasses&&(k.className=e.cellClasses),k.appendChild(g),d.appendChild(k);this.e[0].insertBefore(d,b)},na:function(a,b){var d,f;a>this.t+2*this.s&&(a=this.t+2*this.s);var c=this.e[0],e=c.childNodes;f=this.e[0].childNodes.length-2;b?(d=1,f=Math.min(a+1,f+1)):(d=f+1-a,f+=1);for(var g=d;g<f;f--)c.removeChild(e[d])},La:function(a){for(var b=this.e[0].getElementsByTagName("tr"),d=this.h||this.f,f=1,c,g,k,h;f<b.length-1;f++)for(c=b[f],c.setAttribute("data-row",a+f-1),c=
e("td>div",c),g=0;g<c.length;g++)k=c[g],h=this.b[g],h=h.name,k.innerHTML=this.K(d[a+f-1][h],h)},ca:function(){if(this.ga){for(var a=this.g.find(">thead>tr>th"),b=0,d=0;d<a.length;d++)b+=e(a[d])[0].offsetWidth;this.g.width(b);this.$el.width(b)}return this},O:function(a){return a.o==n.AUTO?"auto":a.o==n.RELATIVE?100*a.width+"%":a.width}}),n={AUTO:0,ABSOLUTE:1,RELATIVE:2};h.DGTable=q})(this,jQuery);
DGTable.wa=function(){function h(){this.initialize.apply(this,arguments)}h.prototype=[];h.prototype.initialize=function(){};h.prototype.get=function(e){for(var g=0,k=this.length;g<k;g++)if(this[g].name==e)return this[g];return null};h.prototype.indexOf=function(e){for(var g=0,k=this.length;g<k;g++)if(this[g].name==e)return g;return-1};h.prototype.R=function(e){for(var g=0,k=this.length;g<k;g++)if(this[g].d==e)return this[g];return null};h.prototype.ea=function(){var e=[],g;for(g=0;g<this.length;g++)e.push(this[g]);
e.sort(function(e,g){return e.d<g.d?-1:e.d>g.d?1:0});for(g=0;g<e.length;g++)e[g].d=g};h.prototype.B=function(){for(var e=[],g=0,k;g<this.length;g++)k=this[g],k.visible&&e.push(k);e.sort(function(e,g){return e.d<g.d?-1:e.d>g.d?1:0});return e};h.prototype.ta=function(){for(var e=0,g=0,k;g<this.length;g++)k=this[g],k.d>e&&(e=k.d);return e};h.prototype.moveColumn=function(e,g){if(e&&g){var k=e.d,h=g.d,p;if(k<h)for(k+=1;k<=h;k++)p=this.R(k),p.d--;else for(k-=1;k>=h;k--)p=this.R(k),p.d++;e.d=h}return this};
return h}();
DGTable.xa=function(){function h(){this.initialize.apply(this,arguments)}h.prototype=[];_.extend(h.prototype,Backbone.Events);h.prototype.initialize=function(e){e=e||{};this.Q=this.I=null;this.da=!1;this.sortColumn=null==e.sortColumn?[]:e.sortColumn};h.prototype.add=function(e,g){var k,h;if("splice"in e&&"length"in e)if(g)for(k=0,h=e.length;k<h;k++)this.splice(g++,0,e[k]);else for(k=0,h=e.length;k<h;k++)this.push(e[k]);else g?this.splice(g,0,e):this.push(e)};h.prototype.reset=function(e){this.length=0;
e&&this.add(e)};h.prototype.sa=function(e,g,k){if((g=g.toString())&&null!=e){var m=new h({sortColumn:this.sortColumn});this.I=e;this.Q=g;this.da=k;e=0;for(g=this.length;e<g;e++)k=this[e],this.Ra(k)&&m.push(k);return m}return this.Q=this.I=null};h.prototype.Ra=function(e){if(e&&this.I){e=e[this.I];if(null==e)return!1;e=e.toString();var g=this.Q;this.da||(e=e.toUpperCase(),g=g.toUpperCase());return-1!==e.indexOf(g)}return!0};(function(){function e(e,g){var h=g?1:-1,q=g?-1:1;return function(g,a){var b=
g[e],d=a[e];return b<d?h:b>d?q:0}}var g=h.prototype.sort;h.prototype.sort=function(h){if(this.sortColumn.length){var m=[],p,q;for(p=0;p<this.sortColumn.length;p++)q={},this.trigger("requiresComparatorForColumn",q,this.sortColumn[p].column,this.sortColumn[p].descending),m.push(_.bind(q.Qa||e(this.sortColumn[p].column,this.sortColumn[p].descending),this));if(1===m.length)g.call(this,m[0]);else{var n=m.length,a;g.call(this,function(b,d){for(p=0;p<n&&(a=m[p](b,d),0===a);p++);return a})}h||this.trigger("sort")}return this}})();
return h}();
//# sourceMappingURL=DGTable.min.js.map