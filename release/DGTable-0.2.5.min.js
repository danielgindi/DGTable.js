'use strict';(function(k,c){var f=navigator.userAgent,h=-1!=f.indexOf("MSIE ")?parseFloat(f.substr(f.indexOf("MSIE ")+5)):null,t=h&&10>h,s=h&&10>h,r=_.bind(document.createElement,document),u=Backbone.View.extend({className:"dgtable-wrapper",tagName:"div",VERSION:"0.2.5",initialize:function(a){function b(a){a=a||event;a=a.toElement||a.relatedTarget;a==this||jQuery.contains(this,a)||this.__previewEl&&(a==this.__previewEl||jQuery.contains(this.__previewEl,a))||f.Oa.call(f,this)}function d(a){a=a||event;
a=a.fromElement||a.relatedTarget;a==this||jQuery.contains(this,a)||this.__previewEl&&(a==this.__previewEl||jQuery.contains(this.__previewEl,a))||f.Pa.call(f,this)}a=a||{};a.columns=a.columns||[];this.va=_.bind(this.$a,this);this.fa=_.bind(this.Xa,this);this.wa=_.bind(this.bb,this);this.$el.on("dragend",this.fa);this.m=!0;this.R=!1;this.i=void 0===a.virtualTable?!0:!!a.virtualTable;this.q=a.rowsBufferSize||10;this.l=Math.max(a.minColumnWidth||35,0);this.T=a.resizeAreaWidth||8;this.J=void 0===a.resizableColumns?
!0:!!a.resizableColumns;this.A=void 0===a.movableColumns?!0:!!a.movableColumns;this.r=void 0===a.sortableColumns?1:parseInt(a.sortableColumns,10)||1;this.ba=void 0===a.adjustColumnWidthForSortArrow?!0:!!a.adjustColumnWidthForSortArrow;this.Na=void 0===a.cellClasses?"":a.cellClasses;this.ib=void 0===a.resizerClassName?"dgtable-resize":a.resizerClassName;this.ga=void 0===a.tableClassName?"dgtable":a.tableClassName;this.P=void 0===a.allowCellPreview?!0:a.allowCellPreview;this.Qa=void 0===a.cellPreviewClassName?
"dgtable-cell-preview":a.cellPreviewClassName;this.pa=void 0===a.cellPreviewCreateCallback?null:a.cellPreviewCreateCallback;this.qa=void 0===a.cellPreviewDestroyCallback?null:a.cellPreviewDestroyCallback;this.Q=void 0===a.comparatorCallback?null:a.comparatorCallback;this.X=void 0===a.width?u.Width.NONE:a.width;this.eb=void 0===a.relativeWidthGrowsToFillWidth?!0:!!a.relativeWidthGrowsToFillWidth;this.fb=void 0===a.relativeWidthShrinksToFillWidth?!1:!!a.relativeWidthShrinksToFillWidth;this.F=a.formatter||
function(a){return a};var g,e,c,p,l=new u.Ka;for(p=g=0;g<a.columns.length;g++)e=a.columns[g],c=this.ua(e),void 0!==e.order?(e.order>p&&(p=e.order+1),c.order=e.order):c.order=p++,l.push(c);l.na();this.b=l;this.c=l.M();if(void 0===a.sortColumn)a.sortColumn=null;else if("string"==typeof a.sortColumn)this.b.get(a.sortColumn)?a.sortColumn=[{column:a.sortColumn,descending:!1}]:a.sortColumn=null;else if(a.sortColumn instanceof Array){p=[];g=0;e=a.sortColumn.length;for(c;g<e&&(c=a.sortColumn[g],c=void 0!==
c.column?c:{column:c,descending:!1},(c=this.b.get(c.column))&&!_.contains(p,c.name)&&p.push(c.name),p.length!=this.r&&p.length!=this.c.length);g++);a.sortColumn=p}else"object"==typeof a.sortColumn?this.b.get(a.sortColumn.column)||(a.sortColumn=null):a.sortColumn=null;this.e=new u.La({sortColumn:a.sortColumn,columns:this.columns});this.listenTo(this.e,"sort",this.render).listenTo(this.e,"requiresComparatorForColumn",_.bind(function(a,b,d){this.Q&&(a.lb=this.Q(b,d))},this));this.f=null;this.sa=a.height;
this.w=0;var f=this;"addEventListener"in window?(this.G=function(a){a.__hoverIn||a.addEventListener("mouseover",a.__hoverIn=_.bind(d,a));return this},this.W=function(a){a.__hoverIn&&(a.removeEventListener("mouseover",a.__hoverIn),a.__hoverIn=null);return this},this.ea=function(a){a.__hoverOut||a.addEventListener("mouseout",a.__hoverOut=_.bind(b,a.__cell||a));return this},this.ha=function(a){a.__hoverOut&&(a.removeEventListener("mouseout",a.__hoverOut),a.__hoverOut=null);return this}):(this.G=function(a){a.__hoverIn||
a.attachEvent("mouseover",a.__hoverIn=_.bind(d,a));return this},this.W=function(a){a.__hoverIn&&(a.detachEvent("mouseover",a.__hoverIn),a.__hoverIn=null);return this},this.ea=function(a){a.__hoverOut||a.attachEvent("mouseout",a.__hoverOut=_.bind(b,a.__cell||a));return this},this.ha=function(a){a.__hoverOut&&(a.detachEvent("mouseout",a.__hoverOut),a.__hoverOut=null);return this})},ya:function(a){var b=parseFloat(a),d=n.AUTO;0<b&&(a==b+"%"?(d=n.RELATIVE,b/=100):0<b&&1>b?d=n.RELATIVE:(b<this.l&&(b=this.l),
d=n.ABSOLUTE));return{width:b,mode:d}},ua:function(a){var b=this.ya(a.width);return{name:a.name,label:void 0===a.label?a.name:a.label,width:b.width,n:b.mode,resizable:void 0===a.resizable?!0:a.resizable,sortable:void 0===a.sortable?!0:a.sortable,C:void 0===a.C?!0:a.C,visible:void 0===a.visible?!0:a.visible,cellClasses:void 0===a.cellClasses?this.Na:a.cellClasses}},close:function(){this.h&&(this.h.remove(),this.h=null);this.remove();this.Da().Ea();this.g.unbind();this.d.unbind();this.$el.unbind();
this.unbind();if(this.o){for(var a=0,b;a<this.o.length;a++)b=this.o[a],b.Ja.removeEventListener("message",b.Ia,!1);this.o.length=0}this.e.length=this.b.length=0;for(var d in this)this.hasOwnProperty(d)&&(this[d]=null)},Ea:function(){if(this.p)for(var a=0,b=this.p[0].childNodes,d=b.length,g;a<d;a++){g=b[a];var e=0;g=g.childNodes;for(var c=g.length;e<c;e++)this.W(g[e])}if(this.d)for(a=0,b=this.d[0].childNodes,d=b.length;a<d;a++)for(g=b[a],e=0,g=g.childNodes,c=g.length;e<c;e++)this.W(g[e]);return this},
kb:function(a){var b=0;a=a.childNodes;for(var d=a.length;b<d;b++)this.W(a[b]);return this},render:function(){if(!0===this.m){this.m=!1;this.d&&(this.w=this.d[0].scrollTop);this.X==u.Width.AUTO&&this.ra();this.N(!0,!1).gb();var a=this.d[0].scrollHeight-this.d.height();this.w>a&&(this.w=a);this.d[0].scrollTop=this.w;this.i&&(this.d.on("scroll",_.bind(this.xa,this)),this.xa(null,!0));this.ja();for(a=0;a<this.e.sortColumn.length;a++)this.Ba(this.e.sortColumn[a].column,this.e.sortColumn[a].descending);
this.ba&&this.N(!0);this.R=!1;this.trigger("renderSkeleton")}else this.i&&this.Aa(this.w,this.d[0].scrollTop);this.trigger("render");return this},addColumn:function(a,b){if(a&&!this.b.get(a.name)){var d=null;void 0!==b&&(d=this.b.get(b)||this.b.Z(b));var g=this.ua(a);g.order=d?d.order:this.b.Ha()+1;for(var d=this.b.Ha(),e=g.order,c;d>=e;d--)(c=this.b.Z(d))&&c.order++;this.b.push(g);this.b.na();this.m=!0;this.c=this.b.M();this.render();this.trigger("addColumn",g.name)}return this},removeColumn:function(a){var b=
this.b.indexOf(a);-1<b&&(this.b.splice(b,1),this.b.na(),this.m=!0,this.c=this.b.M(),this.render(),this.trigger("removeColumn",a));return this},filter:function(a,b,d){if(this.b.get(a)){var g=!!this.f;this.f&&(this.f=null);this.f=this.e.Ga(a,b,d);if(g||this.f)this.m=!0,this.render(),this.trigger("filter",a,b,d)}return this},S:function(){this.f&&(this.f=null,this.f=this.e.Ga(this.e.L,this.e.Y,this.e.ma));return this},setColumnLabel:function(a,b){var d=this.b.get(a);if(d&&(d.label=void 0===b?d.name:b,
d.element))for(var g=0;g<d.element[0].firstChild.childNodes.length;g++){var e=d.element[0].firstChild.childNodes[g];if(3===e.nodeType){e.textContent=d.label;break}}return this},moveColumn:function(a,b){var d,g;"string"===typeof a?d=this.b.get(a):"number"===typeof a&&(d=this.c[a]);"string"===typeof b?g=this.b.get(b):"number"===typeof b&&(g=this.c[b]);if(d&&g&&a!==b){var e=d.order,c=g.order;this.c=this.b.moveColumn(d,g).M();if(this.i)this.m=!0,this.render();else{var p=this.p.find(">tr>th");g=e<c?c+
1:c;p[0].parentNode.insertBefore(p[e],p[g]);for(var p=this.c[e],p=(p.t||p.j)+"px",l=this.c[c],l=(l.t||l.j)+"px",f=this.d[0].childNodes,m=0,h=f.length,k;m<h;m++)k=f[m],1===k.nodeType&&(k.insertBefore(k.childNodes[e],k.childNodes[g]),k.childNodes[c].firstChild.style.width=l,k.childNodes[e].firstChild.style.width=p)}this.trigger("moveColumn",d.name,e,c)}return this},sort:function(a,b,d){var g=this.b.get(a);if(g){var e=this.e.sortColumn;e.length&&e[e.length-1].column==a&&(b=void 0===b?!e[e.length-1].descending:
b);if(d){for(a=0;a<e.length;a++)if(e[a].column==g.name){a<e.length-1?e.length=0:e.splice(e.length-1,1);break}if(0<this.r&&e.length>=this.r||e.length>=this.c.length)e.length=0}else e.length=0;e.push({column:g.name,descending:!(void 0===b||!b)});this.e.sortColumn=e;this.ra();for(a=0;a<e.length;a++)this.Ba(e[a].column,e[a].descending);this.ba&&this.N(!0);this.i||(this.m=!0);this.e.sort(!!this.f);this.S();this.f&&this.render();b=[];for(a=0;a<e.length;a++)b.push({column:e[a].column,descending:e[a].descending});
this.trigger("sort",b)}return this},setColumnVisible:function(a,b){var d=this.b.get(a);d&&!!d.visible!=!!b&&(d.visible=!!b,this.m=!0,this.c=this.b.M(),this.render(),this.trigger(b?"showColumn":"hideColumn",a));return this},isColumnVisible:function(a){return(a=this.b.get(a))?a.visible:!1},setMinColumnWidth:function(a){a=Math.max(a,0);this.l!=a&&(this.l=a,this.N(!0));return this},getMinColumnWidth:function(){return this.l},setSortableColumns:function(a){if(this.r!=a&&(this.r=a,this.g)){a=this.g.find("thead>tr>th");
for(var b=0;b<a.length;b++)c(a[0])[0<this.r&&this.c[b].sortable?"addClass":"removeClass"]("sortable")}return this},getSortableColumns:function(){return this.r},setMovableColumns:function(a){a=!!a;this.A!=a&&(this.A=a);return this},getMovableColumns:function(){return this.A},setResizableColumns:function(a){a=!!a;this.J!=a&&(this.J=a);return this},getResizableColumns:function(){return this.J},setComparatorCallback:function(a){this.Q!=a&&(this.Q=a);return this},setColumnWidth:function(a,b){var d=this.ya(b),
g=this.b.get(a);if(g){var e=this.V(g);g.width=d.width;g.n=d.mode;d=this.V(g);e!=d&&this.N(!0);this.trigger("setColumnWidth",g.name,e,d)}return this},getColumnWidth:function(a){return(a=this.b.get(a))?this.V(a):null},getColumnConfig:function(a){return(a=this.b.get(a))?{order:a.order,width:this.V(a),visible:a.visible}:null},getColumnsConfig:function(){for(var a={},b=0;b<this.b.length;b++)a[this.b[b].name]=this.getColumnConfig(this.b[b]);return a},getSortedColumns:function(){for(var a=[],b=0,d;b<this.e.sortColumn.length;b++)d=
this.e.sortColumn[b],a.push({column:d.column,descending:d.descending});return a},getHtmlForCell:function(a,b){return 0>a||a>this.e.length-1||!this.b.get(b)?null:this.F(this.e[a][b],b)},H:function(a){return(parseFloat(c.css(a,"padding-left"))||0)+(parseFloat(c.css(a,"padding-right"))||0)},Ra:function(a){return(parseFloat(c.css(a,"border-left"))||0)+(parseFloat(c.css(a,"border-right"))||0)},oa:function(){function a(a){var b=f(a,"width");return"auto"===b?(parseFloat(c(a).css("width"))||0)+1:parseFloat(b)||
0}var b=this.$el.width(),d,g,e,v;if(this.g)d=this.g,g=this.p;else{d=e=c("<table></table>").css({position:"absolute",top:"-9999px",visibility:"hidden"}).addClass(this.ga);g=v=c("<thead></thead>");for(var p=c("<tr></tr>"),l=0;l<this.c.length;l++)p.append(c("<th><div></div></th>"));e.append(v.append(p))}var f=window.getComputedStyle?function(a,b){var d=window.getComputedStyle(a,null);return d?d.getPropertyValue(b):null}:function(a,b){var d=a.currentStyle;return d?d[b]:null},b=b-this.Ra(d[0]);d=g.find(">tr>th");
for(var l=0,m;l<d.length;l++)p=c(d[l].firstChild),v=c(d[l]),g=Math.max(parseFloat(v.css("border-left-width"))||0,0<l?parseFloat(c(d[l-1]).css("border-right-width"))||0:0),m="border-box"===v.css("boxSizing"),b-=g+(p.outerWidth()-p.width())+(a(v[0])+(m?0:this.H(v[0]))-p.outerWidth());b-=parseFloat(c(d[d.length-1]).css("border-right-width"))||0;e&&e.remove();d=g=e=v=null;return b},N:function(){function a(a){a=c("<table><thead><tr><th>"+a+"</th></tr></thead></table>").css({position:"absolute",top:"-9999px",
visibility:"hidden"}).addClass(this.ga);var b=a.find(">thead>tr>th");b.css({position:"absolute","float":"left","white-space":"nowrap",visibility:"hidden"});a.appendTo(document.body);b=b.width();a.remove();return b}var b=null;return function(d,g){var e=this.oa(),c=e,p=0;if(c!=b||d){b=e;var l,f=[],m,h;for(m=e=0;m<this.b.length;m++)this.b[m].t=null;for(m=0;m<this.c.length;m++)h=this.c[m],h.n==n.ABSOLUTE?(l=h.width,l+=h.la||0,l<this.l&&(l=this.l),c-=l,l!==h.j&&(h.j=l,f.push(m))):h.n==n.AUTO?(l=_.bind(a,
this)(h.label)+20,l+=h.la||0,l<this.l&&(l=this.l),c-=l,l!==h.j&&(h.j=l,f.push(m))):h.n==n.RELATIVE&&(e+=h.width,p++);if(p&&(1>e&&this.eb||1<e&&this.fb))for(m=0;m<this.c.length;m++)h=this.c[m],h.n==n.RELATIVE&&(h.width/=e);e=c;for(m=0;m<this.c.length;m++)h=this.c[m],h.n==n.RELATIVE&&(l=Math.round(e*h.width),l<this.l&&(l=this.l),c-=l,p--,0===p&&1===c&&(l++,c--),-1===c&&(l--,c++),l!==h.j&&(h.j=l,f.push(m)));this.c[this.c.length-1].t=this.c[this.c.length-1].j-(this.U||0);if(g||void 0===g)for(m=0;m<f.length;m++)this.hb(f[m])}return this}}(),
addRows:function(a){if(a){this.scrollTop=this.$el.find(".table").scrollTop();var b=this.e.length;this.R=!0;this.e.add(a);if(this.i)this.S(),0===b&&(this.f||this.e).length&&(this.m=!0),this.render();else if(this.f)b=this.f.length,this.S(),this.f&&this.f.length==b||(this.m=!0,this.render());else if(this.d){var d,g,e,c=this.P;e=document.createDocumentFragment();for(var h=0,l,f,m,k=this.c.length,t=a.length;h<t;h++){l=a[h];b=r("tr");b.setAttribute("data-row",h);for(f=0;f<k;f++)m=this.c[f],d=r("div"),d.style.width=
(m.t||m.j)+"px",d.innerHTML=this.F(l[m.name],m.name),g=r("td"),m.cellClasses&&(g.className=m.cellClasses),c&&this.G(g),g.appendChild(d),b.appendChild(g);e.appendChild(b)}this.d[0].appendChild(e);this.ia()}this.trigger("addRows",a.length,!1)}return this},setRows:function(a){this.scrollTop=this.$el.find(".table").scrollTop();this.e.reset(a);this.S();this.m=!0;this.render().trigger("addRows",a.length,!0);return this},getUrlForElementContent:function(a){if(a=document.getElementById(a)){a=a.textContent;
if("function"===typeof Blob)a=new Blob([a]);else{var b=k.BlobBuilder||k.WebKitBlobBuilder||k.ob||k.nb;if(!b)return null;b=new b;b.append(a);a=b.getBlob()}return(k.URL||k.webkitURL).createObjectURL(a)}return null},isWorkerSupported:function(){return k.Worker instanceof Function},createWebWorker:function(a,b){if(this.isWorkerSupported()){var d=this,g=new Worker(a),e=function(a){a.data.append?d.addRows(a.data.rows):d.setRows(a.data.rows)};g.addEventListener("message",e,!1);this.o||(this.o=[]);this.o.push({Ja:g,
Ia:e});(b||void 0===b)&&g.postMessage(null);return g}return null},unbindWebWorker:function(a){if(this.o)for(var b=0;b<this.o.length;b++)this.o[b].Ja==a&&(a.removeEventListener("message",this.o[b].Ia,!1),this.o.splice(b,1),b--);return this},xa:function(a,b){if(!0===b||this.w!==this.d[0].scrollTop){var d=parseInt(this.d[0].scrollTop/this.B,10),g=d-this.q;0>g&&(g=0);this.a.u=this.a.first;this.a.v=this.a.last;this.a.first=g;this.a.last=d+this.s+this.q;d=this.f||this.e;this.a.last>d.length&&(this.a.last=
d.length,this.a.first=Math.max(0,this.a.last-this.s-2*this.q));this.Aa(this.w,this.d[0].scrollTop)}},bb:function(){this.p[0].scrollLeft=this.d[0].scrollLeft},da:function(a){for(var b=this.I(),d=c(a.target).closest("th"),g=d[0],e=d[0].previousSibling;e&&1!=e.nodeType;)e=e.previousSibling;var h=!e;a=(a.originalEvent.pageX||a.originalEvent.clientX)-d.offset().left;if(b){if(!h&&d.outerWidth()-a<=this.T/2)return e.k;if(a<=this.T/2)return g.k}else{if(!h&&a<=this.T/2)return e.k;if(d.outerWidth()-a<=this.T/
2)return g.k}return null},Za:function(a){if(this.J){var b=this.da(a);a=c(a.target).closest("th")[0];b&&this.b.get(b).resizable?a.style.cursor="e-resize":a.style.cursor=""}},Ya:function(a){c(a.target).closest("th")[0].style.cursor=""},Sa:function(a){if(!this.da(a)&&(a=c(a.target).closest("th")[0],this.r)){var b=this.b.get(a.k);b&&b.sortable&&this.sort(a.k,void 0,!0)}},ab:function(a){var b=this.da(a),d;if(b){d=this.b.get(b);if(!this.J||!d||!d.resizable)return!1;b=this.I();this.h&&c(this.h).remove();
this.h=c("<div></div>").addClass(this.ib).css({position:"absolute",display:"block","z-index":-1,visibility:"hidden",width:"2px",background:"#000",opacity:0.7}).appendTo(this.$el);d=d.element;var g=this.h.parent(),e=d.offset(),f=g.offset();8==h&&(e=d.offset());f.left+=parseFloat(g.css("border-left-width"))||0;f.top+=parseFloat(g.css("border-top-width"))||0;e.left-=f.left;e.top-=f.top;e.top-=parseFloat(d.css("border-top-width"))||0;g=this.h.outerWidth();b?e.left-=Math.ceil((parseFloat(d.css("border-left-width"))||
0)/2):(e.left+=d.outerWidth(),e.left+=Math.ceil((parseFloat(d.css("border-right-width"))||0)/2));e.left-=Math.ceil(g/2);b=this.g.height()-(this.g.offset().top-d.offset().top);this.h.css({"z-index":"10",visibility:"visible",left:e.left,top:e.top,height:b})[0].k=d[0].k;try{this.h[0].style.zIndex=""}catch(p){}c(document).on("mousemove",this.va);c(document).on("mouseup",this.fa);a.preventDefault()}else this.A?(b=c(a.target).closest("th"),(d=this.b.get(b[0].k))&&d.C?(b[0].style.opacity=0.35,this.ca=161061273*
Math.random(),a.originalEvent.dataTransfer.setData("text",JSON.stringify({Fa:this.ca,column:d.name}))):a.preventDefault()):a.preventDefault()},$a:function(a){var b=this.b.get(this.h[0].k),d=this.I(),b=b.element,g=this.h.parent(),e=b.offset(),c=g.offset();c.left+=parseFloat(g.css("border-left-width"))||0;e.left-=c.left;g=this.h.outerWidth();a=a.pageX-c.left;e=e.left;d?(e+=b.outerWidth(),e-=Math.ceil((parseFloat(b.css("border-right-width"))||0)/2),e-=Math.ceil(g/2),e-=this.l,e-=this.H(b[0]),a>e&&(a=
e)):(e+=Math.ceil((parseFloat(b.css("border-right-width"))||0)/2),e-=Math.ceil(g/2),e+=this.l,e+=this.H(b[0]),a<e&&(a=e));this.h.css("left",a+"px")},Xa:function(a){if(this.h){c(document).off("mousemove",this.va);c(document).off("mouseup",this.fa);var b=this.b.get(this.h[0].k),d=this.I(),g=b.element,e=this.h.parent(),h=g.offset(),f=e.offset();f.left+=parseFloat(e.css("border-left-width"))||0;h.left-=f.left;e=this.h.outerWidth();a=a.pageX-f.left;h=f=h.left;h=0;d?(a+=this.H(g[0]),f+=g.outerWidth(),f-=
Math.ceil((parseFloat(g.css("border-right-width"))||0)/2),f-=Math.ceil(e/2),h=f-this.l,a>h&&(a=h),h=f-a):(a-=this.H(g[0]),f+=Math.ceil((parseFloat(g.css("border-right-width"))||0)/2),f-=Math.ceil(e/2),h=f+this.l,a<h&&(a=h),h=a-f);this.h.remove();this.h=null;d=h;if(b.n==n.RELATIVE){d=this.oa();for(g=0;g<this.c.length;g++)e=this.c[g],e.n!=n.RELATIVE&&(d-=e.j);d=h/d*100;d+="%"}this.setColumnWidth(b.name,d)}else a.target.style.opacity=null},Ta:function(a){if(this.A){var b=a.originalEvent.dataTransfer.getData("text"),
b=b?JSON.parse(b):null;a=c(a.target).closest("th");(!b||this.ca==b.Fa&&a.k!==b.column)&&(b=this.b.get(a[0].k))&&(b.C||b!=this.c[0])&&c(a).addClass("drag-over")}},Va:function(a){a.preventDefault()},Ua:function(a){var b=c(a.target).closest("th");c(b[0].firstChild).has(a.originalEvent.relatedTarget).length||b.removeClass("drag-over")},Wa:function(a){a.preventDefault();var b=JSON.parse(a.originalEvent.dataTransfer.getData("text"));a=c(a.target).closest("th");if(this.A&&b.Fa==this.ca){var b=b.column,d=
a[0].k,g=this.b.get(b),e=this.b.get(d);g&&e&&g.C&&(e.C||e!=this.c[0])&&this.moveColumn(b,d)}c(a).removeClass("drag-over")},ra:function(){if(this.g){var a=this.g.find(">thead>tr>th.sorted"),b=a.find(">div>.sort-arrow");_.forEach(b,_.bind(function(a){if(a=this.b.get(a.parentNode.parentNode.k))a.la=0},this));b.remove();a.removeClass("sorted").removeClass("desc")}return this},Ba:function(a,b){var d=this.b.get(a),g=r("span");g.className="sort-arrow";d.element.addClass(b?"sorted desc":"sorted");d.element[0].firstChild.insertBefore(g,
d.element[0].firstChild.firstChild);d.n!=n.RELATIVE&&this.ba&&(d.la=g.scrollWidth+(parseFloat(c(g).css("margin-right"))||0)+(parseFloat(c(g).css("margin-left"))||0));return this},hb:function(a){var b=this.g.find(">thead>tr>th"),d=this.b.get(b[a].k);if(d){b[a].firstChild.style.width=d.j+"px";for(var b=(d.t||d.j)+"px",d=this.d[0].childNodes,c=this.i?1:0,e=d.length-(this.i?1:0),f;c<e;c++)f=d[c],1===f.nodeType&&(f.childNodes[a].firstChild.style.width=b);this.ja()}return this},Da:function(){this.g&&this.g.find(">thead>tr>th").off("mousemove").off("mouseleave").off("dragstart").off("selectstart").off("click").find(">div").off("dragenter").off("dragover").off("dragleave").off("drop");
return this},gb:function(){var a=0;this.K&&(a=parseFloat(this.K.style.height));this.Da().Ea();var b,d,g,e,f,h,l,k,m,n,y=this.P,A=r("tr"),q;s&&(q=function(a){a.preventDefault();this.pb();return!1});for(b=0;b<this.c.length;b++)if(e=this.c[b],e.visible&&(l=r("div"),l.style.width=e.j+"px",l.innerHTML=e.label,m=r("th"),m.draggable=!0,this.r&&e.sortable&&(m.className="sortable"),m.k=e.name,y&&this.G(m),m.appendChild(l),A.appendChild(m),this.c[b].element=c(m),c(m).on("mousemove",_.bind(this.Za,this)).on("mouseleave",
_.bind(this.Ya,this)).on("dragstart",_.bind(this.ab,this)).on("click",_.bind(this.Sa,this)),c(l).on("dragenter",_.bind(this.Ta,this)).on("dragover",_.bind(this.Va,this)).on("dragleave",_.bind(this.Ua,this)).on("drop",_.bind(this.Wa,this)),s))c(m).on("selectstart",_.bind(q,m));this.g&&this.i&&(this.d.off("scroll"),this.g.remove());"static"==this.$el.css("position")&&this.$el.css("position","relative");y=this.P;this.i||!this.g?(e=document.createDocumentFragment(),b=r("table"),b.className=this.ga,e.appendChild(b),
m=r("thead"),m.style.display="block",t&&c(m).css({"float":"rtl"==this.$el.css("direction")?"right":"left",clear:"both"}),b.appendChild(m),q=r("tbody"),q.style.maxHeight=this.sa+"px",q.style.display="block",q.style.overflowY="auto",q.style.overflowX="hidden",t&&c(q).css({"float":"rtl"==this.$el.css("direction")?"right":"left",clear:"both"}),this.X==u.Width.SCROLL&&(m.style.overflowX="hidden",q.style.overflowX="auto"),b.appendChild(q),this.el.appendChild(e),this.g=c(b),this.d=c(q),this.p=c(m)):(b=this.g[0],
q=this.d[0],m=this.p[0]);this.i&&!this.B&&(l=function(){var a=r("tr");a.appendChild(r("td")).appendChild(r("div")).innerHTML="0";a.style.visibility="hidden";a.style.position="absolute";return a},b=q.appendChild(l()),e=q.appendChild(l()),l=q.appendChild(l()),this.B=c(e).outerHeight(),q.removeChild(b),q.removeChild(e),q.removeChild(l),this.s=parseInt(this.sa/this.B,10));var w=this.f||this.e;this.i&&(this.a&&this.a.last-this.a.first>=this.s?(this.a.u=this.a.u!=this.a.first?this.a.u:this.a.first,this.a.v=
this.a.v!=this.a.last?this.a.v:this.a.last,this.a.last>w.length&&(this.a.last=w.length,this.a.first=Math.max(0,this.a.last-this.s-2*this.q))):(b=this.s+this.q,b>w.length&&(b=w.length),this.a={first:0,last:b,u:0,v:b}));var x=document.createDocumentFragment();this.i&&(k=this.K=document.createElement("tr"),k.style.height=a+"px",x.appendChild(k));var z;this.i?(b=this.a.first,z=this.a.last):(b=0,z=w.length);f=this.c.length;for(h=w.length;b<h&&b<z;b++){d=w[b];k=document.createElement("tr");k.setAttribute("data-row",
b);for(g=0;g<f;g++)e=this.c[g],l=document.createElement("div"),l.style.width=e.j+"px",l.innerHTML=this.F(d[e.name],e.name),n=document.createElement("td"),e.cellClasses&&(n.className=e.cellClasses),y&&this.G(n),n.appendChild(l),k.appendChild(n);x.appendChild(k)}this.i&&(k=this.ka=document.createElement("tr"),k.style.height=this.B*Math.max(0,w.length-this.s-this.q)-a+"px",x.appendChild(k));try{m.innerHTML=""}catch(B){m.textContent=""}m.appendChild(A);try{q.innerHTML=""}catch(C){q.textContent=""}q.appendChild(x);
this.ia(!0);this.i&&this.D();return this},ia:function(a){var b=this.d[0].offsetWidth-this.d[0].clientWidth;if(b!=this.U||a){this.U=b;for(a=0;a<this.b.length;a++)this.b[a].t=null;if(0<this.U){b=this.c.length-1;this.c[b].t=this.c[b].j-this.U;var d=this.c[b].t+"px",c=this.d[0].childNodes;a=this.i?1:0;for(var e=c.length-(this.i?1:0),f;a<e;a++)f=c[a],1===f.nodeType&&(f.childNodes[b].firstChild.style.width=d)}}return this},Aa:function(a,b){var d,c,e=this.a.last-this.a.first-(this.a.v-this.a.u),f=this.s+
this.q;if(b<a)d=this.a.first,c=this.a.u,this.a.last<=this.a.u&&(d=this.a.first,c=this.a.last),this.a.u=this.a.first,this.a.v=this.a.last,this.za(c-d-e,!1),this.aa(d,c,!0),this.D();else if(b>a)d=this.a.v,c=this.a.last,this.a.first>=this.a.v&&(d=this.a.first,c=this.a.last),this.a.u=this.a.first,this.a.v=this.a.last,this.za(c-d-e,!0),this.aa(d,c,!1),this.D();else if(this.R)this.R=!1,c=this.f||this.e,this.a.last<c.length&&this.a.last<f&&(d=this.a.last,c=c.length,c>f&&(c=f),this.aa(d,c,!1),this.a.last=
c),this.D();else{this.D();this.cb(this.a.first);return}this.ia();this.ja();this.w=this.d[0].scrollTop},D:function(){var a=((this.f||this.e).length-(this.d[0].childNodes.length-2))*this.B;if(0>a)this.K.style.height=0,this.ka.style.height=0;else{var b=this.a.first*this.B;this.K.style.height=b+"px";this.ka.style.height=a-b+"px"}},aa:function(a,b,d){if(d)for(d=this.K.nextSibling;d&&1!=d.nodeType;)d=d.nextSibling;else d=this.ka;for(;a<b;a++)this.Ma(a,d)},Ma:function(a,b){var d=document.createElement("tr");
d.setAttribute("data-row",a);for(var c=this.f||this.e,e=this.P,f=0,h,l,k;f<this.c.length;f++)h=this.c[f],l=document.createElement("div"),l.style.width=(h.t||h.j)+"px",l.innerHTML=this.F(c[a][h.name],h.name),k=document.createElement("td"),h.cellClasses&&(k.className=h.cellClasses),e&&this.G(k),k.appendChild(l),d.appendChild(k);this.d[0].insertBefore(d,b)},za:function(a,b){var c,g;a>this.s+2*this.q&&(a=this.s+2*this.q);var e=this.d[0],f=e.childNodes;g=this.d[0].childNodes.length-2;b?(c=1,g=Math.min(a+
1,g+1)):(c=g+1-a,g+=1);for(var h=c;h<g;g--)this.kb(f[c]),e.removeChild(f[c])},cb:function(a){for(var b=this.d[0].getElementsByTagName("tr"),d=this.f||this.e,g=1,e,f,h,l;g<b.length-1;g++)for(e=b[g],e.setAttribute("data-row",a+g-1),e=c("td>div",e),f=0;f<e.length;f++)h=e[f],l=this.c[f],l=l.name,h.innerHTML=this.F(d[a+g-1][l],l)},ja:function(){if(this.X==u.Width.AUTO){for(var a=this.g.find(">thead>tr>th"),b=0,d=0;d<a.length;d++)b+=c(a[d])[0].offsetWidth;this.g.width(b);this.$el.width(b)}else if(this.X==
u.Width.SCROLL)if(a=this.$el.innerWidth(),b=this.g.width(),d=this.p[0].scrollWidth,this.d.off("scroll",this.wa),d>b||d>a)this.p.width(a),this.d.width(a),this.d.on("scroll",this.wa);else{try{this.p[0].style.width=""}catch(g){}try{this.d[0].style.width=""}catch(e){}}return this},I:function(){return"rtl"==this.g.css("direction")},V:function(a){return a.n==n.AUTO?"auto":a.n==n.RELATIVE?100*a.width+"%":a.width},Pa:function(a){if(a.firstChild.scrollWidth>a.firstChild.clientWidth){this.ta();var b=c(a),d=
c(a.firstChild),g=r("div"),e=c(g);g.className=this.Qa;var f=parseFloat(b.css("padding-left"))||0,h=parseFloat(b.css("padding-right"))||0,l=parseFloat(b.css("padding-top"))||0,k=parseFloat(b.css("padding-bottom"))||0,m=a.firstChild.scrollWidth+a.clientWidth-a.firstChild.offsetWidth,t=a.firstChild.scrollHeight+a.clientHeight-a.firstChild.offsetHeight;"border-box"===b.css("boxSizing")?(m-=parseFloat(c(a).css("border-left-width"))||0,m-=parseFloat(c(a).css("border-right-width"))||0,t-=parseFloat(c(a).css("border-top-width"))||
0,t-=parseFloat(c(a).css("border-bottom-width"))||0,e.css("box-sizing","border-box")):(m-=f+h,t-=l+k,e.css({"margin-top":parseFloat(c(a).css("border-top-width"))||0}));if(!this.Ca){var n=document.createElement("div");n.style.backgroundColor="transparent";this.Ca=c(n).css("background-color");n.style.backgroundColor="rgba(0,0,0,0)";this.jb=c(n).css("background-color")}n=c(a).css("background-color");if(n==this.Ca||n==this.jb)n="#fff";e.css({width:m+"px",height:t+"px","padding-left":f,"padding-right":h,
"padding-top":l,"padding-bottom":k,overflow:"hidden",position:"absolute",zIndex:"-1",left:"0",top:"0","background-color":n,cursor:"default"});g.innerHTML=a.innerHTML;document.body.appendChild(g);g.firstChild.style.width=g.clientWidth-a.clientWidth+parseFloat(a.firstChild.style.width)+"px";g.firstChild.style.direction=d.css("direction");g.firstChild.style.whiteSpace=d.css("white-space");g.__row=a.parentNode.getAttribute("data-row");g.__column=this.c[_.indexOf(a.parentNode.childNodes,a)].name;this.pa&&
!1===this.pa(g.firstChild,g.__row,g.__column)||(d=b.offset(),this.I()?(f=e.outerWidth(),b=b.outerWidth(),d.left-=f-b):d.left+=parseFloat(c(a).css("border-left-width"))||0,d.top+=parseFloat(c(a).css("border-top-width"))||parseFloat(c(a).css("border-bottom-width"))||0,e.css({left:d.left,top:d.top,"z-index":9999,zIndex:9999}),g.__cell=a,this.O=e,a.__previewEl=g,this.ea(a),this.ea(g))}},Oa:function(){this.ta()},ta:function(){if(this.O){var a=this.O[0];this.O.remove();this.ha(a.__cell);this.ha(a);a.__cell.__previewEl=
null;a.__cell=null;this.qa&&this.qa(a.firstChild,a.__row,a.__column);this.O=null}return this}}),n={AUTO:0,ABSOLUTE:1,RELATIVE:2};u.Width={NONE:"none",AUTO:"auto",SCROLL:"SCROLL"};k.DGTable=u})(this,jQuery);
DGTable.Ka=function(){function k(){var c=[];_.extend(c,k.prototype);c.initialize.apply(c,arguments);return c}k.prototype=[];k.prototype.initialize=function(){};k.prototype.get=function(c){for(var f=0,h=this.length;f<h;f++)if(this[f].name==c)return this[f];return null};k.prototype.indexOf=function(c){for(var f=0,h=this.length;f<h;f++)if(this[f].name==c)return f;return-1};k.prototype.Z=function(c){for(var f=0,h=this.length;f<h;f++)if(this[f].order==c)return this[f];return null};k.prototype.na=function(){var c=
[],f;for(f=0;f<this.length;f++)c.push(this[f]);c.sort(function(c,f){return c.order<f.order?-1:c.order>f.order?1:0});for(f=0;f<c.length;f++)c[f].order=f};k.prototype.M=function(){for(var c=[],f=0,h;f<this.length;f++)h=this[f],h.visible&&c.push(h);c.sort(function(c,f){return c.order<f.order?-1:c.order>f.order?1:0});return c};k.prototype.Ha=function(){for(var c=0,f=0,h;f<this.length;f++)h=this[f],h.order>c&&(c=h.order);return c};k.prototype.moveColumn=function(c,f){if(c&&f){var h=c.order,k=f.order,s;
if(h<k)for(h+=1;h<=k;h++)s=this.Z(h),s.order--;else for(h-=1;h>=k;h--)s=this.Z(h),s.order++;c.order=k}return this};return k}();
DGTable.La=function(){function k(){var c=[];_.extend(c,k.prototype);c.initialize.apply(c,arguments);return c}k.prototype=[];_.extend(k.prototype,Backbone.Events);k.prototype.initialize=function(c){c=c||{};this.Y=this.L=null;this.ma=!1;this.sortColumn=null==c.sortColumn?[]:c.sortColumn};k.prototype.add=function(c,f){var h,k;if("splice"in c&&"length"in c)if(f)for(h=0,k=c.length;h<k;h++)this.splice(f++,0,c[h]);else for(h=0,k=c.length;h<k;h++)this.push(c[h]);else f?this.splice(f,0,c):this.push(c)};k.prototype.reset=
function(c){this.length=0;c&&this.add(c)};k.prototype.Ga=function(c,f,h){if((f=f.toString())&&null!=c){var t=new k({sortColumn:this.sortColumn});this.L=c;this.Y=f;this.ma=h;c=0;for(f=this.length;c<f;c++)h=this[c],this.mb(h)&&t.push(h);return t}return this.Y=this.L=null};k.prototype.mb=function(c){if(c&&this.L){c=c[this.L];if(null==c)return!1;c=c.toString();var f=this.Y;this.ma||(c=c.toUpperCase(),f=f.toUpperCase());return-1!==c.indexOf(f)}return!0};(function(){function c(c,f){var k=f?1:-1,r=f?-1:
1;return function(f,n){var a=f[c],b=n[c];return a<b?k:a>b?r:0}}var f=k.prototype.sort;k.prototype.sort=function(h){if(this.sortColumn.length){var k=[],s,r;for(s=0;s<this.sortColumn.length;s++)r={},this.trigger("requiresComparatorForColumn",r,this.sortColumn[s].column,this.sortColumn[s].descending),k.push(_.bind(r.lb||c(this.sortColumn[s].column,this.sortColumn[s].descending),this));if(1===k.length)f.call(this,k[0]);else{var u=k.length,n;f.call(this,function(a,b){for(s=0;s<u&&(n=k[s](a,b),0===n);s++);
return n})}h||this.trigger("sort")}return this}})();return k}();
//# sourceMappingURL=DGTable.min.js.map