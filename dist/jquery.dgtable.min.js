/*!
 * jquery.dgtable 0.5.2
 * git://github.com/danielgindi/jquery.dgtable.git
 */

!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?exports.DGTable=b(require("jquery")):a.DGTable=b(a.jQuery)}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0).default}([function(a,b,c){(function(a){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){var b=a.style.display;return a.style.display="none",a.offsetHeight,a.style.display=b,a}function f(a){(0,j.contains)(["relative","absolute","fixed"],a.css("position"))||a.css("position","relative")}Object.defineProperty(b,"__esModule",{value:!0});var g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=c(1),i=d(h),j=c(2),k=c(3),l=d(k),m=c(4),n=d(m),o=i.default,q=navigator.userAgent,r=q.indexOf("MSIE ")!=-1?parseFloat(q.substr(q.indexOf("MSIE ")+5)):null,s=r&&r<10,t=(0,j.bind)(document.createElement,document),u=function a(){return this instanceof a?void this.initialize.apply(this,arguments):new(Function.prototype.bind.apply(a,[a].concat(Array.prototype.slice.call(arguments,0))))};u.VERSION="0.5.2",u.prototype.VERSION=u.VERSION,u.prototype.initialize=function(a){var b=this;a=a||{};var c=b.o={},d=b.p={};d.events={};var e=b.$el=o("<div>").addClass(c.className||"dgtable-wrapper");b.el=b.$el[0],e.data("control",b).data("dgtable",b),e.on("remove",function(){b.destroy()}),d.onMouseMoveResizeAreaBound=(0,j.bind)(this._onMouseMoveResizeArea,this),d.onEndDragColumnHeaderBound=(0,j.bind)(this._onEndDragColumnHeader,this),d.onTableScrolledHorizontallyBound=(0,j.bind)(this._onTableScrolledHorizontally,this),this.$el.on("dragend",d.onEndDragColumnHeaderBound),d.tableSkeletonNeedsRendering=!0,a.columns=a.columns||[],c.virtualTable=void 0===a.virtualTable||!!a.virtualTable,c.rowsBufferSize=a.rowsBufferSize||3,c.minColumnWidth=Math.max(a.minColumnWidth||35,0),c.resizeAreaWidth=a.resizeAreaWidth||8,c.resizableColumns=void 0===a.resizableColumns||!!a.resizableColumns,c.movableColumns=void 0===a.movableColumns||!!a.movableColumns,c.sortableColumns=void 0===a.sortableColumns?1:parseInt(a.sortableColumns,10)||1,c.adjustColumnWidthForSortArrow=void 0===a.adjustColumnWidthForSortArrow||!!a.adjustColumnWidthForSortArrow,c.convertColumnWidthsToRelative=void 0!==a.convertColumnWidthsToRelative&&!!a.convertColumnWidthsToRelative,c.cellClasses=void 0===a.cellClasses?"":a.cellClasses,c.resizerClassName=void 0===a.resizerClassName?"dgtable-resize":a.resizerClassName,c.tableClassName=void 0===a.tableClassName?"dgtable":a.tableClassName,c.allowCellPreview=void 0===a.allowCellPreview||a.allowCellPreview,c.allowHeaderCellPreview=void 0===a.allowHeaderCellPreview||a.allowHeaderCellPreview,c.cellPreviewClassName=void 0===a.cellPreviewClassName?"dgtable-cell-preview":a.cellPreviewClassName,c.cellPreviewAutoBackground=void 0===a.cellPreviewAutoBackground||a.cellPreviewAutoBackground,c.onComparatorRequired=void 0===a.onComparatorRequired?null:a.onComparatorRequired,c.onComparatorRequired||"function"!=typeof a.comparatorCallback||(c.onComparatorRequired=a.comparatorCallback),c.width=void 0===a.width?u.Width.NONE:a.width,c.relativeWidthGrowsToFillWidth=void 0===a.relativeWidthGrowsToFillWidth||!!a.relativeWidthGrowsToFillWidth,c.relativeWidthShrinksToFillWidth=void 0!==a.relativeWidthShrinksToFillWidth&&!!a.relativeWidthShrinksToFillWidth,c.cellFormatter=a.cellFormatter||function(a){return a},c.headerCellFormatter=a.headerCellFormatter||function(a){return a},c.height=a.height;var f,h,i,k,m,p,q=new n.default;for(f=0,p=0;f<a.columns.length;f++)m=a.columns[f],k=this._initColumnFromData(m),void 0!==m.order?(m.order>p&&(p=m.order+1),k.order=m.order):k.order=p++,q.push(k);q.normalizeOrder(),d.columns=q,d.visibleColumns=q.getVisibleColumns(),this._ensureVisibleColumns();var r=[];if(a.sortColumn){var s=a.sortColumn;if(s&&"object"!==("undefined"==typeof s?"undefined":g(s))&&(s=[s]),s instanceof Array||"object"===("undefined"==typeof s?"undefined":g(s)))for(f=0,h=s.length,k;f<h;f++){var t=s[f];"string"==typeof t&&(t={column:t,descending:!1}),i=d.columns.get(t.column),r.push({column:t.column,comparePath:i.comparePath,descending:t.descending})}}d.rows=new l.default({sortColumn:r,columns:this.columns}),d.rows.onComparatorRequired=function(a,b){if(c.onComparatorRequired)return c.onComparatorRequired(a,b)},d.filteredRows=null;var v=function(a){a=a||event;var c=a.fromElement||a.relatedTarget;c==this||o.contains(this,c)||this.__previewEl&&(c==this.__previewEl||o.contains(this.__previewEl,c))||b._cellMouseOverEvent.call(b,this)},w=function(a){a=a||event;var c=a.toElement||a.relatedTarget;c==this||o.contains(this,c)||this.__previewEl&&(c==this.__previewEl||o.contains(this.__previewEl,c))||b._cellMouseOutEvent.call(b,this)};"addEventListener"in window?(d._bindCellHoverIn=function(a){a.__hoverIn||a.addEventListener("mouseover",a.__hoverIn=(0,j.bind)(v,a))},d._unbindCellHoverIn=function(a){a.__hoverIn&&(a.removeEventListener("mouseover",a.__hoverIn),a.__hoverIn=null)},d._bindCellHoverOut=function(a){return a.__hoverOut||a.addEventListener("mouseout",a.__hoverOut=(0,j.bind)(w,a.__cell||a)),this},d._unbindCellHoverOut=function(a){return a.__hoverOut&&(a.removeEventListener("mouseout",a.__hoverOut),a.__hoverOut=null),this}):(d._bindCellHoverIn=function(a){a.__hoverIn||a.attachEvent("mouseover",a.__hoverIn=(0,j.bind)(v,a))},d._unbindCellHoverIn=function(a){a.__hoverIn&&(a.detachEvent("mouseover",a.__hoverIn),a.__hoverIn=null)},d._bindCellHoverOut=function(a){a.__hoverOut||a.attachEvent("mouseout",a.__hoverOut=(0,j.bind)(w,a.__cell||a))},d._unbindCellHoverOut=function(a){return a.__hoverOut&&(a.detachEvent("mouseout",a.__hoverOut),a.__hoverOut=null),this})},u.prototype.on=function(a,b){var c=this,d=c.p.events;return"function"!=typeof b?c:(d.hasOwnProperty(a)||(d[a]=[]),d[a].push({cb:b,once:!1}),c)},u.prototype.once=function(a,b){var c=this,d=c.p.events;return"function"!=typeof b?c:(d.hasOwnProperty(a)||(d[a]=[]),d[a].push({cb:b,once:!0}),c)},u.prototype.off=function(a,b){var c=this,d=c.p.events;if(!d.hasOwnProperty(a))return c;for(var e=d[a],f=0;f<e.length;f++){var g=e[f];b&&g.cb!==b||e.splice(f--,1)}return c},u.prototype.trigger=function(a){var b=this,c=b.p.events;if(c.hasOwnProperty(a))for(var d=c[a],e=0;e<d.length;e++){var f=d[e];f.once&&d.splice(e--,1),f.cb.apply(b,Array.prototype.slice.call(arguments,1))}return b},u.prototype._parseColumnWidth=function(a,b){var c=parseFloat(a),d=v.AUTO;return c>0&&(a==c+"%"?(d=v.RELATIVE,c/=100):c>0&&c<1?d=v.RELATIVE:(c<b&&(c=b),d=v.ABSOLUTE)),{width:c,mode:d}},u.prototype._initColumnFromData=function(a){var b=this._parseColumnWidth(a.width,a.ignoreMin?0:this.o.minColumnWidth),c={name:a.name,label:void 0===a.label?a.name:a.label,width:b.width,widthMode:b.mode,resizable:void 0===a.resizable||a.resizable,sortable:void 0===a.sortable||a.sortable,movable:void 0===a.movable||a.movable,visible:void 0===a.visible||a.visible,cellClasses:void 0===a.cellClasses?this.o.cellClasses:a.cellClasses,ignoreMin:void 0!==a.ignoreMin&&!!a.ignoreMin};return c.dataPath=void 0===a.dataPath?c.name:a.dataPath,c.comparePath=void 0===a.comparePath?c.dataPath:a.comparePath,"string"==typeof c.dataPath&&(c.dataPath=c.dataPath.split(".")),"string"==typeof c.comparePath&&(c.comparePath=c.comparePath.split(".")),c},u.prototype.close=u.prototype.remove=u.prototype.destroy=function(){var a=this,b=a.p||{},c=a.$el;if(a.__removed)return a;if(b.$resizer&&(b.$resizer.remove(),b.$resizer=null),b.$tbody)for(var d=b.$tbody[0].childNodes,e=0,f=d.length;e<f;e++)a.trigger("rowdestroy",d[e]);if(u.__super__.remove.apply(this,arguments),this._destroyHeaderCells()._unbindCellEventsForTable(),b.$table&&b.$table.empty(),b.$tbody&&b.$tbody.empty(),b.workerListeners){for(var g,h=0;h<b.workerListeners.length;h++)g=b.workerListeners[h],g.worker.removeEventListener("message",g.listener,!1);b.workerListeners.length=0}b.rows.length=b.columns.length=0,b._deferredRender&&clearTimeout(b._deferredRender);for(var i in a)a.hasOwnProperty(i)&&(a[i]=null);return a.__removed=!0,c&&c.remove(),this},u.prototype._unbindCellEventsForTable=function(){var a,b,c,d,e,f,g,h=this,i=h.p;if(i.headerRow)for(a=0,b=i.headerRow.childNodes,c=b.length;a<c;a++)for(d=b[a],e=0,f=d.childNodes,g=f.length;e<g;e++)i._unbindCellHoverIn(f[e]);if(i.tbody)for(a=0,b=i.tbody.childNodes,c=b.length;a<c;a++)this._unbindCellEventsForRow(b[a]);return this},u.prototype._unbindCellEventsForRow=function(a){for(var b=this,c=b.p,d=0,e=a.childNodes,f=e.length;d<f;d++)c._unbindCellHoverIn(e[d]);return this},u.prototype.render=function(){var a=this,b=a.o,c=a.p;if(!this.el.offsetParent)return c._deferredRender||(c._deferredRender=setTimeout(function(){c._deferredRender=null,!a.__removed&&a.el.offsetParent&&a.render()})),a;var d,e;if(c.tableSkeletonNeedsRendering===!0){c.tableSkeletonNeedsRendering=!1,b.width==u.Width.AUTO&&a._clearSortArrows();var f=c.table?c.table.scrollTop:0,g=c.table?c.table.scrollLeft:0;if(a.tableWidthChanged(!0,!1)._renderSkeleton(),b.virtualTable)a._updateLastCellWidthFromScrollbar();else{var h=c.filteredRows||c.rows;e=h.length,d=a.renderRows(0,e-1),c.$tbody.html("").append(d),a._updateLastCellWidthFromScrollbar(!0)}c.table.scrollTop=f,c.table.scrollLeft=g,c.header.scrollLeft=g,this._updateTableWidth(!0);for(var i=0;i<c.rows.sortColumn.length;i++)this._showSortArrow(c.rows.sortColumn[i].column,c.rows.sortColumn[i].descending);b.adjustColumnWidthForSortArrow&&c.rows.sortColumn.length?this.tableWidthChanged(!0):b.virtualTable||this.tableWidthChanged(),this.trigger("renderskeleton"),b.virtualTable&&(c.$table.on("scroll",(0,j.bind)(this._onVirtualTableScrolled,this)),this.render())}else if(b.virtualTable){e=(c.filteredRows||c.rows).length;var k=c.table.scrollTop,l=Math.floor((k-c.virtualRowHeightFirst)/c.virtualRowHeight)+1-b.rowsBufferSize,m=Math.ceil((k-c.virtualRowHeightFirst+c.visibleHeight)/c.virtualRowHeight)+b.rowsBufferSize;l<0&&(l=0),m>=e&&(m=e-1);var n=-1,o=-1,p=c.tbody.childNodes;p.length&&(n=p[0].rowIndex,o=p[p.length-1].rowIndex);var q;if(n!==-1&&n<l){q=Math.min(o+1,l)-n;for(var i=0;i<q;i++)a.trigger("rowdestroy",p[0]),a._unbindCellEventsForRow(p[0]),c.tbody.removeChild(p[0]);n+=q,n>o&&(n=o=-1)}else if(o!==-1&&o>m){q=o-Math.max(n-1,m);for(var i=0;i<q;i++)a.trigger("rowdestroy",p[p.length-1]),a._unbindCellEventsForRow(p[p.length-1]),c.tbody.removeChild(p[p.length-1]);o<n&&(n=o=-1)}l<n&&(d=a.renderRows(l,Math.min(m,n-1)),c.$tbody.prepend(d)),(m>o||o===-1)&&(d=a.renderRows(o===-1?l:o+1,m),c.$tbody.append(d))}return this.trigger("render"),this},u.prototype.clearAndRender=function(){var a=this.p;return a.tableSkeletonNeedsRendering=!0,this.render()},u.prototype.renderRows=function(a,b){for(var c,d,e,f,g,h,i=this,j=i.o,k=i.p,l=j.tableClassName,m=l+"-row",n=l+"-cell",o=k.filteredRows||k.rows,p=!!k.filteredRows,q=j.allowCellPreview,r=k.visibleColumns,s=j.cellFormatter,u=j.virtualTable,v=k.virtualRowHeightFirst,w=k.virtualRowHeight,x=r.length,y=0;y<x;y++)h=r[y],h._finalWidth=h.actualWidthConsideringScrollbarWidth||h.actualWidth;for(var z,A,B,C,D,E=document.createDocumentFragment(),F=this._isTableRtl(),G=F?"right":"left",H=a,I=o.length;H<I&&H<=b;H++){for(z=o[H],d=p?z.__i:H,A=t("div"),A.className=m,A.rowIndex=H,A.physicalRowIndex=d,y=0;y<x;y++){for(h=r[y],B=t("div"),B.columnName=h.name,B.setAttribute("data-column",h.name),B.className=n,B.style.width=h._finalWidth+"px",h.cellClasses&&(B.className+=" "+h.cellClasses),q&&k._bindCellHoverIn(B),C=B.appendChild(t("div")),e=h.dataPath,g=z[e[0]],f=1;f<e.length;f++)g=g&&g[e[f]];D=s(g,h.name,z),void 0===D&&(D=""),C.innerHTML=D,A.appendChild(B)}u&&(c=H>0?v+(H-1)*w:0,A.style.position="absolute",A.style[G]=0,A.style.top=c+"px"),E.appendChild(A),i.trigger("rowcreate",H,d,A,z)}return E},u.prototype._calculateVirtualHeight=function(){var a=this.p;if(a.tbody){var b=(a.filteredRows||a.rows).length,c=a.virtualRowHeight*b;b&&(c+=a.virtualRowHeightFirst-a.virtualRowHeight,c+=a.virtualRowHeightLast-a.virtualRowHeight),c<1&&(c=1),a.tbody.style.height=c+"px"}return this},u.prototype._calculateTbodyWidth=function(){var a,b,c,d,e=this,f=e.p,g=e.o.tableClassName,h=g+"-row",i=g+"-cell",j=f.visibleColumns,k=j.length,l=o("<div>").addClass(h).css("float","left");for(c=0;c<k;c++)d=j[c],a=t("div"),a.className=i,a.style.width=d.actualWidth+"px",d.cellClasses&&(a.className+=" "+d.cellClasses),b=a.appendChild(t("div")),l.append(a);var m=o("<div>").addClass(this.className).css({"z-index":-1,position:"absolute",left:"0",top:"-9999px",float:"left",width:"1px",overflow:"hidden"}).append(o("<div>").addClass(g).append(o("<div>").addClass(g+"-body").css("width",99999).append(l)));m.appendTo(document.body);var n=o('<div style="border:1px solid #000;width:0;height:0;position:absolute;left:0;top:-9999px">').appendTo(document.body),p=parseFloat(n.css("border-width"));p=Math.round(p)!=p,n.remove();var q=l.outerWidth();return q-=f.scrollbarWidth||0,p&&q++,m.remove(),q},u.prototype.addColumn=function(a,b){var c=this,d=c,e=d.columns;if(a&&!e.get(a.name)){var f=null;void 0!==b&&(f=e.get(b)||e.getByOrder(b));var g=this._initColumnFromData(a);g.order=f?f.order:e.getMaxOrder()+1;for(var h,i=e.getMaxOrder(),j=g.order;i>=j;i--)h=e.getByOrder(i),h&&h.order++;e.push(g),e.normalizeOrder(),d.tableSkeletonNeedsRendering=!0,d.visibleColumns=e.getVisibleColumns(),this._ensureVisibleColumns(),this.render(),this.trigger("addcolumn",g.name)}return this},u.prototype.removeColumn=function(a){var b=this,c=b.p,d=c.columns,e=d.indexOf(a);return e>-1&&(d.splice(e,1),d.normalizeOrder(),c.visibleColumns=d.getVisibleColumns(),this._ensureVisibleColumns().clearAndRender(),this.trigger("removecolumn",a)),this},u.prototype.filter=function(a,b,c){var d=this,e=d.p,f=e.columns.get(a);if(f){var g=!!e.filteredRows;e.filteredRows&&(e.filteredRows=null),e.filteredRows=e.rows.filteredCollection(a,b,c),(g||e.filteredRows)&&(this.clearAndRender(),this.trigger("filter",a,b,c))}return this},u.prototype._refilter=function(){var a=this,b=a.p;return b.filteredRows&&(b.filteredRows=null,b.filteredRows=b.rows.filteredCollection(b.rows.filterColumn,b.rows.filterString,b.rows.filterCaseSensitive)),this},u.prototype.setColumnLabel=function(a,b){var c=this,d=c.p,e=d.columns.get(a);if(e&&(e.label=void 0===b?e.name:b,e.element))for(var f=0;f<e.element[0].firstChild.childNodes.length;f++){var g=e.element[0].firstChild.childNodes[f];if(3===g.nodeType){g.textContent=e.label;break}}return this},u.prototype.moveColumn=function(a,b){var c,d,e=this,f=e.o,g=e.p,h=g.columns;if("string"==typeof a?c=h.get(a):"number"==typeof a&&(c=g.visibleColumns[a]),"string"==typeof b?d=h.get(b):"number"==typeof b&&(d=g.visibleColumns[b]),c&&d&&a!==b){var i=c.order,j=d.order;if(g.visibleColumns=h.moveColumn(c,d).getVisibleColumns(),this._ensureVisibleColumns(),f.virtualTable)this.clearAndRender()._updateLastCellWidthFromScrollbar(!0);else{var k=g.$headerRow.find(">div."+f.tableClassName+"-header-cell"),l=i<j?j+1:j,m=i;k[0].parentNode.insertBefore(k[m],k[l]);var n=g.visibleColumns[i];n=(n.actualWidthConsideringScrollbarWidth||n.actualWidth)+"px";var o=g.visibleColumns[j];o=(o.actualWidthConsideringScrollbarWidth||o.actualWidth)+"px";for(var p,q=g.$tbody[0].childNodes,r=0,s=q.length;r<s;r++)p=q[r],1===p.nodeType&&(p.insertBefore(p.childNodes[m],p.childNodes[l]),p.childNodes[j].firstChild.style.width=o,p.childNodes[i].firstChild.style.width=n)}this.trigger("movecolumn",c.name,i,j)}return this},u.prototype.sort=function(a,b,c){var d,e=this,f=e.o,g=e.p,h=g.columns,i=h.get(a);if(i){var j=g.rows.sortColumn;if(j.length&&j[j.length-1].column==a&&(b=void 0===b?!j[j.length-1].descending:b),c){for(d=0;d<j.length;d++)if(j[d].column==i.name){d<j.length-1?j.length=0:j.splice(j.length-1,1);break}(f.sortableColumns>0&&j.length>=f.sortableColumns||j.length>=g.visibleColumns.length)&&(j.length=0)}else j.length=0;for(b=void 0!==b&&b,j.push({column:i.name,comparePath:i.comparePath,descending:!!b}),this._clearSortArrows(),d=0;d<j.length;d++)this._showSortArrow(j[d].column,j[d].descending);if(f.adjustColumnWidthForSortArrow&&!f._tableSkeletonNeedsRendering&&this.tableWidthChanged(!0),f.virtualTable)for(;g.tbody&&g.tbody.firstChild;)this.trigger("rowdestroy",g.tbody.firstChild),this._unbindCellEventsForRow(g.tbody.firstChild),g.tbody.removeChild(g.tbody.firstChild);else g.tableSkeletonNeedsRendering=!0;g.rows.sortColumn=j,g.rows.sort(!!g.filteredRows),this._refilter();var k=[];for(d=0;d<j.length;d++)k.push({column:j[d].column,descending:j[d].descending});this.trigger("sort",k)}return this},u.prototype.resort=function(){var a=this,b=a.p,c=b.rows.sortColumn;if(c.length){b.rows.sortColumn=c,b.rows.sort(!!b.filteredRows),this._refilter();for(var d=[],e=0;e<c.length;e++)d.push({column:c[e].column,descending:c[e].descending});this.trigger("sort",d)}return this},u.prototype._ensureVisibleColumns=function(){var a=this,b=a.p;return 0===b.visibleColumns.length&&b.columns.length&&(b.columns[0].visible=!0,b.visibleColumns.push(b.columns[0]),this.trigger("showcolumn",b.columns[0].name)),this},u.prototype.setColumnVisible=function(a,b){var c=this,d=c.p,e=d.columns.get(a);return b=!!b,e&&!!e.visible!=b&&(e.visible=b,d.visibleColumns=d.columns.getVisibleColumns(),this.trigger(b?"showcolumn":"hidecolumn",a),this._ensureVisibleColumns(),this.clearAndRender()),this},u.prototype.isColumnVisible=function(a){var b=this,c=b.p,d=c.columns.get(a);return!!d&&d.visible},u.prototype.setMinColumnWidth=function(a){var b=this.o;return a=Math.max(a,0),b.minColumnWidth!=a&&(b.minColumnWidth=a,this.tableWidthChanged(!0)),this},u.prototype.getMinColumnWidth=function(){return this.o.minColumnWidth},u.prototype.setSortableColumns=function(a){var b=this.o;if(b.sortableColumns!=a&&(b.sortableColumns=a,p.$table))for(var c=p.$headerRow.find(">div."+b.tableClassName+"-header-cell"),d=0;d<c.length;d++)o(c[0])[b.sortableColumns>0&&p.visibleColumns[d].sortable?"addClass":"removeClass"]("sortable");return this},u.prototype.getSortableColumns=function(){return this.o.sortableColumns},u.prototype.setMovableColumns=function(a){var b=this.o;return a=void 0===a||!!a,b.movableColumns!=a&&(b.movableColumns=a),this},u.prototype.getMovableColumns=function(){return this.o.movableColumns},u.prototype.setResizableColumns=function(a){var b=this.o;return a=void 0===a||!!a,b.resizableColumns!=a&&(b.resizableColumns=a),this},u.prototype.getResizableColumns=function(){return this.o.resizableColumns},u.prototype.setComparatorCallback=function(a){var b=this.o;return b.onComparatorRequired!=a&&(b.onComparatorRequired=a),this},u.prototype.setColumnWidth=function(a,b){var c=this,d=c.p,e=d.columns.get(a),f=this._parseColumnWidth(b,e.ignoreMin?0:this.o.minColumnWidth);if(e){var g=this._serializeColumnWidth(e);e.width=f.width,e.widthMode=f.mode;var h=this._serializeColumnWidth(e);g!=h&&this.tableWidthChanged(!0),this.trigger("columnwidth",e.name,g,h)}return this},u.prototype.getColumnWidth=function(a){var b=this,c=b.p,d=c.columns.get(a);return d?this._serializeColumnWidth(d):null},u.prototype.getColumnConfig=function(a){var b=this,c=b.p,d=c.columns.get(a);return d?{order:d.order,width:this._serializeColumnWidth(d),visible:d.visible,label:d.label}:null},u.prototype.getColumnsConfig=function(){for(var a=this,b=a.p,c={},d=0;d<b.columns.length;d++)c[b.columns[d].name]=this.getColumnConfig(b.columns[d].name);return c},u.prototype.getSortedColumns=function(){for(var a,b=this,c=b.p,d=[],e=0;e<c.rows.sortColumn.length;e++)a=c.rows.sortColumn[e],d.push({column:a.column,descending:a.descending});return d},u.prototype.getHtmlForCell=function(a,b){var c=this,d=c.p;if(a<0||a>d.rows.length-1)return null;var e=d.columns.get(b);if(!e)return null;for(var f=d.rows[a],g=e.dataPath,h=f[g[0]],i=1;i<g.length;i++)h=h[g[i]];var j=this.o.cellFormatter(h,e.name,f);return void 0===j&&(j=""),j},u.prototype.getDataForRow=function(a){var b=this,c=b.p;return a<0||a>c.rows.length-1?null:c.rows[a]},u.prototype.getRowCount=function(){var a=this,b=a.p;return b.rows?b.rows.length:0},u.prototype.getDataForFilteredRow=function(a){var b=this,c=b.p;return a<0||a>(c.filteredRows||c.rows).length-1?null:(c.filteredRows||c.rows)[a]},u.prototype.getHeaderRowElement=function(){return this.p.headerRow},u.prototype._horizontalPadding=function(a){return(parseFloat(o.css(a,"padding-left"))||0)+(parseFloat(o.css(a,"padding-right"))||0)},u.prototype._horizontalBorderWidth=function(a){return(parseFloat(o.css(a,"border-left"))||0)+(parseFloat(o.css(a,"border-right"))||0)},u.prototype._calculateWidthAvailableForColumns=function(){var a,b,c,d=this,e=d.o,f=d.p;f.$table&&(b=f.table?f.table.scrollTop:0,c=f.table?f.table.scrollLeft:0,e.virtualTable&&(a=f.$table[0].style.display,f.$table[0].style.display="none"));var g=this.$el.width();f.$table&&(e.virtualTable&&(f.$table[0].style.display=a),f.table.scrollTop=b,f.table.scrollLeft=c,f.header.scrollLeft=c);var h,i,j,k=e.tableClassName;if(f.$table)j=f.$headerRow;else{h=o("<div>").addClass(this.className).css({"z-index":-1,position:"absolute",left:"0",top:"-9999px"}),i=o("<div>").addClass(k+"-header").appendTo(h),j=o("<div>").addClass(k+"-header-row").appendTo(i);for(var l=0;l<f.visibleColumns.length;l++)j.append(o("<div><div></div></div>").addClass(k+"-header-cell").addClass(f.visibleColumns[l].cellClasses||""));h.appendTo(document.body)}g-=this._horizontalBorderWidth(j[0]);for(var m,n,p,q=j.find(">div."+k+"-header-cell"),l=0;l<q.length;l++)n=o(q[l].firstChild),m=o(q[l]),p="border-box"===m.css("boxSizing"),g-=(parseFloat(m.css("border-right-width"))||0)+(parseFloat(m.css("border-left-width"))||0)+(p?0:this._horizontalPadding(m[0]));return h&&h.remove(),g},u.prototype.tableWidthChanged=function(){var a=function(a){var b,c=this.o.tableClassName,d=o("<div>").addClass(this.$el).append(o("<div>").addClass(c+"-header").append(o("<div>").addClass(c+"-header-row").append(b=o("<div>").addClass(c+"-header-cell").append(o("<div>").text(a))))).css({position:"absolute",top:"-9999px",visibility:"hidden"});d.appendTo(document.body);var e=b.width();return d.remove(),e},b=null;return function(c,d){var e=this,f=e.o,g=e.p,h=this._calculateWidthAvailableForColumns(),i=h,j=0;d=void 0===d||d;var k=0;if(g.tbody||(d=!1),d&&(k=parseFloat(g.tbody.style.minWidth)||0),i!=b||c){b=h;var l,m,n,o=0,p=[],q=0;for(m=0;m<g.columns.length;m++)g.columns[m].actualWidthConsideringScrollbarWidth=null;for(m=0;m<g.visibleColumns.length;m++)n=g.visibleColumns[m],n.widthMode===v.ABSOLUTE?(l=n.width,l+=n.arrowProposedWidth||0,!n.ignoreMin&&l<f.minColumnWidth&&(l=f.minColumnWidth),i-=l,o+=l,l!==n.actualWidth&&(n.actualWidth=l,p.push(m))):n.widthMode===v.AUTO?(l=a.call(this,n.label)+20,l+=n.arrowProposedWidth||0,!n.ignoreMin&&l<f.minColumnWidth&&(l=f.minColumnWidth),i-=l,o+=l,l!==n.actualWidth&&(n.actualWidth=l,f.convertColumnWidthsToRelative||p.push(m))):n.widthMode===v.RELATIVE&&(q+=n.width,j++);if(f.convertColumnWidthsToRelative)for(m=0;m<g.visibleColumns.length;m++)n=g.visibleColumns[m],n.widthMode===v.AUTO&&(n.widthMode=v.RELATIVE,i+=n.actualWidth,n.width=n.actualWidth/o,q+=n.width,j++);if(j&&(q<1&&f.relativeWidthGrowsToFillWidth||q>1&&f.relativeWidthShrinksToFillWidth))for(m=0;m<g.visibleColumns.length;m++)n=g.visibleColumns[m],n.widthMode===v.RELATIVE&&(n.width/=q);h=i;var r=f.minColumnWidth/h;if(isNaN(r)&&(r=0),r>0){var s,t=0;for(m=0;m<g.visibleColumns.length;m++)n=g.visibleColumns[m],n.widthMode===v.RELATIVE&&!n.ignoreMin&&n.width<r&&(t+=r-n.width,n.width=r);for(m=0;m<g.visibleColumns.length;m++)n=g.visibleColumns[m],n.widthMode===v.RELATIVE&&!n.ignoreMin&&n.width>r&&t>0&&(s=Math.min(t,n.width-r),n.width-=s,t-=s)}for(m=0;m<g.visibleColumns.length;m++)n=g.visibleColumns[m],n.widthMode===v.RELATIVE&&(l=Math.round(h*n.width),i-=l,j--,0===j&&1===i&&(l++,i--),i===-1&&(l--,i++),l!==n.actualWidth&&(n.actualWidth=l,p.push(m)));if(g.visibleColumns[g.visibleColumns.length-1].actualWidthConsideringScrollbarWidth=g.visibleColumns[g.visibleColumns.length-1].actualWidth-(g.scrollbarWidth||0),d){var u=this._calculateTbodyWidth();for(k<u&&this._updateTableWidth(!1),m=0;m<p.length;m++)this._resizeColumnElements(p[m]);k>u&&this._updateTableWidth(!1)}}return this}}(),u.prototype.tableHeightChanged=function(){var a=this,b=a.o,c=a.p;if(!c.$table)return a;var d=a.$el.innerHeight()-(parseFloat(c.$table.css("border-top-width"))||0)-(parseFloat(c.$table.css("border-bottom-width"))||0);return d!=b.height&&(b.height=d,c.tbody&&(c.tbody.style.height=Math.max(b.height-c.$headerRow.outerHeight(),1)+"px"),b.virtualTable&&a.clearAndRender()),a},u.prototype.addRows=function(a,b){var c=this,d=c.p;if(a){if(d.rows.add(a),c.o.virtualTable){for(;d.tbody.firstChild;)this.trigger("rowdestroy",d.tbody.firstChild),this._unbindCellEventsForRow(d.tbody.firstChild),d.tbody.removeChild(d.tbody.firstChild);b&&d.rows.sortColumn.length?this.resort():this._refilter(),this._calculateVirtualHeight()._updateLastCellWidthFromScrollbar()._updateTableWidth(!1),this.render()}else if(d.filteredRows){var e=d.filteredRows.length;this._refilter(),d.filteredRows&&d.filteredRows.length==e||this.clearAndRender()}else if(d.$tbody){var f=d.rows.length-a.length,g=f+a.length-1,h=c.renderRows(f,g);d.tbody.appendChild(h),c._updateLastCellWidthFromScrollbar()._updateTableWidth(!0)}this.trigger("addrows",a.length,!1)}return this},u.prototype.removeRow=function(a,b){var c=this,d=c.p;if(a<0||a>d.rows.length-1)return this;if(d.rows.splice(a,1),b=void 0===b||!!b,d.filteredRows)this._refilter(),d.tableSkeletonNeedsRendering=!0,b&&this.render();else if(b){var e=d.tbody.childNodes;if(this.o.virtualTable){for(var f=0;f<e.length;f++)e[f].rowIndex>=a&&(this.trigger("rowdestroy",e[f]),this._unbindCellEventsForRow(e[f]),d.tbody.removeChild(e[f]),f--);this._calculateVirtualHeight()._updateLastCellWidthFromScrollbar().render()._updateTableWidth(!1)}else{for(var f=0;f<e.length;f++)if(e[f].rowIndex===a){this.trigger("rowdestroy",e[f]),this._unbindCellEventsForRow(e[f]),d.tbody.removeChild(e[f]);break}this.render()._updateLastCellWidthFromScrollbar()._updateTableWidth(!0)}}return this},u.prototype.refreshRow=function(a){var b=this,c=b.p;if(a<0||a>c.rows.length-1)return this;var d=-1;if(c.filteredRows&&(d=(0,j.indexOf)(c.filteredRows,c.rows[a]))===-1)return this;d===-1&&(d=a);var e=c.tbody.childNodes;if(this.o.virtualTable){for(var f=!1,g=0;g<e.length;g++)if(e[g].physicalRowIndex===a){f=!0,this.trigger("rowdestroy",e[g]),this._unbindCellEventsForRow(e[g]),c.tbody.removeChild(e[g]);break}if(f){var h=this.renderRows(d,d);c.tbody.insertBefore(h,e[g]||null)}}else{this.trigger("rowdestroy",e[d]),this._unbindCellEventsForRow(e[d]),c.tbody.removeChild(e[d]);var h=this.renderRows(d,d);c.tbody.insertBefore(h,e[d]||null)}return this},u.prototype.getRowElement=function(a){var b=this,c=b.p;if(a<0||a>c.rows.length-1)return null;var d=-1;if(c.filteredRows&&(d=(0,j.indexOf)(c.filteredRows,c.rows[a]))===-1)return this;d===-1&&(d=a);var e=c.tbody.childNodes;if(!this.o.virtualTable)return e[d];for(var f=0;f<e.length;f++)if(e[f].physicalRowIndex===a)return e[f];return null},u.prototype.refreshAllVirtualRows=function(){var a=this,b=a.p;if(this.o.virtualTable){for(var c=[],d=b.tbody.childNodes,e=0,f=d.length;e<f;e++)c.push(d[e].physicalRowIndex),this.trigger("rowdestroy",d[e]),this._unbindCellEventsForRow(d[e]),b.tbody.removeChild(d[e]),e--,f--;for(var e=0;e<c.length;e++){var g=this.renderRows(c[e],c[e]);b.tbody.appendChild(g)}}return this},u.prototype.setRows=function(a,b){var c=this,d=c.p;return d.rows.reset(a),b&&d.rows.sortColumn.length?this.resort():this._refilter(),this.clearAndRender().trigger("addrows",a.length,!0),this},u.prototype.getUrlForElementContent=function(b){var c,d=document.getElementById(b);if(d){var e=d.textContent;if("function"==typeof Blob)c=new Blob([e]);else{var f=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder;if(!f)return null;var g=new f;g.append(e),c=g.getBlob()}return(a.URL||a.webkitURL).createObjectURL(c)}return null},u.prototype.isWorkerSupported=function(){return a.Worker instanceof Function},u.prototype.createWebWorker=function(a,b,c){if(this.isWorkerSupported()){var d=this,e=d.p,f=new Worker(a),g=function(a){a.data.append?d.addRows(a.data.rows,c):d.setRows(a.data.rows,c)};return f.addEventListener("message",g,!1),e.workerListeners||(e.workerListeners=[]),e.workerListeners.push({worker:f,listener:g}),(b||void 0===b)&&f.postMessage(null),f}return null},u.prototype.unbindWebWorker=function(a){var b=this,c=b.p;if(c.workerListeners)for(var d=0;d<c.workerListeners.length;d++)c.workerListeners[d].worker==a&&(a.removeEventListener("message",c.workerListeners[d].listener,!1),c.workerListeners.splice(d,1),d--);return this},u.prototype.abortCellPreview=function(){return this.hideCellPreview(),this},u.prototype.cancelColumnResize=function(){var a=this,b=a.p;return b.$resizer&&(b.$resizer.remove(),b.$resizer=null,o(document).off("mousemove.dgtable",b.onMouseMoveResizeAreaBound).off("mouseup.dgtable",b.onEndDragColumnHeaderBound)),this},u.prototype._onVirtualTableScrolled=function(a){this.render()},u.prototype._onTableScrolledHorizontally=function(a){var b=this,c=b.p;c.header.scrollLeft=c.table.scrollLeft},u.prototype._getColumnByResizePosition=function(a){var b=this,c=b.o,d=(b.p,this._isTableRtl()),e=o(a.target).closest("div."+c.tableClassName+"-header-cell,div."+c.cellPreviewClassName),f=e[0];f.__cell&&(f=f.__cell,e=o(f));for(var g=e[0].previousSibling;g&&1!=g.nodeType;)g=g.previousSibling;var h=!g,i=((null!=a.pageX?a.pageX:a.originalEvent.pageX)||a.originalEvent.clientX)-e.offset().left;if(d){if(!h&&e.outerWidth()-i<=c.resizeAreaWidth/2)return g.columnName;if(i<=c.resizeAreaWidth/2)return f.columnName}else{if(!h&&i<=c.resizeAreaWidth/2)return g.columnName;if(e.outerWidth()-i<=c.resizeAreaWidth/2)return f.columnName}return null},u.prototype._onTouchStartColumnHeader=function(a){var b=this,c=b.p;if(!c.currentTouchId){var d=a.originalEvent.changedTouches[0];c.currentTouchId=d.identifier;var e=o(a.currentTarget),f={x:d.pageX,y:d.pageY},g=f,h=9,i=function(){c.currentTouchId=null,e.off("touchend").off("touchcancel"),clearTimeout(l)},k=function b(c){var b=o.Event(c),d=Array.prototype.slice.call(arguments,1);return o.each(["target","clientX","clientY","offsetX","offsetY","screenX","screenY","pageX","pageY","which"],function(){b[this]=a[this];for(var c=0;c<d.length;c++)null!=d[c][this]&&(b[this]=d[c][this])}),b};e.trigger(k("mousedown",a.originalEvent.changedTouches[0],{which:1}));var l=setTimeout(function(){i(),e.one("touchend",function(a){a.preventDefault(),e.off("touchend").off("touchcancel")}).one("touchcancel",function(a){e.off("touchend").off("touchcancel")});var c=Math.sqrt(Math.pow(Math.abs(g.x-f.x),2)+Math.pow(Math.abs(g.y-f.y),2));c<h&&(b.cancelColumnResize(),e.trigger(k("mouseup",a.originalEvent.changedTouches[0],{which:3})))},500);e.on("touchend",function(a){var b=(0,j.find)(a.originalEvent.changedTouches,function(a){return a.identifier===c.currentTouchId});if(b){i(),a.preventDefault(),g={x:b.pageX,y:b.pageY};var d=Math.sqrt(Math.pow(Math.abs(g.x-f.x),2)+Math.pow(Math.abs(g.y-f.y),2));(d<h||c.$resizer)&&(e.trigger(k("mouseup",b,{which:1})),e.trigger(k("click",b,{which:1})))}}).on("touchcancel",function(){i()}).on("touchmove",function(a){var b=(0,j.find)(a.originalEvent.changedTouches,function(a){return a.identifier===c.currentTouchId});b&&(g={x:b.pageX,y:b.pageY},c.$resizer&&(a.preventDefault(),e.trigger(k("mousemove",b))))})}},u.prototype._onMouseDownColumnHeader=function(a){if(1!==a.which)return this;var b=this,c=b.o,d=b.p,e=this._getColumnByResizePosition(a);if(e){var f=d.columns.get(e);if(!c.resizableColumns||!f||!f.resizable)return!1;var g=this._isTableRtl();d.$resizer&&o(d.$resizer).remove(),d.$resizer=o("<div></div>").addClass(c.resizerClassName).css({
position:"absolute",display:"block","z-index":-1,visibility:"hidden",width:"2px",background:"#000",opacity:.7}).appendTo(this.$el);var h=f.element,i=d.$resizer.parent(),j=h.offset(),k=i.offset();8===r&&(j=h.offset()),k.left+=parseFloat(i.css("border-left-width"))||0,k.top+=parseFloat(i.css("border-top-width"))||0,j.left-=k.left,j.top-=k.top,j.top-=parseFloat(h.css("border-top-width"))||0;var l=d.$resizer.outerWidth();g?(j.left-=Math.ceil((parseFloat(h.css("border-left-width"))||0)/2),j.left-=Math.ceil(l/2)):(j.left+=h.outerWidth(),j.left+=Math.ceil((parseFloat(h.css("border-right-width"))||0)/2),j.left-=Math.ceil(l/2)),d.$resizer.css({"z-index":"10",visibility:"visible",left:j.left,top:j.top,height:this.$el.height()})[0].columnName=h[0].columnName;try{d.$resizer[0].style.zIndex=""}catch(a){}o(document).on("mousemove.dgtable",d.onMouseMoveResizeAreaBound),o(document).on("mouseup.dgtable",d.onEndDragColumnHeaderBound),a.preventDefault()}},u.prototype._onMouseMoveColumnHeader=function(a){var b=this,c=b.o,d=b.p;if(c.resizableColumns){var e=this._getColumnByResizePosition(a),f=o(a.target).closest("div."+c.tableClassName+"-header-cell,div."+c.cellPreviewClassName)[0];e&&d.columns.get(e).resizable?f.style.cursor="e-resize":f.style.cursor=""}},u.prototype._onMouseUpColumnHeader=function(a){if(3===a.which){var b=this.o,c=o(a.target).closest("div."+b.tableClassName+"-header-cell,div."+b.cellPreviewClassName),d=c.offset();d.width=c.outerWidth(),d.height=c.outerHeight(),this.trigger("headercontextmenu",c[0].columnName,a.pageX,a.pageY,d)}return this},u.prototype._onMouseLeaveColumnHeader=function(a){var b=this.o,c=o(a.target).closest("div."+b.tableClassName+"-header-cell,div."+b.cellPreviewClassName)[0];c.style.cursor=""},u.prototype._onClickColumnHeader=function(a){if(!this._getColumnByResizePosition(a)){var b=this,c=b.o,d=b.p,e=o(a.target).closest("div."+c.tableClassName+"-header-cell,div."+c.cellPreviewClassName)[0];if(c.sortableColumns){var f=d.columns.get(e.columnName);f&&f.sortable&&this.sort(e.columnName,void 0,!0).render()}}},u.prototype._onStartDragColumnHeader=function(a){var b=this,c=b.o,d=b.p;if(c.movableColumns){var e=o(a.target).closest("div."+c.tableClassName+"-header-cell,div."+c.cellPreviewClassName),f=d.columns.get(e[0].columnName);f&&f.movable?(e[0].style.opacity=.35,d.dragId=161061273*Math.random(),a.originalEvent.dataTransfer.setData("text",JSON.stringify({dragId:d.dragId,column:f.name}))):a.preventDefault()}else a.preventDefault()},u.prototype._onMouseMoveResizeArea=function(a){var b=this,c=b.p,d=c.columns.get(c.$resizer[0].columnName),e=this._isTableRtl(),f=d.element,g=c.$resizer.parent(),h=f.offset(),i=g.offset();i.left+=parseFloat(g.css("border-left-width"))||0,h.left-=i.left;var j=c.$resizer.outerWidth(),k=a.pageX-i.left,l=h.left;e?(l+=f.outerWidth(),l-=Math.ceil((parseFloat(f.css("border-right-width"))||0)/2),l-=Math.ceil(j/2),l-=d.ignoreMin?0:this.o.minColumnWidth,l-=this._horizontalPadding(f[0]),k>l&&(k=l)):(l+=Math.ceil((parseFloat(f.css("border-right-width"))||0)/2),l-=Math.ceil(j/2),l+=d.ignoreMin?0:this.o.minColumnWidth,l+=this._horizontalPadding(f[0]),k<l&&(k=l)),c.$resizer.css("left",k+"px")},u.prototype._onEndDragColumnHeader=function(a){var b=this,c=b.p;if(c.$resizer){o(document).off("mousemove.dgtable",c.onMouseMoveResizeAreaBound).off("mouseup.dgtable",c.onEndDragColumnHeaderBound);var d=c.columns.get(c.$resizer[0].columnName),e=this._isTableRtl(),f=d.element,g=c.$resizer.parent(),h=f.offset(),i=g.offset();i.left+=parseFloat(g.css("border-left-width"))||0,h.left-=i.left;var j=c.$resizer.outerWidth(),k=a.pageX-i.left,l=h.left,m=h.left,n=0;e?(k+=this._horizontalPadding(f[0]),l+=f.outerWidth(),l-=Math.ceil((parseFloat(f.css("border-right-width"))||0)/2),l-=Math.ceil(j/2),m=l,m-=d.ignoreMin?0:this.o.minColumnWidth,k>m&&(k=m),n=l-k):(k-=this._horizontalPadding(f[0]),l+=Math.ceil((parseFloat(f.css("border-right-width"))||0)/2),l-=Math.ceil(j/2),m=l,m+=d.ignoreMin?0:this.o.minColumnWidth,k<m&&(k=m),n=k-l),c.$resizer.remove(),c.$resizer=null;var p=n;if(d.widthMode===v.RELATIVE){for(var q,r=this._calculateWidthAvailableForColumns(),s=r,t=0;t<c.visibleColumns.length;t++)q=c.visibleColumns[t],q.widthMode!=v.RELATIVE&&(s-=q.actualWidth);p=n/s,p*=100,p+="%"}this.setColumnWidth(d.name,p)}else a.target.style.opacity=null},u.prototype._onDragEnterColumnHeader=function(a){var b=this,c=b.o,d=b.p;if(c.movableColumns){var e=a.originalEvent.dataTransfer.getData("text");e=e?JSON.parse(e):null;var f=o(a.target).closest("div."+c.tableClassName+"-header-cell,div."+c.cellPreviewClassName);if(!e||d.dragId==e.dragId&&f.columnName!==e.column){var g=d.columns.get(f[0].columnName);g&&(g.movable||g!=d.visibleColumns[0])&&o(f).addClass("drag-over")}}},u.prototype._onDragOverColumnHeader=function(a){a.preventDefault()},u.prototype._onDragLeaveColumnHeader=function(a){var b=this.o,c=o(a.target).closest("div."+b.tableClassName+"-header-cell,div."+b.cellPreviewClassName);o(c[0].firstChild).has(a.originalEvent.relatedTarget).length||c.removeClass("drag-over")},u.prototype._onDropColumnHeader=function(a){a.preventDefault();var b=this,c=b.o,d=b.p,e=JSON.parse(a.originalEvent.dataTransfer.getData("text")),f=o(a.target).closest("div."+c.tableClassName+"-header-cell,div."+c.cellPreviewClassName);if(c.movableColumns&&e.dragId==d.dragId){var g=e.column,h=f[0].columnName,i=d.columns.get(g),j=d.columns.get(h);i&&j&&i.movable&&(j.movable||j!=d.visibleColumns[0])&&this.moveColumn(g,h)}o(f).removeClass("drag-over")},u.prototype._clearSortArrows=function(){var a=this,b=a.p;if(b.$table){var c=this.o.tableClassName,d=b.$headerRow.find(">div."+c+"-header-cell.sorted"),e=d.find(">div>.sort-arrow");(0,j.forEach)(e,(0,j.bind)(function(a){var c=b.columns.get(a.parentNode.parentNode.columnName);c&&(c.arrowProposedWidth=0)},this)),e.remove(),d.removeClass("sorted").removeClass("desc")}return this},u.prototype._showSortArrow=function(a,b){var c=this,d=c.p,e=d.columns.get(a),f=t("span");return f.className="sort-arrow",e.element&&(e.element.addClass(b?"sorted desc":"sorted"),e.element[0].firstChild.insertBefore(f,e.element[0].firstChild.firstChild)),e.widthMode!=v.RELATIVE&&this.o.adjustColumnWidthForSortArrow&&(e.arrowProposedWidth=f.scrollWidth+(parseFloat(o(f).css("margin-right"))||0)+(parseFloat(o(f).css("margin-left"))||0)),this},u.prototype._resizeColumnElements=function(a){var b=this,c=b.p,d=c.$headerRow.find("div."+this.o.tableClassName+"-header-cell"),e=c.columns.get(d[a].columnName);if(e){d[a].style.width=(e.actualWidthConsideringScrollbarWidth||e.actualWidth)+"px";for(var f,g=(e.actualWidthConsideringScrollbarWidth||e.actualWidth)+"px",h=c.$tbody[0].childNodes,i=0,j=h.length;i<j;i++)f=h[i],1===f.nodeType&&(f.childNodes[a].style.width=g)}return this},u.prototype._destroyHeaderCells=function(){var a=this,b=a.o,c=a.p;return c.$headerRow&&(this.trigger("headerrowdestroy",c.headerRow),c.$headerRow.find("div."+b.tableClassName+"-header-cell").remove(),c.$headerRow=null,c.headerRow=null),this},u.prototype._renderSkeleton=function(){var a=this,b=a.p;a._destroyHeaderCells(),b.currentTouchId=null;var c=a.o,d=c.allowCellPreview,e=c.allowHeaderCellPreview,g=c.tableClassName,h=g+"-header-cell",i=t("div"),k=o(i),l=t("div"),m=o(l);i.className=g+"-header",l.className=g+"-header-row";var n;s&&(n=function(a){return a.preventDefault(),this.dragDrop(),!1});for(var p,q,r,v,w=function(a){a.preventDefault()},x=0;x<b.visibleColumns.length;x++)p=b.visibleColumns[x],p.visible&&(q=t("div"),v=o(q),q.draggable=!0,q.className=h,q.style.width=p.actualWidth+"px",c.sortableColumns&&p.sortable&&(q.className+=" sortable"),q.columnName=p.name,q.setAttribute("data-column",p.name),r=t("div"),r.innerHTML=c.headerCellFormatter(p.label,p.name),q.appendChild(r),d&&e&&b._bindCellHoverIn(q),l.appendChild(q),b.visibleColumns[x].element=v,v.on("mousedown.dgtable",(0,j.bind)(a._onMouseDownColumnHeader,a)).on("mousemove.dgtable",(0,j.bind)(a._onMouseMoveColumnHeader,a)).on("mouseup.dgtable",(0,j.bind)(a._onMouseUpColumnHeader,a)).on("mouseleave.dgtable",(0,j.bind)(a._onMouseLeaveColumnHeader,a)).on("touchstart.dgtable",(0,j.bind)(a._onTouchStartColumnHeader,a)).on("dragstart.dgtable",(0,j.bind)(a._onStartDragColumnHeader,a)).on("click.dgtable",(0,j.bind)(a._onClickColumnHeader,a)).on("contextmenu.dgtable",w),o(r).on("dragenter.dgtable",(0,j.bind)(a._onDragEnterColumnHeader,a)).on("dragover.dgtable",(0,j.bind)(a._onDragOverColumnHeader,a)).on("dragleave.dgtable",(0,j.bind)(a._onDragLeaveColumnHeader,a)).on("drop.dgtable",(0,j.bind)(a._onDropColumnHeader,a)),s&&v.on("selectstart.dgtable",(0,j.bind)(n,q)),v.css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none"}));if(b.$header&&b.$header.remove(),b.$header=k,b.header=i,b.$headerRow=m,b.headerRow=l,m.appendTo(b.$header),k.prependTo(this.$el),this.trigger("headerrowcreate",l),c.width==u.Width.SCROLL?this.el.style.overflow="hidden":this.el.style.overflow="",b.$table&&c.virtualTable){if(b.$table.remove(),b.$tbody)for(var y=b.$tbody[0].childNodes,x=0,z=y.length;x<z;x++)a.trigger("rowdestroy",y[x]),a._unbindCellEventsForRow(y[x]);b.$table=b.table=b.$tbody=b.tbody=null}if(f(a.$el),!c.height&&c.virtualTable&&(c.height=this.$el.innerHeight()),c.virtualTable&&!b.virtualRowHeight){var A,B=function(){var a=t("div"),b=a.appendChild(t("div")),c=b.appendChild(t("div"));return a.className=g+"-row",b.className=g+"-cell",c.innerHTML="0",a.style.visibility="hidden",a.style.position="absolute",a},C=o("<div>").addClass(this.className).css({"z-index":-1,position:"absolute",left:"0",top:"-9999px",width:"1px",overflow:"hidden"}).append(o("<div>").addClass(g).append(A=o("<div>").addClass(g+"-body").css("width",99999)));C.appendTo(document.body);var D=B(),E=B(),F=B();A.append(D,E,F),b.virtualRowHeightFirst=o(D).outerHeight(),b.virtualRowHeight=o(E).outerHeight(),b.virtualRowHeightLast=o(F).outerHeight(),b.virtualRowHeightMin=Math.min(Math.min(b.virtualRowHeightFirst,b.virtualRowHeight),b.virtualRowHeightLast),b.virtualRowHeightMax=Math.max(Math.max(b.virtualRowHeightFirst,b.virtualRowHeight),b.virtualRowHeightLast),C.remove()}if(!b.$table){var G=document.createDocumentFragment(),H=t("div"),I=o(H);H.className=c.tableClassName,c.virtualTable&&(H.className+=" virtual");var J=c.height-m.outerHeight();"border-box"!==I.css("box-sizing")&&(J-=parseFloat(I.css("border-top-width"))||0,J-=parseFloat(I.css("border-bottom-width"))||0,J-=parseFloat(I.css("padding-top"))||0,J-=parseFloat(I.css("padding-bottom"))||0),b.visibleHeight=J,H.style.height=c.height?J+"px":"auto",H.style.display="block",H.style.overflowY="auto",H.style.overflowX=c.width==u.Width.SCROLL?"auto":"hidden",G.appendChild(H);var K=t("div"),L=o(K);K.className=c.tableClassName+"-body",b.table=H,b.tbody=K,b.$table=I,b.$tbody=L,c.virtualTable&&(b.virtualVisibleRows=Math.ceil(b.visibleHeight/b.virtualRowHeightMin)),a._calculateVirtualHeight(),f(L),f(I),H.appendChild(K),a.el.appendChild(G)}return a},u.prototype._updateLastCellWidthFromScrollbar=function(a){var b=this,c=b.p,d=c.table.offsetWidth-c.table.clientWidth;if(d!=c.scrollbarWidth||a){c.scrollbarWidth=d;for(var e=0;e<c.columns.length;e++)c.columns[e].actualWidthConsideringScrollbarWidth=null;if(c.scrollbarWidth>0){var f=c.visibleColumns.length-1;c.visibleColumns[f].actualWidthConsideringScrollbarWidth=c.visibleColumns[f].actualWidth-c.scrollbarWidth;for(var g,h=c.visibleColumns[f].actualWidthConsideringScrollbarWidth+"px",i=c.tbody.childNodes,e=0,j=i.length;e<j;e++)g=i[e],1===g.nodeType&&(g.childNodes[f].style.width=h);c.headerRow.childNodes[f].style.width=h}}return this},u.prototype._updateTableWidth=function(a){var b=this,c=b.o,d=b.p,f=this._calculateTbodyWidth();if(d.tbody.style.minWidth=f+"px",d.headerRow.style.minWidth=f+(d.scrollbarWidth||0)+"px",d.$table.off("scroll",d.onTableScrolledHorizontallyBound),c.width==u.Width.AUTO)this.$el.width(d.$table.width(d.$tbody.outerWidth()).outerWidth());else if(c.width==u.Width.SCROLL){if(a){var g=d.table?d.table.scrollTop:0,h=d.table?d.table.scrollLeft:0;e(this.el),d.table.scrollTop=g,d.table.scrollLeft=h,d.header.scrollLeft=h}d.$table.on("scroll",d.onTableScrolledHorizontallyBound)}return this},u.prototype._isTableRtl=function(){return"rtl"===this.p.$table.css("direction")},u.prototype._serializeColumnWidth=function(a){return a.widthMode===v.AUTO?"auto":a.widthMode===v.RELATIVE?100*a.width+"%":a.width},u.prototype._cellMouseOverEvent=function(a){var b=this,c=b.o,d=b.p;d.abortCellPreview=!1;var e=a.firstChild;if(e.scrollWidth-e.clientWidth>1||e.scrollHeight-e.clientHeight>1){b.hideCellPreview();var f=o(a),g=o(e),h=t("div"),i=o(h);h.innerHTML=a.innerHTML,h.className=c.cellPreviewClassName;var k=f.hasClass(c.tableClassName+"-header-cell");k&&(h.className+=" header",f.hasClass("sortable")&&(h.className+=" sortable"),h.draggable=!0,o(h).on("mousedown",(0,j.bind)(b._onMouseDownColumnHeader,b)).on("mousemove",(0,j.bind)(b._onMouseMoveColumnHeader,b)).on("mouseup",(0,j.bind)(b._onMouseUpColumnHeader,b)).on("mouseleave",(0,j.bind)(b._onMouseLeaveColumnHeader,b)).on("touchstart",(0,j.bind)(b._onTouchStartColumnHeader,b)).on("dragstart",(0,j.bind)(b._onStartDragColumnHeader,b)).on("click",(0,j.bind)(b._onClickColumnHeader,b)).on("contextmenu.dgtable",function(a){a.preventDefault()}),o(h.firstChild).on("dragenter",(0,j.bind)(b._onDragEnterColumnHeader,b)).on("dragover",(0,j.bind)(b._onDragOverColumnHeader,b)).on("dragleave",(0,j.bind)(b._onDragLeaveColumnHeader,b)).on("drop",(0,j.bind)(b._onDropColumnHeader,b)),s&&o(h).on("selectstart",(0,j.bind)(function(a){return a.preventDefault(),this.dragDrop(),!1},h)));var l=parseFloat(f.css("padding-left"))||0,m=parseFloat(f.css("padding-right"))||0,n=parseFloat(f.css("padding-top"))||0,p=parseFloat(f.css("padding-bottom"))||0,q=e.scrollWidth+a.clientWidth-e.offsetWidth,r="border-box"===f.css("boxSizing");if(r?(q-=parseFloat(o(a).css("border-left-width"))||0,q-=parseFloat(o(a).css("border-right-width"))||0,i.css("box-sizing","border-box")):(q-=l+m,i.css({"margin-top":parseFloat(o(a).css("border-top-width"))||0})),!d.transparentBgColor1){var u=document.createElement("div");u.style.backgroundColor="transparent",d.transparentBgColor1=o(u).css("background-color"),u.style.backgroundColor="rgba(0,0,0,0)",d.transparentBgColor2=o(u).css("background-color")}var v={"box-sizing":"content-box",width:q+"px","min-height":f.height()+"px","padding-left":l,"padding-right":m,"padding-top":n,"padding-bottom":p,overflow:"hidden",position:"absolute",zIndex:"-1",left:"0",top:"0",cursor:"default"};if(v){var w=o(a).css("background-color");w!==d.transparentBgColor1&&w!==d.transparentBgColor2||(w=o(a.parentNode).css("background-color")),w!==d.transparentBgColor1&&w!==d.transparentBgColor2||(w="#fff"),v["background-color"]=w}i.css(v),b.el.appendChild(h),o(h.firstChild).css({direction:g.css("direction"),"white-space":g.css("white-space")}),k&&i.css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none"}),h.rowIndex=a.parentNode.rowIndex;var x=h.physicalRowIndex=a.parentNode.physicalRowIndex;if(h.columnName=d.visibleColumns[(0,j.indexOf)(a.parentNode.childNodes,a)].name,b.trigger("cellpreview",h.firstChild,null==x?null:x,h.columnName,null==x?null:d.rows[x]),d.abortCellPreview)return void i.remove();var y=b.$el,z=y[0]===window?o(document):y,A=f.offset(),B=y.offset(),C="right"===f.css("float"),D=C?"right":"left";if(C){var E=o(window).width();A.right=E-(A.left+f.outerWidth()),B.right=E-(B.left+y.outerWidth())}A.left-=parseFloat(y.css("border-left-width"))||0,A.right-=parseFloat(y.css("border-right-width"))||0,A.top-=parseFloat(y.css("border-top-width"))||0,A[D]+=parseFloat(o(a).css("border-"+D+"-width"))||0,A.top+=parseFloat(o(a).css("border-top-width"))||parseFloat(o(a).css("border-bottom-width"))||0,A.left-=B.left,A.right-=B.right,A.top-=B.top;var F=0,G=y-i.outerWidth();A[D]=A[D]<F?F:A[D]>G?G:A[D];var H=f.outerHeight(),I=z.scrollTop()+y.innerHeight()-H;A.top>I&&(A.top=Math.max(0,I));var J={top:A.top,"z-index":9999};J[D]=A[D],i.css(J),h.__cell=a,d.$cellPreviewEl=i,a.__previewEl=h,d._bindCellHoverOut(a),d._bindCellHoverOut(h),i.on("mousewheel",function(a){var c=a.originalEvent,e=c.wheelDelta||-c.detail,f=c.wheelDeltaX||(1==c.axis?e:0),g=c.wheelDeltaY||(2==c.axis?e:0);if(e&&b.hideCellPreview(),g&&d.table.scrollHeight>d.table.clientHeight){var h=g*-1+d.$table.scrollTop();d.$table.scrollTop(h)}if(f&&d.table.scrollWidth>d.table.clientWidth){var i=f*-1+d.$table.scrollLeft();d.$table.scrollLeft(i)}})}},u.prototype._cellMouseOutEvent=function(a){this.hideCellPreview()},u.prototype.hideCellPreview=function(){var a=this,b=a.p;if(b.$cellPreviewEl){var c=b.$cellPreviewEl[0];b.$cellPreviewEl.remove(),b._unbindCellHoverOut(c.__cell),b._unbindCellHoverOut(c),c.__cell.__previewEl=null,c.__cell=null,this.trigger("cellpreviewdestroy",c.firstChild,c.physicalRowIndex,c.columnName),b.$cellPreviewEl=null}return b.abortCellPreview=!1,this};var v={AUTO:0,ABSOLUTE:1,RELATIVE:2};u.Width={NONE:"none",AUTO:"auto",SCROLL:"scroll"},o.controls||(o.controls={}),o.controls.dgtable=u,b.default=u}).call(b,function(){return this}())},function(b,c){b.exports=a},function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=Function.prototype.bind,d=(b.bind=function(a,b){if(c)return a.bind(b);if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice.call(arguments,1),e=this,f=function(){},g=function(){return e.apply(this instanceof f?this:b,d.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(f.prototype=this.prototype),g.prototype=new f,g},Function.prototype.indexOf),e=b.indexOf=function(a,b,c){if(d)return a.indexOf(b,c);var e;if(null==a)throw new TypeError('"this" is null or not defined');var f=a.length>>>0;if(0===f)return-1;var g=0|c;if(g>=f)return-1;for(e=Math.max(g>=0?g:f-Math.abs(g),0);e<f;){if(e in a&&a[e]===b)return e;e++}return-1},f=(b.contains=function(a,b){return e(a,b)>=0},b.find=function(a,b){for(var c=0,d=a.length;c>=0&&c<d;c+=1)if(b(a[c],c,a))return a[c]},Function.prototype.forEach);b.forEach=function(a,b,c){if(f)return a.forEach(b,c);var d,e;if(null===this)throw new TypeError(" this is null or not defined");var g=a.length>>>0;if("function"!=typeof b)throw new TypeError(b+" is not a function");for(arguments.length>1&&(d=c),e=0;e<g;){var h;e in a&&(h=a[e],b.call(d,h,e,a)),e++}}},function(a,b,c){"use strict";function d(){var a=[];return f(a,d.prototype),a.initialize.apply(a,arguments),a}function e(a,b){var c=a.column,d=a.comparePath||c;"string"==typeof d&&(d=d.split("."));var e,f=d.length,g=f>1,h=b?1:-1,i=b?-1:1;return function(a,b){var c=a[d[0]],j=b[d[0]];if(g)for(e=1;e<f;e++)c=c&&c[d[e]],j=j&&j[d[e]];return c<j?h:c>j?i:0}}Object.defineProperty(b,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=c(2);d.prototype=[],d.prototype.initialize=function(a){a=a||{},this.filterColumn=null,this.filterString=null,this.filterCaseSensitive=!1,this.sortColumn=null==a.sortColumn?[]:a.sortColumn},d.prototype.add=function(a,b){var c,d,e="splice"in a&&"length"in a;if(e)if(b)for(c=0,d=a.length;c<d;c++)this.splice(b++,0,a[c]);else for(c=0,d=a.length;c<d;c++)this.push(a[c]);else b?this.splice(b,0,a):this.push(a)},d.prototype.reset=function(a){this.length=0,a&&this.add(a)},d.prototype.filteredCollection=function(a,b,c){if(b=b.toString(),b&&null!=a){var e=new d({sortColumn:this.sortColumn});this.filterColumn=a,this.filterString=b,this.filterCaseSensitive=c;for(var f,g=0,h=this.length;g<h;g++)f=this[g],this.shouldBeVisible(f)&&(f.__i=g,e.push(f));return e}return this.filterColumn=null,this.filterString=null,null},d.prototype.shouldBeVisible=function(a){if(a&&this.filterColumn){var b=a[this.filterColumn];if(null==b)return!1;b=b.toString();var c=this.filterString;return this.filterCaseSensitive||(b=b.toUpperCase(),c=c.toUpperCase()),b.indexOf(c)!==-1}return!0},d.prototype.onComparatorRequired=null,d.prototype.onSort=null;var h=d.prototype.sort;d.prototype.sort=function(a){if(this.sortColumn.length){var b,c,d=[];for(b=0;b<this.sortColumn.length;b++)c=null,this.onComparatorRequired&&(c=this.onComparatorRequired(this.sortColumn[b].column,this.sortColumn[b].descending)),c||(c=e(this.sortColumn[b],this.sortColumn[b].descending)),d.push((0,g.bind)(c,this));if(1===d.length)h.call(this,d[0]);else{var f,i=d.length;c=function(a,c){for(b=0;b<i;b++)if(f=d[b](a,c),0!==f)return f;return f},h.call(this,c)}a||this.onSort&&this.onSort()}return this},b.default=d},function(a,b){"use strict";function c(){var a=[];return d(a,c.prototype),a.initialize.apply(a,arguments),a}Object.defineProperty(b,"__esModule",{value:!0});var d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};c.prototype=[],c.prototype.initialize=function(){},c.prototype.get=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b].name==a)return this[b];return null},c.prototype.indexOf=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b].name==a)return b;return-1},c.prototype.getByOrder=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b].order==a)return this[b];return null},c.prototype.normalizeOrder=function(){var a,b=[];for(a=0;a<this.length;a++)b.push(this[a]);for(b.sort(function(a,b){return a.order<b.order?-1:a.order>b.order?1:0}),a=0;a<b.length;a++)b[a].order=a;return this},c.prototype.getVisibleColumns=function(){for(var a,b=[],c=0;c<this.length;c++)a=this[c],a.visible&&b.push(a);return b.sort(function(a,b){return a.order<b.order?-1:a.order>b.order?1:0}),b},c.prototype.getMaxOrder=function(){for(var a,b=0,c=0;c<this.length;c++)a=this[c],a.order>b&&(b=a.order);return b},c.prototype.moveColumn=function(a,b){if(a&&b){var c,d,e=a.order,f=b.order;if(e<f)for(c=e+1;c<=f;c++)d=this.getByOrder(c),d.order--;else for(c=e-1;c>=f;c--)d=this.getByOrder(c),d.order++;a.order=f}return this},b.default=c}])});