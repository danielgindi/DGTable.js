/*!
 * jquery.dgtable 0.5.26
 * git://github.com/danielgindi/jquery.dgtable.git
 */
import e from"jquery";const t=Array.prototype.indexOf,o=function(e,t){for(let o=0,l=e.length;o>=0&&o<l;o+=1)if(t(e[o],o,e))return e[o]},l=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")};function r(){let e=[];return Object.assign(e,r.prototype),e.initialize.apply(e,arguments),e}r.prototype=[],r.prototype.initialize=function(e){e=e||{},this.sortColumn=null==e.sortColumn?[]:e.sortColumn},r.prototype.add=function(e,t){let o,l;if("splice"in e&&"length"in e)if(t)for(o=0,l=e.length;o<l;o++)this.splice(t++,0,e[o]);else for(o=0,l=e.length;o<l;o++)this.push(e[o]);else t?this.splice(t,0,e):this.push(e)},r.prototype.reset=function(e){this.length=0,e&&this.add(e)},r.prototype.filteredCollection=function(e,t){if(e&&t){let o=new r({sortColumn:this.sortColumn});for(let l,r=0,i=this.length;r<i;r++)l=this[r],e(l,t)&&(l.__i=r,o.push(l));return o}return null},r.prototype.onComparatorRequired=null,r.prototype.onSort=null;let i=r.prototype.sort;function n(e,t){let o=e.column,l=e.comparePath||o;"string"==typeof l&&(l=l.split("."));let r,i=l.length,n=i>1,s=t?1:-1,a=t?-1:1;return function(e,t){let o=e[l[0]],d=t[l[0]];if(n)for(r=1;r<i;r++)o=o&&o[l[r]],d=d&&d[l[r]];return o===d?0:null==o?s:o<d?s:a}}function s(){let e=[];return Object.assign(e,s.prototype),e.initialize.apply(e,arguments),e}r.prototype.sort=function(e){if(this.sortColumn.length){let t,o,l=[];for(t=0;t<this.sortColumn.length;t++)o=null,this.onComparatorRequired&&(o=this.onComparatorRequired(this.sortColumn[t].column,this.sortColumn[t].descending)),o||(o=n(this.sortColumn[t],this.sortColumn[t].descending)),l.push(o.bind(this));if(1===l.length)i.call(this,l[0]);else{let e,r=l.length;o=function(o,i){for(t=0;t<r;t++)if(e=l[t](o,i),0!==e)return e;return e},i.call(this,o)}e||this.onSort&&this.onSort()}return this},s.prototype=[],s.prototype.initialize=function(){},s.prototype.get=function(e){for(let t=0,o=this.length;t<o;t++)if(this[t].name==e)return this[t];return null},s.prototype.indexOf=function(e){for(let t=0,o=this.length;t<o;t++)if(this[t].name==e)return t;return-1},s.prototype.getByOrder=function(e){for(let t=0,o=this.length;t<o;t++)if(this[t].order==e)return this[t];return null},s.prototype.normalizeOrder=function(){let e,t=[];for(e=0;e<this.length;e++)t.push(this[e]);for(t.sort((function(e,t){return e.order<t.order?-1:e.order>t.order?1:0})),e=0;e<t.length;e++)t[e].order=e;return this},s.prototype.getVisibleColumns=function(){let e=[];for(let t,o=0;o<this.length;o++)t=this[o],t.visible&&e.push(t);return e.sort((e,t)=>e.order<t.order?-1:e.order>t.order?1:0),e},s.prototype.getMaxOrder=function(){let e=0;for(let t,o=0;o<this.length;o++)t=this[o],t.order>e&&(e=t.order);return e},s.prototype.moveColumn=function(e,t){if(e&&t){let o,l,r=e.order,i=t.order;if(r<i)for(o=r+1;o<=i;o++)l=this.getByOrder(o),l.order--;else for(o=r-1;o>=i;o--)l=this.getByOrder(o),l.order++;e.order=i}return this};const a=e,d=document.defaultView&&document.defaultView.getComputedStyle,h=a&&a.fn.jquery>="3",u={width:["Left","Right","Width"],height:["Top","Bottom","Height"]},c=["width","height"],p={};let m=function(e,t,o,l){return function(){let r=arguments[0],i=arguments[1];if(r&&!(r instanceof Element)&&"length"in r&&(r=r[0]),!r)return null;let n,s,a,h=d?document.defaultView.getComputedStyle(r):r.currentStyle,u="border-box"===h.boxSizing,c=l&&!0===arguments[2]||!0===arguments[1];(u||l||o)&&(s=parseFloat(h["border"+t[0]+"Width"]||0)+parseFloat(h["border"+t[1]+"Width"]||0),a=parseFloat(h["padding"+t[0]]||0)+parseFloat(h["padding"+t[1]]||0));let p=c?parseFloat(h["margin"+t[0]]||0)+parseFloat(h["margin"+t[1]]||0):0;return null==i?(n=parseFloat(h[e]),u?(a+s>n&&(n=a+s),l?c&&(n+=p):n-=o?s:a+s):l?(n+=a+s,c&&(n+=p)):o&&(n+=a),n):(i=i||0,n=i,u?l?c&&(n-=p):n+=o?s:a+s:(l?(n-=a+s,c&&(n-=p)):o&&(n-=a),n<0&&(n=0)),r.style[e]=n+"px",i)}},f=function(e){return function(){let t=arguments[0];a.isArray(t)||t instanceof a||(t=[t]);let o=a.fn[e].apply(t,Array.prototype.slice.call(arguments,1));return arguments.length>1?this:o}};for(let e=0;e<c.length;e++){let t=c[e],o=u[t];h?(p[t]=f(t),p["inner"+o[2]]=f("inner"+o[2]),p["outer"+o[2]]=f("outer"+o[2])):(p[t]=m(t,o,!1,!1),p["inner"+o[2]]=m(t,o,!0,!1),p["outer"+o[2]]=m(t,o,!1,!0))}m=null;class g{static saveSelection(e){let t=window.getSelection().getRangeAt(0);if(e!==t.commonAncestorContainer&&!function(e,t){for(;(e=e.parentNode)&&e!==t;);return!!e}(t.commonAncestorContainer,e))return null;let o=t.cloneRange();o.selectNodeContents(e),o.setEnd(t.startContainer,t.startOffset);let l=o.toString().length;return{start:l,end:l+t.toString().length}}static restoreSelection(e,t){let o,l=0,r=[e],i=!1,n=!1,s=document.createRange();for(s.setStart(e,0),s.collapse(!0);!n&&(o=r.pop());)if(3==o.nodeType){let e=l+o.length;!i&&t.start>=l&&t.start<=e&&(s.setStart(o,t.start-l),i=!0),i&&t.end>=l&&t.end<=e&&(s.setEnd(o,t.end-l),n=!0),l=e}else{let e=o.childNodes.length;for(;e--;)r.push(o.childNodes[e])}let a=window.getSelection();a.removeAllRanges(),a.addRange(s)}}function b(e,t){let o=t.column,l=null==t.keyword?"":t.keyword.toString();if(!l||!o)return!0;let r=e[o];return null!=r&&(r=r.toString(),t.caseSensitive||(r=r.toLowerCase(),l=l.toLowerCase()),-1!==r.indexOf(l))}const v=Array.prototype.indexOf,C=e;let w=navigator.userAgent,y=-1!=w.indexOf("MSIE ")?parseFloat(w.substr(w.indexOf("MSIE ")+5)):null,_=y&&y<10,R=document.createElement.bind(document);const W=Object.prototype.hasOwnProperty;function T(e){var o,l;o=["relative","absolute","fixed"],l=e.css("position"),t.call(o,l)>=0||e.css("position","relative")}let N=function e(){if(!(this instanceof e))return new(Function.prototype.bind.apply(e,[e].concat(Array.prototype.slice.call(arguments,0))));this.initialize.apply(this,arguments)};N.VERSION="@@VERSION",N.prototype.VERSION=N.VERSION,N.prototype.initialize=function(e){let t=this;e=e||{};let o=t.o={},l=t.p={};l.events={},t.el=e.el&&e.el instanceof Element?e.el:document.createElement("div");let i=t.$el=C(t.el);t.el!==e.el&&i.addClass(e.className||"dgtable-wrapper"),i.data("control",t).data("dgtable",t),i.on("remove",(function(){t.destroy()})),l.onMouseMoveResizeAreaBound=this._onMouseMoveResizeArea.bind(this),l.onEndDragColumnHeaderBound=this._onEndDragColumnHeader.bind(this),l.onTableScrolledHorizontallyBound=this._onTableScrolledHorizontally.bind(this),this.$el.on("dragend",l.onEndDragColumnHeaderBound),l.tableSkeletonNeedsRendering=!0,o.virtualTable=void 0===e.virtualTable||!!e.virtualTable,o.rowsBufferSize=e.rowsBufferSize||3,o.minColumnWidth=Math.max(e.minColumnWidth||35,0),o.resizeAreaWidth=e.resizeAreaWidth||8,o.resizableColumns=void 0===e.resizableColumns||!!e.resizableColumns,o.movableColumns=void 0===e.movableColumns||!!e.movableColumns,o.sortableColumns=void 0===e.sortableColumns?1:parseInt(e.sortableColumns,10)||1,o.adjustColumnWidthForSortArrow=void 0===e.adjustColumnWidthForSortArrow||!!e.adjustColumnWidthForSortArrow,o.convertColumnWidthsToRelative=void 0!==e.convertColumnWidthsToRelative&&!!e.convertColumnWidthsToRelative,o.autoFillTableWidth=void 0!==e.autoFillTableWidth&&!!e.autoFillTableWidth,o.cellClasses=void 0===e.cellClasses?"":e.cellClasses,o.resizerClassName=void 0===e.resizerClassName?"dgtable-resize":e.resizerClassName,o.tableClassName=void 0===e.tableClassName?"dgtable":e.tableClassName,o.allowCellPreview=void 0===e.allowCellPreview||e.allowCellPreview,o.allowHeaderCellPreview=void 0===e.allowHeaderCellPreview||e.allowHeaderCellPreview,o.cellPreviewClassName=void 0===e.cellPreviewClassName?"dgtable-cell-preview":e.cellPreviewClassName,o.cellPreviewAutoBackground=void 0===e.cellPreviewAutoBackground||e.cellPreviewAutoBackground,o.onComparatorRequired=void 0===e.onComparatorRequired?null:e.onComparatorRequired,o.onComparatorRequired||"function"!=typeof e.comparatorCallback||(o.onComparatorRequired=e.comparatorCallback),o.width=void 0===e.width?N.Width.NONE:e.width,o.relativeWidthGrowsToFillWidth=void 0===e.relativeWidthGrowsToFillWidth||!!e.relativeWidthGrowsToFillWidth,o.relativeWidthShrinksToFillWidth=void 0!==e.relativeWidthShrinksToFillWidth&&!!e.relativeWidthShrinksToFillWidth,this.setCellFormatter(e.cellFormatter),this.setHeaderCellFormatter(e.headerCellFormatter),this.setFilter(e.filter),o.height=e.height,t.setColumns(e.columns||[],!1);let n=[];if(e.sortColumn){let t=e.sortColumn;if(t&&"object"!=typeof t&&(t=[t]),t instanceof Array||"object"==typeof t)for(let e=0,o=t.length;e<o;e++){let o=t[e];"string"==typeof o&&(o={column:o,descending:!1});let r=l.columns.get(o.column);n.push({column:o.column,comparePath:r.comparePath||r.dataPath,descending:o.descending})}}l.rows=new r({sortColumn:n}),l.rows.onComparatorRequired=function(e,t){if(o.onComparatorRequired)return o.onComparatorRequired(e,t)},l.filteredRows=null;let s=function(e){let o=(e=e||event).fromElement||e.relatedTarget;o==this||C.contains(this,o)||this.__previewCell&&(o==this.__previewCell||C.contains(this.__previewCell,o))||t._cellMouseOverEvent.call(t,this)},a=function(e){let o=(e=e||event).toElement||e.relatedTarget;o==this||C.contains(this,o)||this.__previewCell&&(o==this.__previewCell||C.contains(this.__previewCell,o))||t._cellMouseOutEvent.call(t,this)};"addEventListener"in window?(l._bindCellHoverIn=function(e){e.__hoverIn||e.addEventListener("mouseover",e.__hoverIn=s.bind(e))},l._unbindCellHoverIn=function(e){e.__hoverIn&&(e.removeEventListener("mouseover",e.__hoverIn),e.__hoverIn=null)},l._bindCellHoverOut=function(e){return e.__hoverOut||e.addEventListener("mouseout",e.__hoverOut=a.bind(e.__cell||e)),this},l._unbindCellHoverOut=function(e){return e.__hoverOut&&(e.removeEventListener("mouseout",e.__hoverOut),e.__hoverOut=null),this}):(l._bindCellHoverIn=function(e){e.__hoverIn||e.attachEvent("mouseover",e.__hoverIn=s.bind(e))},l._unbindCellHoverIn=function(e){e.__hoverIn&&(e.detachEvent("mouseover",e.__hoverIn),e.__hoverIn=null)},l._bindCellHoverOut=function(e){e.__hoverOut||e.attachEvent("mouseout",e.__hoverOut=a.bind(e.__cell||e))},l._unbindCellHoverOut=function(e){return e.__hoverOut&&(e.detachEvent("mouseout",e.__hoverOut),e.__hoverOut=null),this})},N.prototype.on=function(e,t){let o=this.p.events;return"function"!=typeof t?this:(W.call(o,e)||(o[e]=[]),o[e].push({cb:t,once:!1}),this)},N.prototype.once=function(e,t){let o=this.p.events;return"function"!=typeof t?this:(W.call(o,e)||(o[e]=[]),o[e].push({cb:t,once:!0}),this)},N.prototype.off=function(e,t){let o=this.p.events;if(!W.call(o,e))return this;let l=o[e];for(let e=0;e<l.length;e++){let o=l[e];t&&o.cb!==t||l.splice(e--,1)}return this},N.prototype.trigger=function(e){let t=this.p.events;if(W.call(t,e)){let o=t[e];for(let e=0;e<o.length;e++){let t=o[e];t.once&&o.splice(e--,1),t.cb.apply(this,Array.prototype.slice.call(arguments,1))}}return this},N.prototype._parseColumnWidth=function(e,t){let o=Math.max(0,parseFloat(e)),l=F.AUTO;return o>0&&(e==o+"%"?(l=F.RELATIVE,o/=100):o>0&&o<1?l=F.RELATIVE:(o<t&&(o=t),l=F.ABSOLUTE)),{width:o,mode:l}},N.prototype._initColumnFromData=function(e){let t=this._parseColumnWidth(e.width,e.ignoreMin?0:this.o.minColumnWidth),o={name:e.name,label:void 0===e.label?e.name:e.label,width:t.width,widthMode:t.mode,resizable:void 0===e.resizable||e.resizable,sortable:void 0===e.sortable||e.sortable,movable:void 0===e.movable||e.movable,visible:void 0===e.visible||e.visible,cellClasses:void 0===e.cellClasses?this.o.cellClasses:e.cellClasses,ignoreMin:void 0!==e.ignoreMin&&!!e.ignoreMin};return o.dataPath=void 0===e.dataPath?o.name:e.dataPath,o.comparePath=void 0===e.comparePath?o.dataPath:e.comparePath,"string"==typeof o.dataPath&&(o.dataPath=o.dataPath.split(".")),"string"==typeof o.comparePath&&(o.comparePath=o.comparePath.split(".")),o},N.prototype.close=N.prototype.remove=N.prototype.destroy=function(){let e=this,t=e.p||{},o=e.$el;if(e.__removed)return e;if(t.$resizer&&(t.$resizer.remove(),t.$resizer=null),t.$tbody){let o=t.$tbody[0].childNodes;for(let t=0,l=o.length;t<l;t++)e.trigger("rowdestroy",o[t])}if(this._destroyHeaderCells()._unbindCellEventsForTable(),t.$table&&t.$table.empty(),t.$tbody&&t.$tbody.empty(),t.workerListeners){for(let e=0;e<t.workerListeners.length;e++){let o=t.workerListeners[e];o.worker.removeEventListener("message",o.listener,!1)}t.workerListeners.length=0}t.rows.length=t.columns.length=0,t._deferredRender&&clearTimeout(t._deferredRender);for(let t in e)W.call(e,t)&&(e[t]=null);return e.__removed=!0,o&&o.remove(),this},N.prototype._unbindCellEventsForTable=function(){const e=this.p;if(e.headerRow)for(let t=0,o=e.headerRow.childNodes,l=o.length;t<l;t++)for(let l=0,r=o[t].childNodes,i=r.length;l<i;l++)e._unbindCellHoverIn(r[l]);if(e.tbody)for(let t=0,o=e.tbody.childNodes,l=o.length;t<l;t++)this._unbindCellEventsForRow(o[t]);return this},N.prototype._unbindCellEventsForRow=function(e){const t=this.p;for(let o=0,l=e.childNodes,r=l.length;o<r;o++)t._unbindCellHoverIn(l[o]);return this},N.prototype.render=function(){const e=this.o,t=this.p;if(!this.el.offsetParent)return t._deferredRender||(t._deferredRender=setTimeout(()=>{t._deferredRender=null,!this.__removed&&this.el.offsetParent&&this.render()})),this;let o,l;if(!0===t.tableSkeletonNeedsRendering){t.tableSkeletonNeedsRendering=!1,e.width==N.Width.AUTO&&this._clearSortArrows();let r=t.table?t.table.scrollTop:0,i=t.table?t.table.scrollLeft:0;this._renderSkeletonBase()._renderSkeletonBody().tableWidthChanged(!0,!1)._renderSkeletonHeaderCells(),e.virtualTable?this._updateLastCellWidthFromScrollbar():(l=(t.filteredRows||t.rows).length,o=this.renderRows(0,l-1),t.$tbody.html("").append(o),this._updateLastCellWidthFromScrollbar(!0)),t.table.scrollTop=r,t.table.scrollLeft=i,t.header.scrollLeft=i,this._updateTableWidth(!0);for(let e=0;e<t.rows.sortColumn.length;e++)this._showSortArrow(t.rows.sortColumn[e].column,t.rows.sortColumn[e].descending);e.adjustColumnWidthForSortArrow&&t.rows.sortColumn.length?this.tableWidthChanged(!0):e.virtualTable||this.tableWidthChanged(),this.trigger("renderskeleton"),e.virtualTable&&(t.$table.on("scroll",this._onVirtualTableScrolled.bind(this)),this.render())}else if(e.virtualTable){l=(t.filteredRows||t.rows).length;let r=t.table.scrollTop,i=Math.floor((r-t.virtualRowHeightFirst)/t.virtualRowHeight)+1-e.rowsBufferSize,n=Math.ceil((r-t.virtualRowHeightFirst+t.visibleHeight)/t.virtualRowHeight)+e.rowsBufferSize;i<0&&(i=0),n>=l&&(n=l-1);let s,a=-1,d=-1,h=t.tbody.childNodes;if(h.length&&(a=h[0].rowIndex,d=h[h.length-1].rowIndex),-1!==a&&a<i){s=Math.min(d+1,i)-a;for(let e=0;e<s;e++)this.trigger("rowdestroy",h[0]),this._unbindCellEventsForRow(h[0]),t.tbody.removeChild(h[0]);a+=s,a>d&&(a=d=-1)}else if(-1!==d&&d>n){s=d-Math.max(a-1,n);for(let e=0;e<s;e++)this.trigger("rowdestroy",h[h.length-1]),this._unbindCellEventsForRow(h[h.length-1]),t.tbody.removeChild(h[h.length-1]);d<a&&(a=d=-1)}i<a&&(o=this.renderRows(i,Math.min(n,a-1)),t.$tbody.prepend(o)),(n>d||-1===d)&&(o=this.renderRows(-1===d?i:d+1,n),t.$tbody.append(o))}return this.trigger("render"),this},N.prototype.clearAndRender=function(e){return this.p.tableSkeletonNeedsRendering=!0,(void 0===e||e)&&this.render(),this},N.prototype.renderRows=function(e,t){const o=this.o,l=this.p;let r,i,n=o.tableClassName,s=n+"-row",a=n+"-cell",d=l.filteredRows||l.rows,h=!!l.filteredRows,u=o.allowCellPreview,c=l.visibleColumns,p=o.virtualTable,m=l.virtualRowHeightFirst,f=l.virtualRowHeight,g=c.length;for(let e,t=0;t<g;t++)e=c[t],e._finalWidth=e.actualWidthConsideringScrollbarWidth||e.actualWidth;let b=document.createDocumentFragment(),v=this._isTableRtl()?"right":"left";for(let o=e,n=d.length;o<n&&o<=t;o++){let e=d[o];i=h?e.__i:o;let t=R("div");t.className=s,t.rowIndex=o,t.physicalRowIndex=i;for(let o=0;o<g;o++){let r=c[o],i=R("div");i.columnName=r.name,i.setAttribute("data-column",r.name),i.className=a,i.style.width=r._finalWidth+"px",r.cellClasses&&(i.className+=" "+r.cellClasses),u&&l._bindCellHoverIn(i),i.appendChild(R("div")).innerHTML=this._getHtmlForCell(e,r),t.appendChild(i)}p&&(r=o>0?m+(o-1)*f:0,t.style.position="absolute",t.style[v]=0,t.style.top=r+"px"),b.appendChild(t),this.trigger("rowcreate",o,i,t,e)}return b},N.prototype._calculateVirtualHeight=function(){let e=this.p;if(e.tbody){let t=(e.filteredRows||e.rows).length,o=e.virtualRowHeight*t;t&&(o+=e.virtualRowHeightFirst-e.virtualRowHeight,o+=e.virtualRowHeightLast-e.virtualRowHeight),o<1&&(o=1),e.tbody.style.height=o+"px"}return this},N.prototype._calculateTbodyWidth=function(){const e=this.p;let t,o,l,r,i=this.o.tableClassName,n=i+"-row",s=i+"-cell",a=e.visibleColumns,d=a.length,h=C("<div>").addClass(n).css("float","left"),u=0;for(l=0;l<d;l++)r=a[l],t=R("div"),t.className=s,t.style.width=r.actualWidth+"px",r.cellClasses&&(t.className+=" "+r.cellClasses),o=t.appendChild(R("div")),h.append(t),u+=r.actualWidth;let c=C("<div>").addClass(this.el.className).css({"z-index":-1,position:"absolute",left:"0",top:"-9999px",float:"left",width:"1px",overflow:"hidden"}).append(C("<div>").addClass(i).append(C("<div>").addClass(i+"-body").css("width",u+1e4).append(h)));c.appendTo(document.body);let m=C('<div style="border:1.5px solid #000;width:0;height:0;position:absolute;left:0;top:-9999px">').appendTo(document.body),f=parseFloat(m.css("border-width"));f=Math.round(f)!=f,m.remove();let g=p.outerWidth(h);return g-=e.scrollbarWidth||0,f&&g++,c.remove(),g},N.prototype.setColumns=function(e,t){const o=this.p;e=e||[];let l=new s;for(let t=0,o=0;t<e.length;t++){let r=e[t],i=this._initColumnFromData(r);void 0!==r.order?(r.order>o&&(o=r.order+1),i.order=r.order):i.order=o++,l.push(i)}return l.normalizeOrder(),o.columns=l,o.visibleColumns=l.getVisibleColumns(),this._ensureVisibleColumns().clearAndRender(t),this},N.prototype.addColumn=function(e,t,o){const l=this.p;let r=l.columns;if(e&&!r.get(e.name)){let i=null;void 0!==t&&(i=r.get(t)||r.getByOrder(t));let n=this._initColumnFromData(e);n.order=i?i.order:r.getMaxOrder()+1;for(let e=r.getMaxOrder(),t=n.order;e>=t;e--){let t=r.getByOrder(e);t&&t.order++}r.push(n),r.normalizeOrder(),l.visibleColumns=r.getVisibleColumns(),this._ensureVisibleColumns().clearAndRender(o),this.trigger("addcolumn",n.name)}return this},N.prototype.removeColumn=function(e,t){const o=this.p;let l=o.columns,r=l.indexOf(e);return r>-1&&(l.splice(r,1),l.normalizeOrder(),o.visibleColumns=l.getVisibleColumns(),this._ensureVisibleColumns().clearAndRender(t),this.trigger("removecolumn",e)),this},N.prototype.setCellFormatter=function(e){return this.o.cellFormatter=e||function(e){return"string"==typeof e?l(e):e},this},N.prototype.setHeaderCellFormatter=function(e){return this.o.headerCellFormatter=e||function(e){return"string"==typeof e?l(e):e},this},N.prototype.setFilter=function(e){return this.o.filter=e,this},N.prototype.filter=function(e){const t=this.p;let o=this.o.filter||b;"string"==typeof arguments[0]&&"string"==typeof arguments[1]&&(e={column:arguments[0],keyword:arguments[1],caseSensitive:arguments[2]});let l=!!t.filteredRows;return t.filteredRows&&(t.filteredRows=null),t.filterArgs="object"!=typeof e||Array.isArray(e)?e:C.extend({},e),t.filteredRows=t.rows.filteredCollection(o,e),(l||t.filteredRows)&&(this.clearAndRender(),this.trigger("filter",e)),this},N.prototype._refilter=function(){const e=this.p;if(e.filteredRows&&e.filterArgs){let t=this.o.filter||b;e.filteredRows=e.rows.filteredCollection(t,e.filterArgs)}return this},N.prototype.setColumnLabel=function(e,t){let o=this.p.columns.get(e);if(o&&(o.label=void 0===t?o.name:t,o.element))for(let e=0;e<o.element[0].firstChild.childNodes.length;e++){let t=o.element[0].firstChild.childNodes[e];if(3===t.nodeType){t.textContent=o.label;break}}return this},N.prototype.moveColumn=function(e,t){const o=this.o,l=this.p;let r,i,n=l.columns;if("string"==typeof e?r=n.get(e):"number"==typeof e&&(r=l.visibleColumns[e]),"string"==typeof t?i=n.get(t):"number"==typeof t&&(i=l.visibleColumns[t]),r&&i&&e!==t){let e=r.order,t=i.order;if(l.visibleColumns=n.moveColumn(r,i).getVisibleColumns(),this._ensureVisibleColumns(),o.virtualTable)this.clearAndRender()._updateLastCellWidthFromScrollbar(!0);else{let r=l.$headerRow.find(">div."+o.tableClassName+"-header-cell"),i=e<t?t+1:t,n=e;r[0].parentNode.insertBefore(r[n],r[i]);let s=l.visibleColumns[e];s=(s.actualWidthConsideringScrollbarWidth||s.actualWidth)+"px";let a=l.visibleColumns[t];a=(a.actualWidthConsideringScrollbarWidth||a.actualWidth)+"px";let d=l.$tbody[0].childNodes;for(let o=0,l=d.length;o<l;o++){let l=d[o];1===l.nodeType&&(l.insertBefore(l.childNodes[n],l.childNodes[i]),l.childNodes[t].firstChild.style.width=a,l.childNodes[e].firstChild.style.width=s)}}this.trigger("movecolumn",r.name,e,t)}return this},N.prototype.sort=function(e,t,o){const l=this.o,r=this.p;let i=r.columns.get(e),n=r.rows.sortColumn;if(i){if(n.length&&n[n.length-1].column==e&&(t=void 0===t?!n[n.length-1].descending:t),o){for(let e=0;e<n.length;e++)if(n[e].column==i.name){e<n.length-1?n.length=0:n.splice(n.length-1,1);break}(l.sortableColumns>0&&n.length>=l.sortableColumns||n.length>=r.visibleColumns.length)&&(n.length=0)}else n.length=0;t=void 0!==t&&t,n.push({column:i.name,comparePath:i.comparePath||i.dataPath,descending:!!t})}else n.length=0;this._clearSortArrows();for(let e=0;e<n.length;e++)this._showSortArrow(n[e].column,n[e].descending);if(l.adjustColumnWidthForSortArrow&&!l._tableSkeletonNeedsRendering&&this.tableWidthChanged(!0),l.virtualTable)for(;r.tbody&&r.tbody.firstChild;)this.trigger("rowdestroy",r.tbody.firstChild),this._unbindCellEventsForRow(r.tbody.firstChild),r.tbody.removeChild(r.tbody.firstChild);else r.tableSkeletonNeedsRendering=!0;r.rows.sortColumn=n,n.length&&(r.rows.sort(!!r.filteredRows),r.filteredRows&&r.filteredRows.sort(!!r.filteredRows));let s=[];for(let e=0;e<n.length;e++)s.push({column:n[e].column,descending:n[e].descending});return this.trigger("sort",s),this},N.prototype.resort=function(){const e=this.p;let t=e.columns,o=e.rows.sortColumn;if(o.length){for(let e=0;e<o.length;e++)t.get(o[e].column)||o.splice(e--,1);e.rows.sortColumn=o,o.length&&(e.rows.sort(!!e.filteredRows),e.filteredRows&&e.filteredRows.sort(!!e.filteredRows));let l=[];for(let e=0;e<o.length;e++)l.push({column:o[e].column,descending:o[e].descending});this.trigger("sort",l)}return this},N.prototype._ensureVisibleColumns=function(){const e=this.p;return 0===e.visibleColumns.length&&e.columns.length&&(e.columns[0].visible=!0,e.visibleColumns.push(e.columns[0]),this.trigger("showcolumn",e.columns[0].name)),this},N.prototype.setColumnVisible=function(e,t){const o=this.p;let l=o.columns.get(e);return t=!!t,l&&!!l.visible!=t&&(l.visible=t,o.visibleColumns=o.columns.getVisibleColumns(),this.trigger(t?"showcolumn":"hidecolumn",e),this._ensureVisibleColumns(),this.clearAndRender()),this},N.prototype.isColumnVisible=function(e){let t=this.p.columns.get(e);return!!t&&t.visible},N.prototype.setMinColumnWidth=function(e){let t=this.o;return e=Math.max(e,0),t.minColumnWidth!=e&&(t.minColumnWidth=e,this.tableWidthChanged(!0)),this},N.prototype.getMinColumnWidth=function(){return this.o.minColumnWidth},N.prototype.setSortableColumns=function(e){const t=this.p,o=this.o;if(o.sortableColumns!=e&&(o.sortableColumns=e,t.$table)){let e=t.$headerRow.find(">div."+o.tableClassName+"-header-cell");for(let l=0;l<e.length;l++)C(e[0])[o.sortableColumns>0&&t.visibleColumns[l].sortable?"addClass":"removeClass"]("sortable")}return this},N.prototype.getSortableColumns=function(){return this.o.sortableColumns},N.prototype.setMovableColumns=function(e){let t=this.o;return e=void 0===e||!!e,t.movableColumns!=e&&(t.movableColumns=e),this},N.prototype.getMovableColumns=function(){return this.o.movableColumns},N.prototype.setResizableColumns=function(e){let t=this.o;return e=void 0===e||!!e,t.resizableColumns!=e&&(t.resizableColumns=e),this},N.prototype.getResizableColumns=function(){return this.o.resizableColumns},N.prototype.setComparatorCallback=function(e){let t=this.o;return t.onComparatorRequired!=e&&(t.onComparatorRequired=e),this},N.prototype.setColumnWidth=function(e,t){let o=this.p.columns.get(e),l=this._parseColumnWidth(t,o.ignoreMin?0:this.o.minColumnWidth);if(o){let e=this._serializeColumnWidth(o);o.width=l.width,o.widthMode=l.mode;let t=this._serializeColumnWidth(o);e!=t&&this.tableWidthChanged(!0),this.trigger("columnwidth",o.name,e,t)}return this},N.prototype.getColumnWidth=function(e){let t=this.p.columns.get(e);return t?this._serializeColumnWidth(t):null},N.prototype.getColumnConfig=function(e){let t=this.p.columns.get(e);return t?{order:t.order,width:this._serializeColumnWidth(t),visible:t.visible,label:t.label}:null},N.prototype.getColumnsConfig=function(){const e=this.p;let t={};for(let o=0;o<e.columns.length;o++)t[e.columns[o].name]=this.getColumnConfig(e.columns[o].name);return t},N.prototype.getSortedColumns=function(){const e=this.p;let t=[];for(let o=0;o<e.rows.sortColumn.length;o++){let l=e.rows.sortColumn[o];t.push({column:l.column,descending:l.descending})}return t},N.prototype.getHtmlForCell=function(e,t){const o=this.p;if(e<0||e>o.rows.length-1)return null;let l=o.columns.get(t);if(!l)return null;let r=o.rows[e];return this._getHtmlForCell(r,l)},N.prototype._getHtmlForCell=function(e,t){let o=t.dataPath,l=e[o[0]];for(let e=1;e<o.length&&null!=l;e++)l=l&&l[o[e]];let r=this.o.cellFormatter(l,t.name,e);return void 0===r&&(r=""),r},N.prototype.getRowYPos=function(e){const t=this.p;if(this.o.virtualTable)return e>0?t.virtualRowHeightFirst+(e-1)*t.virtualRowHeight:0;{let o=t.tbody.childNodes[e];return o?o.offsetTop:null}},N.prototype.getDataForRow=function(e){const t=this.p;return e<0||e>t.rows.length-1?null:t.rows[e]},N.prototype.getRowCount=function(){const e=this.p;return e.rows?e.rows.length:0},N.prototype.getIndexForRow=function(e){return this.p.rows.indexOf(e)},N.prototype.getFilteredRowCount=function(){const e=this.p;return(e.filteredRows||e.rows).length},N.prototype.getIndexForFilteredRow=function(e){const t=this.p;return(t.filteredRows||t.rows).indexOf(e)},N.prototype.getDataForFilteredRow=function(e){const t=this.p;return e<0||e>(t.filteredRows||t.rows).length-1?null:(t.filteredRows||t.rows)[e]},N.prototype.getHeaderRowElement=function(){return this.p.headerRow},N.prototype._horizontalPadding=function(e){return(parseFloat(C.css(e,"padding-left"))||0)+(parseFloat(C.css(e,"padding-right"))||0)},N.prototype._horizontalBorderWidth=function(e){return(parseFloat(C.css(e,"border-left"))||0)+(parseFloat(C.css(e,"border-right"))||0)},N.prototype._calculateWidthAvailableForColumns=function(){const e=this.o,t=this.p;let o,l,r;t.$table&&(l=t.table?t.table.scrollTop:0,r=t.table?t.table.scrollLeft:0,e.virtualTable&&(o=t.$table[0].style.display,t.$table[0].style.display="none"));let i=p.width(this.$el);t.$table&&(e.virtualTable&&(t.$table[0].style.display=o),t.table.scrollTop=l,t.table.scrollLeft=r,t.header.scrollLeft=r);let n=e.tableClassName,s=C("<div>").addClass(this.el.className).css({"z-index":-1,position:"absolute",left:"0",top:"-9999px"}),a=C("<div>").addClass(n+"-header").appendTo(s),d=C("<div>").addClass(n+"-header-row").appendTo(a);for(let e=0;e<t.visibleColumns.length;e++)d.append(C("<div><div></div></div>").addClass(n+"-header-cell").addClass(t.visibleColumns[e].cellClasses||""));s.appendTo(document.body),i-=this._horizontalBorderWidth(d[0]);let h=d.find(">div."+n+"-header-cell");for(let e=0;e<h.length;e++){let t=C(h[e]);"border-box"===t.css("boxSizing")||(i-=(parseFloat(t.css("border-right-width"))||0)+(parseFloat(t.css("border-left-width"))||0)+this._horizontalPadding(t[0]))}return s&&s.remove(),Math.max(0,i)},N.prototype.tableWidthChanged=function(){let e=function(e){let t,o=this.o.tableClassName,l=C("<div>").addClass(this.$el).append(C("<div>").addClass(o+"-header").append(C("<div>").addClass(o+"-header-row").append(t=C("<div>").addClass(o+"-header-cell").append(C("<div>").text(e))))).css({position:"absolute",top:"-9999px",visibility:"hidden"});l.appendTo(document.body);let r=p.width(t);return l.remove(),r},t=null;return function(o,l){let r=this.o,i=this.p,n=this._calculateWidthAvailableForColumns(),s=n,a=0;l=void 0===l||l;let d=0;if(i.tbody||(l=!1),l&&(d=parseFloat(i.tbody.style.minWidth)||0),s!=t||o){t=n;let o=0,h=[],u=0;for(let e=0;e<i.columns.length;e++)i.columns[e].actualWidthConsideringScrollbarWidth=null;for(let t=0;t<i.visibleColumns.length;t++){let l=i.visibleColumns[t];if(l.widthMode===F.ABSOLUTE){let e=l.width;e+=l.arrowProposedWidth||0,!l.ignoreMin&&e<r.minColumnWidth&&(e=r.minColumnWidth),s-=e,o+=e,e!==l.actualWidth&&(l.actualWidth=e,h.push(t))}else if(l.widthMode===F.AUTO){let i=e.call(this,l.label)+20;i+=l.arrowProposedWidth||0,!l.ignoreMin&&i<r.minColumnWidth&&(i=r.minColumnWidth),s-=i,o+=i,i!==l.actualWidth&&(l.actualWidth=i,r.convertColumnWidthsToRelative||h.push(t))}else l.widthMode===F.RELATIVE&&(u+=l.width,a++)}if(r.convertColumnWidthsToRelative)for(let e=0;e<i.visibleColumns.length;e++){let t=i.visibleColumns[e];t.widthMode===F.AUTO&&(t.widthMode=F.RELATIVE,s+=t.actualWidth,t.width=t.actualWidth/o,u+=t.width,a++)}if(a&&(u<1&&r.relativeWidthGrowsToFillWidth||u>1&&r.relativeWidthShrinksToFillWidth))for(let e=0;e<i.visibleColumns.length;e++){let t=i.visibleColumns[e];t.widthMode===F.RELATIVE&&(t.width/=u)}let c=Math.max(0,s);0===c&&(c=i.table.clientWidth);let p=r.minColumnWidth/c;if(isNaN(p)&&(p=0),p>0){let e,t=0;for(let e=0;e<i.visibleColumns.length;e++){let o=i.visibleColumns[e];o.widthMode===F.RELATIVE&&!o.ignoreMin&&o.width<p&&(t+=p-o.width,o.width=p)}for(let o=0;o<i.visibleColumns.length;o++){let l=i.visibleColumns[o];l.widthMode===F.RELATIVE&&!l.ignoreMin&&l.width>p&&t>0&&(e=Math.min(t,l.width-p),l.width-=e,t-=e)}}if(r.autoFillTableWidth&&s>0){let e=0,t=s;for(let o=0;o<i.visibleColumns.length;o++){let l=i.visibleColumns[o];l.resizable||l.widthMode!==F.ABSOLUTE||(e+=l.width),l.widthMode===F.RELATIVE&&(t-=Math.round(c*l.width))}let o=(n-e)/(n-t-e)||NaN;for(let e=0;e<i.visibleColumns.length&&t>0;e++){let t=i.visibleColumns[e];if(t.resizable||t.widthMode!==F.ABSOLUTE)if(t.widthMode===F.RELATIVE)t.width*=o;else{let l=t.actualWidth*o;t.actualWidth!==l&&(t.actualWidth=l,-1===h.indexOf(e)&&h.push(e))}}}for(let e=0;e<i.visibleColumns.length;e++){let t=i.visibleColumns[e];if(t.widthMode===F.RELATIVE){let o=Math.round(c*t.width);s-=o,a--,0===a&&1===s&&(o++,s--),-1===s&&(o--,s++),o!==t.actualWidth&&(t.actualWidth=o,h.push(e))}}if(i.visibleColumns.length&&(i.visibleColumns[i.visibleColumns.length-1].actualWidthConsideringScrollbarWidth=i.visibleColumns[i.visibleColumns.length-1].actualWidth-(i.scrollbarWidth||0)),l){let e=this._calculateTbodyWidth();d<e&&this._updateTableWidth(!1);for(let e=0;e<h.length;e++)this._resizeColumnElements(h[e]);d>e&&this._updateTableWidth(!1)}}return this}}(),N.prototype.tableHeightChanged=function(){let e=this.o,t=this.p;if(!t.$table)return this;let o=p.innerHeight(this.$el)-(parseFloat(t.$table.css("border-top-width"))||0)-(parseFloat(t.$table.css("border-bottom-width"))||0);return o!=e.height&&(e.height=o,t.tbody&&(t.tbody.style.height=Math.max(e.height-p.outerHeight(t.$headerRow),1)+"px"),e.virtualTable&&this.clearAndRender()),this},N.prototype.addRows=function(e,t,o,l){let r=this,i=r.p;if("boolean"==typeof t&&(l=o,o=t,t=-1),"number"!=typeof t&&(t=-1),(t<0||t>i.rows.length)&&(t=i.rows.length),l=void 0===l||!!l,e){if(i.rows.add(e,t),i.filteredRows||o&&i.rows.sortColumn.length)o&&i.rows.sortColumn.length?this.resort():this._refilter(),i.tableSkeletonNeedsRendering=!0,l&&this.render();else if(l){let o=i.tbody.childNodes;if(r.o.virtualTable){for(;i.tbody.firstChild;)this.trigger("rowdestroy",i.tbody.firstChild),this._unbindCellEventsForRow(i.tbody.firstChild),i.tbody.removeChild(i.tbody.firstChild);this._calculateVirtualHeight()._updateLastCellWidthFromScrollbar().render()._updateTableWidth(!1)}else if(i.$tbody){let l=t,n=t+e.length-1,s=r.renderRows(l,n);i.tbody.insertBefore(s,o[t]||null);for(let t=n+1;t<o.length;t++){let l=o[t];l.rowIndex+=e.length,l.physicalRowIndex+=e.length}this.render()._updateLastCellWidthFromScrollbar()._updateTableWidth(!0)}}this.trigger("addrows",e.length,!1)}return this},N.prototype.removeRows=function(e,t,o){let l=this.p;if("number"!=typeof t||t<=0)return this;if(e<0||e>l.rows.length-1)return this;if(l.rows.splice(e,t),o=void 0===o||!!o,l.filteredRows)this._refilter(),l.tableSkeletonNeedsRendering=!0,o&&this.render();else if(o){let o=l.tbody.childNodes;if(this.o.virtualTable){for(;l.tbody.firstChild;)this.trigger("rowdestroy",l.tbody.firstChild),this._unbindCellEventsForRow(l.tbody.firstChild),l.tbody.removeChild(l.tbody.firstChild);this._calculateVirtualHeight()._updateLastCellWidthFromScrollbar().render()._updateTableWidth(!1)}else{let r=e+t-1;for(let i=0;i<o.length;i++){let n=o[i],s=n.physicalRowIndex;s>=e?s<=r?(this.trigger("rowdestroy",n),this._unbindCellEventsForRow(n),l.tbody.removeChild(n),i--):n.physicalRowIndex-=t:n.rowIndex=i}this.render()._updateLastCellWidthFromScrollbar()._updateTableWidth(!0)}}return this},N.prototype.removeRow=function(e,t){return this.removeRows(e,1,t)},N.prototype.refreshRow=function(e){let t=this.p;if(e<0||e>t.rows.length-1)return this;let o=-1;if(t.filteredRows&&-1===(o=t.filteredRows.indexOf(t.rows[e])))return this;-1===o&&(o=e);let l=t.tbody.childNodes;if(this.o.virtualTable){let r=!1,i=0;for(;i<l.length;i++)if(l[i].physicalRowIndex===e){r=!0,this.trigger("rowdestroy",l[i]),this._unbindCellEventsForRow(l[i]),t.tbody.removeChild(l[i]);break}if(r){let e=this.renderRows(o,o);t.tbody.insertBefore(e,l[i]||null)}}else{this.trigger("rowdestroy",l[o]),this._unbindCellEventsForRow(l[o]),t.tbody.removeChild(l[o]);let e=this.renderRows(o,o);t.tbody.insertBefore(e,l[o]||null)}return this},N.prototype.getRowElement=function(e){let t=this.p;if(e<0||e>t.rows.length-1)return null;let o=-1;if(t.filteredRows&&-1===(o=t.filteredRows.indexOf(t.rows[e])))return this;-1===o&&(o=e);let l=t.tbody.childNodes;if(!this.o.virtualTable)return l[o];for(let t=0;t<l.length;t++)if(l[t].physicalRowIndex===e)return l[t];return null},N.prototype.refreshAllVirtualRows=function(){const e=this.p;if(this.o.virtualTable){let t=[],o=e.tbody.childNodes;for(let l=0,r=o.length;l<r;l++)t.push(o[l].physicalRowIndex),this.trigger("rowdestroy",o[l]),this._unbindCellEventsForRow(o[l]),e.tbody.removeChild(o[l]),l--,r--;for(let o=0;o<t.length;o++){let l=this.renderRows(t[o],t[o]);e.tbody.appendChild(l)}}return this},N.prototype.setRows=function(e,t){let o=this.p;return o.rows.reset(e),t&&o.rows.sortColumn.length?this.resort():this._refilter(),this.clearAndRender().trigger("addrows",e.length,!0),this},N.prototype.getUrlForElementContent=function(e){let t,o=document.getElementById(e);if(o){let e=o.textContent;if("function"==typeof Blob)t=new Blob([e]);else{let o=global.BlobBuilder||global.WebKitBlobBuilder||global.MozBlobBuilder||global.MSBlobBuilder;if(!o)return null;let l=new o;l.append(e),t=l.getBlob()}return(global.URL||global.webkitURL).createObjectURL(t)}return null},N.prototype.isWorkerSupported=function(){return global.Worker instanceof Function},N.prototype.createWebWorker=function(e,t,o){if(this.isWorkerSupported()){let l=this,r=l.p,i=new Worker(e),n=function(e){e.data.append?l.addRows(e.data.rows,o):l.setRows(e.data.rows,o)};return i.addEventListener("message",n,!1),r.workerListeners||(r.workerListeners=[]),r.workerListeners.push({worker:i,listener:n}),(t||void 0===t)&&i.postMessage(null),i}return null},N.prototype.unbindWebWorker=function(e){let t=this.p;if(t.workerListeners)for(let o=0;o<t.workerListeners.length;o++)t.workerListeners[o].worker==e&&(e.removeEventListener("message",t.workerListeners[o].listener,!1),t.workerListeners.splice(o,1),o--);return this},N.prototype.abortCellPreview=function(){return this.hideCellPreview(),this},N.prototype.cancelColumnResize=function(){const e=this.p;return e.$resizer&&(e.$resizer.remove(),e.$resizer=null,C(document).off("mousemove.dgtable",e.onMouseMoveResizeAreaBound).off("mouseup.dgtable",e.onEndDragColumnHeaderBound)),this},N.prototype._onVirtualTableScrolled=function(e){this.render()},N.prototype._onTableScrolledHorizontally=function(e){const t=this.p;t.header.scrollLeft=t.table.scrollLeft},N.prototype._getColumnByResizePosition=function(e){let t=this.o,o=this._isTableRtl(),l=C(e.target).closest("div."+t.tableClassName+"-header-cell,div."+t.cellPreviewClassName),r=l[0];r.__cell&&(r=r.__cell,l=C(r));let i=l[0].previousSibling;for(;i&&1!=i.nodeType;)i=i.previousSibling;let n=!i,s=((null!=e.pageX?e.pageX:e.originalEvent.pageX)||e.originalEvent.clientX)-l.offset().left;if(o){if(!n&&p.outerWidth(l)-s<=t.resizeAreaWidth/2)return i.columnName;if(s<=t.resizeAreaWidth/2)return r.columnName}else{if(!n&&s<=t.resizeAreaWidth/2)return i.columnName;if(p.outerWidth(l)-s<=t.resizeAreaWidth/2)return r.columnName}return null},N.prototype._onTouchStartColumnHeader=function(e){const t=this.p;if(t.currentTouchId)return;let l=e.originalEvent.changedTouches[0];t.currentTouchId=l.identifier;let r,i=C(e.currentTarget),n={x:l.pageX,y:l.pageY},s=n,a=function(){t.currentTouchId=null,i.off("touchend").off("touchcancel"),clearTimeout(r)},d=function(t){let o=C.Event(t),l=Array.prototype.slice.call(arguments,1);return C.each(["target","clientX","clientY","offsetX","offsetY","screenX","screenY","pageX","pageY","which"],(function(){o[this]=e[this];for(let e=0;e<l.length;e++)null!=l[e][this]&&(o[this]=l[e][this])})),o};i.trigger(d("mousedown",e.originalEvent.changedTouches[0],{which:1})),r=setTimeout(()=>{a(),i.one("touchend",e=>{e.preventDefault(),i.off("touchend").off("touchcancel")}).one("touchcancel",e=>{i.off("touchend").off("touchcancel")}),Math.sqrt(Math.pow(Math.abs(s.x-n.x),2)+Math.pow(Math.abs(s.y-n.y),2))<9&&(this.cancelColumnResize(),i.trigger(d("mouseup",e.originalEvent.changedTouches[0],{which:3})))},500),i.on("touchend",e=>{let l=o(e.originalEvent.changedTouches,e=>e.identifier===t.currentTouchId);l&&(a(),e.preventDefault(),s={x:l.pageX,y:l.pageY},(Math.sqrt(Math.pow(Math.abs(s.x-n.x),2)+Math.pow(Math.abs(s.y-n.y),2))<9||t.$resizer)&&(i.trigger(d("mouseup",l,{which:1})),i.trigger(d("click",l,{which:1}))))}).on("touchcancel",()=>{a()}).on("touchmove",e=>{let l=o(e.originalEvent.changedTouches,e=>e.identifier===t.currentTouchId);l&&(s={x:l.pageX,y:l.pageY},t.$resizer&&(e.preventDefault(),i.trigger(d("mousemove",l))))})},N.prototype._onMouseDownColumnHeader=function(e){if(1!==e.which)return this;let t=this.o,o=this.p,l=this._getColumnByResizePosition(e);if(l){let r=o.columns.get(l);if(!t.resizableColumns||!r||!r.resizable)return!1;let i=this._isTableRtl();o.$resizer&&C(o.$resizer).remove(),o.$resizer=C("<div></div>").addClass(t.resizerClassName).css({position:"absolute",display:"block","z-index":-1,visibility:"hidden",width:"2px",background:"#000",opacity:.7}).appendTo(this.$el);let n=r.element,s=o.$resizer.parent(),a=n.offset(),d=s.offset();8===y&&(a=n.offset()),d.left+=parseFloat(s.css("border-left-width"))||0,d.top+=parseFloat(s.css("border-top-width"))||0,a.left-=d.left,a.top-=d.top,a.top-=parseFloat(n.css("border-top-width"))||0;let h=p.outerWidth(o.$resizer);i?(a.left-=Math.ceil((parseFloat(n.css("border-left-width"))||0)/2),a.left-=Math.ceil(h/2)):(a.left+=p.outerWidth(n),a.left+=Math.ceil((parseFloat(n.css("border-right-width"))||0)/2),a.left-=Math.ceil(h/2)),o.$resizer.css({"z-index":"10",visibility:"visible",left:a.left,top:a.top,height:p.height(this.$el)})[0].columnName=n[0].columnName;try{o.$resizer[0].style.zIndex=""}catch(e){}C(document).on("mousemove.dgtable",o.onMouseMoveResizeAreaBound),C(document).on("mouseup.dgtable",o.onEndDragColumnHeaderBound),e.preventDefault()}},N.prototype._onMouseMoveColumnHeader=function(e){let t=this.o,o=this.p;if(t.resizableColumns){let l=this._getColumnByResizePosition(e),r=C(e.target).closest("div."+t.tableClassName+"-header-cell,div."+t.cellPreviewClassName)[0];l&&o.columns.get(l).resizable?r.style.cursor="e-resize":r.style.cursor=""}},N.prototype._onMouseUpColumnHeader=function(e){if(3===e.which){let t=this.o,o=C(e.target).closest("div."+t.tableClassName+"-header-cell,div."+t.cellPreviewClassName),l=o.offset();l.width=p.outerWidth(o),l.height=p.outerHeight(o),this.trigger("headercontextmenu",o[0].columnName,e.pageX,e.pageY,l)}return this},N.prototype._onMouseLeaveColumnHeader=function(e){let t=this.o;C(e.target).closest("div."+t.tableClassName+"-header-cell,div."+t.cellPreviewClassName)[0].style.cursor=""},N.prototype._onClickColumnHeader=function(e){if(!this._getColumnByResizePosition(e)){let t=this,o=t.o,l=t.p,r=C(e.target).closest("div."+o.tableClassName+"-header-cell,div."+o.cellPreviewClassName)[0];if(o.sortableColumns){let e=l.columns.get(r.columnName);e&&e.sortable&&this.sort(r.columnName,void 0,!0).render()}}},N.prototype._onStartDragColumnHeader=function(e){let t=this.o,o=this.p;if(t.movableColumns){let l=C(e.target).closest("div."+t.tableClassName+"-header-cell,div."+t.cellPreviewClassName),r=o.columns.get(l[0].columnName);r&&r.movable?(l[0].style.opacity=.35,o.dragId=161061273*Math.random(),e.originalEvent.dataTransfer.setData("text",JSON.stringify({dragId:o.dragId,column:r.name}))):e.preventDefault()}else e.preventDefault()},N.prototype._onMouseMoveResizeArea=function(e){let t=this.p,o=t.columns.get(t.$resizer[0].columnName),l=this._isTableRtl(),r=o.element,i=t.$resizer.parent(),n=r.offset(),s=i.offset();s.left+=parseFloat(i.css("border-left-width"))||0,n.left-=s.left;let a=p.outerWidth(t.$resizer),d="border-box"===r.css("box-sizing"),h=e.pageX-s.left,u=n.left;u-=Math.ceil(a/2),l?(u+=p.outerWidth(r),u-=o.ignoreMin?0:this.o.minColumnWidth,d||(u-=Math.ceil((parseFloat(r.css("border-left-width"))||0)/2),u-=this._horizontalPadding(r[0])),h>u&&(h=u)):(u+=o.ignoreMin?0:this.o.minColumnWidth,d||(u+=Math.ceil((parseFloat(r.css("border-right-width"))||0)/2),u+=this._horizontalPadding(r[0])),h<u&&(h=u)),t.$resizer.css("left",h+"px")},N.prototype._onEndDragColumnHeader=function(e){let t=this.o,o=this.p;if(o.$resizer){C(document).off("mousemove.dgtable",o.onMouseMoveResizeAreaBound).off("mouseup.dgtable",o.onEndDragColumnHeaderBound);let l=o.columns.get(o.$resizer[0].columnName),r=this._isTableRtl(),i=l.element,n=o.$resizer.parent(),s=i.offset(),a=n.offset();a.left+=parseFloat(n.css("border-left-width"))||0,s.left-=a.left;let d=p.outerWidth(o.$resizer),h="border-box"===i.css("box-sizing"),u=e.pageX-a.left,c=s.left,m=s.left,f=0;c-=Math.ceil(d/2),r?(h||(u+=this._horizontalPadding(i[0]),u+=parseFloat(i.css("border-left-width"))||0,u+=parseFloat(i.css("border-right-width"))||0),c+=p.outerWidth(i),m=c-(l.ignoreMin?0:this.o.minColumnWidth),u>m&&(u=m),f=c-u):(h||(u-=this._horizontalPadding(i[0]),u-=parseFloat(i.css("border-left-width"))||0,u-=parseFloat(i.css("border-right-width"))||0),m=c+(l.ignoreMin?0:this.o.minColumnWidth),u<m&&(u=m),f=u-c),o.$resizer.remove(),o.$resizer=null;let g=f;if(l.widthMode===F.RELATIVE){let e=this._calculateWidthAvailableForColumns(),r=0,i=0;for(let t=0;t<o.visibleColumns.length;t++){let n=o.visibleColumns[t];n.name!==l.name&&(n.widthMode==F.RELATIVE?(r+=n.width,i++):e-=n.actualWidth)}if(e=Math.max(1,e),g=f/e,i>0){let e=g/((1-g)/r);r+=g,(r<1&&t.relativeWidthGrowsToFillWidth||r>1&&t.relativeWidthShrinksToFillWidth)&&(g=e)}g*=100,g+="%"}this.setColumnWidth(l.name,g)}else e.target.style.opacity=null},N.prototype._onDragEnterColumnHeader=function(e){let t=this.o,o=this.p;if(t.movableColumns){let l=e.originalEvent.dataTransfer.getData("text");l=l?JSON.parse(l):null;let r=C(e.target).closest("div."+t.tableClassName+"-header-cell,div."+t.cellPreviewClassName);if(!l||o.dragId==l.dragId&&r.columnName!==l.column){let e=o.columns.get(r[0].columnName);e&&(e.movable||e!=o.visibleColumns[0])&&C(r).addClass("drag-over")}}},N.prototype._onDragOverColumnHeader=function(e){e.preventDefault()},N.prototype._onDragLeaveColumnHeader=function(e){let t=this.o,o=C(e.target).closest("div."+t.tableClassName+"-header-cell,div."+t.cellPreviewClassName);C(o[0].firstChild).has(e.originalEvent.relatedTarget).length||o.removeClass("drag-over")},N.prototype._onDropColumnHeader=function(e){e.preventDefault();let t=this.o,o=this.p,l=JSON.parse(e.originalEvent.dataTransfer.getData("text")),r=C(e.target).closest("div."+t.tableClassName+"-header-cell,div."+t.cellPreviewClassName);if(t.movableColumns&&l.dragId==o.dragId){let e=l.column,t=r[0].columnName,i=o.columns.get(e),n=o.columns.get(t);i&&n&&i.movable&&(n.movable||n!=o.visibleColumns[0])&&this.moveColumn(e,t)}C(r).removeClass("drag-over")},N.prototype._clearSortArrows=function(){let e=this.p;if(e.$table){let t=this.o.tableClassName,o=e.$headerRow.find(">div."+t+"-header-cell.sorted"),l=o.find(">div>.sort-arrow");for(let t of l){let o=e.columns.get(t.parentNode.parentNode.columnName);o&&(o.arrowProposedWidth=0)}l.remove(),o.removeClass("sorted").removeClass("desc")}return this},N.prototype._showSortArrow=function(e,t){let o=this.p.columns.get(e);if(!o)return!1;let l=R("span");return l.className="sort-arrow",o.element&&(o.element.addClass(t?"sorted desc":"sorted"),o.element[0].firstChild.insertBefore(l,o.element[0].firstChild.firstChild)),o.widthMode!=F.RELATIVE&&this.o.adjustColumnWidthForSortArrow&&(o.arrowProposedWidth=l.scrollWidth+(parseFloat(C(l).css("margin-right"))||0)+(parseFloat(C(l).css("margin-left"))||0)),this},N.prototype._resizeColumnElements=function(e){let t=this.p,o=t.$headerRow.find("div."+this.o.tableClassName+"-header-cell"),l=t.columns.get(o[e].columnName);if(l){o[e].style.width=(l.actualWidthConsideringScrollbarWidth||l.actualWidth)+"px";let r=(l.actualWidthConsideringScrollbarWidth||l.actualWidth)+"px",i=t.$tbody[0].childNodes;for(let t=0,o=i.length;t<o;t++){let o=i[t];1===o.nodeType&&(o.childNodes[e].style.width=r)}}return this},N.prototype._destroyHeaderCells=function(){let e=this.o,t=this.p;return t.$headerRow&&(this.trigger("headerrowdestroy",t.headerRow),t.$headerRow.find("div."+e.tableClassName+"-header-cell").remove(),t.$headerRow=null,t.headerRow=null),this},N.prototype._renderSkeletonBase=function(){let e=this,t=e.p,o=e.o;if(t.$table&&o.virtualTable){if(t.$table.remove(),t.$tbody){let o=t.$tbody[0].childNodes;for(let t=0,l=o.length;t<l;t++)e.trigger("rowdestroy",o[t]),e._unbindCellEventsForRow(o[t])}t.$table=t.table=t.$tbody=t.tbody=null}e._destroyHeaderCells(),t.currentTouchId=null,t.$header&&t.$header.remove();let l=o.tableClassName,r=R("div"),i=C(r),n=R("div"),s=C(n);return r.className=l+"-header",n.className=l+"-header-row",t.$header=i,t.header=r,t.$headerRow=s,t.headerRow=n,s.appendTo(t.$header),i.prependTo(this.$el),T(e.$el),o.width==N.Width.SCROLL?this.el.style.overflow="hidden":this.el.style.overflow="",!o.height&&o.virtualTable&&(o.height=p.innerHeight(this.$el)),this},N.prototype._renderSkeletonHeaderCells=function(){let e,t=this,o=t.p,l=t.o,r=l.allowCellPreview,i=l.allowHeaderCellPreview,n=l.tableClassName+"-header-cell",s=(o.header,o.$header,o.headerRow);o.$headerRow,_&&(e=function(e){return e.preventDefault(),this.dragDrop(),!1});let a=function(e){e.preventDefault()};for(let d=0;d<o.visibleColumns.length;d++){let h=o.visibleColumns[d];if(h.visible){let u=R("div"),c=C(u);u.draggable=!0,u.className=n,u.style.width=h.actualWidth+"px",l.sortableColumns&&h.sortable&&(u.className+=" sortable"),u.columnName=h.name,u.setAttribute("data-column",h.name);let p=R("div");p.innerHTML=l.headerCellFormatter(h.label,h.name),u.appendChild(p),r&&i&&o._bindCellHoverIn(u),s.appendChild(u),o.visibleColumns[d].element=c,c.on("mousedown.dgtable",t._onMouseDownColumnHeader.bind(t)).on("mousemove.dgtable",t._onMouseMoveColumnHeader.bind(t)).on("mouseup.dgtable",t._onMouseUpColumnHeader.bind(t)).on("mouseleave.dgtable",t._onMouseLeaveColumnHeader.bind(t)).on("touchstart.dgtable",t._onTouchStartColumnHeader.bind(t)).on("dragstart.dgtable",t._onStartDragColumnHeader.bind(t)).on("click.dgtable",t._onClickColumnHeader.bind(t)).on("contextmenu.dgtable",a),C(p).on("dragenter.dgtable",t._onDragEnterColumnHeader.bind(t)).on("dragover.dgtable",t._onDragOverColumnHeader.bind(t)).on("dragleave.dgtable",t._onDragLeaveColumnHeader.bind(t)).on("drop.dgtable",t._onDropColumnHeader.bind(t)),_&&c.on("selectstart.dgtable",e.bind(u)),c.css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none"})}}return this.trigger("headerrowcreate",s),this},N.prototype._renderSkeletonBody=function(){let e=this,t=e.p,o=e.o,l=o.tableClassName;if(o.virtualTable&&!t.virtualRowHeight){let o,r=function(){let e=R("div"),t=e.appendChild(R("div")),o=t.appendChild(R("div"));return e.className=l+"-row",t.className=l+"-cell",o.innerHTML="0",e.style.visibility="hidden",e.style.position="absolute",e},i=C("<div>").addClass(e.el.className).css({"z-index":-1,position:"absolute",left:"0",top:"-9999px",width:"1px",overflow:"hidden"}).append(C("<div>").addClass(l).append(o=C("<div>").addClass(l+"-body").css("width",99999)));i.appendTo(document.body);let n=r(),s=r(),a=r();o.append(n,s,a),t.virtualRowHeightFirst=p.outerHeight(n),t.virtualRowHeight=p.outerHeight(s),t.virtualRowHeightLast=p.outerHeight(a),t.virtualRowHeightMin=Math.min(Math.min(t.virtualRowHeightFirst,t.virtualRowHeight),t.virtualRowHeightLast),t.virtualRowHeightMax=Math.max(Math.max(t.virtualRowHeightFirst,t.virtualRowHeight),t.virtualRowHeightLast),i.remove()}if(!t.$table){let r=document.createDocumentFragment(),i=R("div"),n=C(i);i.className=l,o.virtualTable&&(i.className+=" virtual");let s=o.height-p.outerHeight(t.$headerRow);"border-box"!==n.css("box-sizing")&&(s-=parseFloat(n.css("border-top-width"))||0,s-=parseFloat(n.css("border-bottom-width"))||0,s-=parseFloat(n.css("padding-top"))||0,s-=parseFloat(n.css("padding-bottom"))||0),t.visibleHeight=s,i.style.height=o.height?s+"px":"auto",i.style.display="block",i.style.overflowY="auto",i.style.overflowX=o.width==N.Width.SCROLL?"auto":"hidden",r.appendChild(i);let a=R("div"),d=C(a);a.className=o.tableClassName+"-body",t.table=i,t.tbody=a,t.$table=n,t.$tbody=d,o.virtualTable&&(t.virtualVisibleRows=Math.ceil(t.visibleHeight/t.virtualRowHeightMin)),e._calculateVirtualHeight(),T(d),T(n),i.appendChild(a),e.el.appendChild(r)}return this},N.prototype._renderSkeleton=function(){return this},N.prototype._updateLastCellWidthFromScrollbar=function(e){const t=this.p;let o=t.table.offsetWidth-t.table.clientWidth;if(o!=t.scrollbarWidth||e){t.scrollbarWidth=o;for(let e=0;e<t.columns.length;e++)t.columns[e].actualWidthConsideringScrollbarWidth=null;if(t.scrollbarWidth>0&&t.visibleColumns.length>0){let e=t.visibleColumns.length-1;t.visibleColumns[e].actualWidthConsideringScrollbarWidth=t.visibleColumns[e].actualWidth-t.scrollbarWidth;let o=t.visibleColumns[e].actualWidthConsideringScrollbarWidth+"px",l=t.tbody.childNodes;for(let t=0,r=l.length;t<r;t++){let r=l[t];1===r.nodeType&&(r.childNodes[e].style.width=o)}t.headerRow.childNodes[e].style.width=o}}return this},N.prototype._updateTableWidth=function(e){const t=this.o,o=this.p;let l=this._calculateTbodyWidth();if(o.tbody.style.minWidth=l+"px",o.headerRow.style.minWidth=l+(o.scrollbarWidth||0)+"px",o.$table.off("scroll",o.onTableScrolledHorizontallyBound),t.width==N.Width.AUTO)p.width(o.$table,p.outerWidth(o.$tbody)),p.width(this.$el,p.outerWidth(o.$table));else if(t.width==N.Width.SCROLL){if(e){let e=o.table?o.table.scrollTop:0,t=o.table?o.table.scrollLeft:0;!function(e){let t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}(this.el),o.table.scrollTop=e,o.table.scrollLeft=t,o.header.scrollLeft=t}o.$table.on("scroll",o.onTableScrolledHorizontallyBound)}return this},N.prototype._isTableRtl=function(){return"rtl"===this.p.$table.css("direction")},N.prototype._serializeColumnWidth=function(e){return e.widthMode===F.AUTO?"auto":e.widthMode===F.RELATIVE?100*e.width+"%":e.width},N.prototype._cellMouseOverEvent=function(e){const t=this.o,o=this.p;let l=e.firstChild;if(l.scrollWidth-l.clientWidth>1||l.scrollHeight-l.clientHeight>1){this.hideCellPreview(),o.abortCellPreview=!1;let r=C(e),i=C(l),n=R("div"),s=C(n);n.innerHTML=e.innerHTML,n.className=t.cellPreviewClassName;let a=r.hasClass(t.tableClassName+"-header-cell");a&&(n.className+=" header",r.hasClass("sortable")&&(n.className+=" sortable"),n.draggable=!0,C(n).on("mousedown",this._onMouseDownColumnHeader.bind(this)).on("mousemove",this._onMouseMoveColumnHeader.bind(this)).on("mouseup",this._onMouseUpColumnHeader.bind(this)).on("mouseleave",this._onMouseLeaveColumnHeader.bind(this)).on("touchstart",this._onTouchStartColumnHeader.bind(this)).on("dragstart",this._onStartDragColumnHeader.bind(this)).on("click",this._onClickColumnHeader.bind(this)).on("contextmenu.dgtable",(function(e){e.preventDefault()})),C(n.firstChild).on("dragenter",this._onDragEnterColumnHeader.bind(this)).on("dragover",this._onDragOverColumnHeader.bind(this)).on("dragleave",this._onDragLeaveColumnHeader.bind(this)).on("drop",this._onDropColumnHeader.bind(this)),_&&C(n).on("selectstart",function(e){return e.preventDefault(),this.dragDrop(),!1}.bind(n)));let d=parseFloat(r.css("padding-left"))||0,h=parseFloat(r.css("padding-right"))||0,u=parseFloat(r.css("padding-top"))||0,c=parseFloat(r.css("padding-bottom"))||0,m=l.scrollWidth+(e.clientWidth-l.offsetWidth),f="border-box"===r.css("box-sizing");if(f?s.css("box-sizing","border-box"):(m-=d+h,s.css("margin-top",parseFloat(C(e).css("border-top-width"))||0)),!o.transparentBgColor1){let e=document.createElement("div");e.style.backgroundColor="transparent",o.transparentBgColor1=C(e).css("background-color"),e.style.backgroundColor="rgba(0,0,0,0)",o.transparentBgColor2=C(e).css("background-color")}let b={"box-sizing":f?"border-box":"content-box",width:m,"min-height":p.height(r),"padding-left":d,"padding-right":h,"padding-top":u,"padding-bottom":c,overflow:"hidden",position:"absolute","z-index":"-1",left:"0",top:"0",cursor:"default"};if(b){let t=C(e).css("background-color");t!==o.transparentBgColor1&&t!==o.transparentBgColor2||(t=C(e.parentNode).css("background-color")),t!==o.transparentBgColor1&&t!==o.transparentBgColor2||(t="#fff"),b["background-color"]=t}s.css(b),this.el.appendChild(n),C(n.firstChild).css({direction:i.css("direction"),"white-space":i.css("white-space")}),a&&s.css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none"}),n.rowIndex=e.parentNode.rowIndex;let w=n.physicalRowIndex=e.parentNode.physicalRowIndex;n.columnName=o.visibleColumns[v.call(e.parentNode.childNodes,e)].name;try{let t=g.saveSelection(e);t&&g.restoreSelection(n,t)}catch(e){}if(this.trigger("cellpreview",n.firstChild,null==w?null:w,n.columnName,null==w?null:o.rows[w],e),o.abortCellPreview)return void s.remove();let y=this.$el,W=y[0]===window?C(document):y,T=r.offset(),N=y.offset(),F="right"===r.css("float"),H=F?"right":"left";if(F){let e=C(window).width();T.right=e-(T.left+p.outerWidth(r)),N.right=e-(N.left+p.outerWidth(y))}T.left-=parseFloat(y.css("border-left-width"))||0,T.right-=parseFloat(y.css("border-right-width"))||0,T.top-=parseFloat(y.css("border-top-width"))||0,T[H]+=parseFloat(C(e).css("border-"+H+"-width"))||0,T.top+=parseFloat(C(e).css("border-top-width"))||parseFloat(C(e).css("border-bottom-width"))||0,T.left-=N.left,T.right-=N.right,T.top-=N.top;let M=0,z=y-p.outerWidth(s);T[H]=T[H]<M?M:T[H]>z?z:T[H];let x=p.outerHeight(r),S=W.scrollTop()+p.innerHeight(y)-x;T.top>S&&(T.top=Math.max(0,S));let E={top:T.top,"z-index":9999};E[H]=T[H],s.css(E),n.__cell=e,o.$cellPreviewCell=s,e.__previewCell=n,o._bindCellHoverOut(e),o._bindCellHoverOut(n),s.on("mousewheel",e=>{let t=e.originalEvent,l=t.wheelDelta||-t.detail,r=t.wheelDeltaX||(1==t.axis?l:0),i=t.wheelDeltaY||(2==t.axis?l:0);if(l&&this.hideCellPreview(),i&&o.table.scrollHeight>o.table.clientHeight){let e=-1*i+o.$table.scrollTop();o.$table.scrollTop(e)}if(r&&o.table.scrollWidth>o.table.clientWidth){let e=-1*r+o.$table.scrollLeft();o.$table.scrollLeft(e)}})}},N.prototype._cellMouseOutEvent=function(e){this.hideCellPreview()},N.prototype.hideCellPreview=function(){const e=this.p;if(e.$cellPreviewCell){let t,o=e.$cellPreviewCell[0],l=o.__cell;try{t=g.saveSelection(o)}catch(e){}e.$cellPreviewCell.remove(),e._unbindCellHoverOut(l),e._unbindCellHoverOut(o);try{t&&g.restoreSelection(l,t)}catch(e){}this.trigger("cellpreviewdestroy",o.firstChild,o.physicalRowIndex,o.columnName,l),l.__previewCell=null,o.__cell=null,e.$cellPreviewCell=null,e.abortCellPreview=!1}else e.abortCellPreview=!0;return this};const F={AUTO:0,ABSOLUTE:1,RELATIVE:2};N.Width={NONE:"none",AUTO:"auto",SCROLL:"scroll"},C.controls||(C.controls={}),C.controls.dgtable=N;export default N;

//# sourceMappingURL=jquery.dgtable.es6.min.js.map